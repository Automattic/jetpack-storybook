(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[9902],{"../api/index.jsx":(S,y,l)=>{"use strict";l.d(y,{Ay:()=>E});var g=l("../config/src/index.js"),m=l.n(g),$=l("../../../node_modules/.pnpm/@wordpress+url@4.8.1/node_modules/@wordpress/url/build-module/add-query-args.js");function p(h){class u extends Error{constructor(...f){super(...f),this.name=h}}return u}const j=p("JsonParseError"),b=p("JsonParseAfterRedirectError"),N=p("Api404Error"),J=p("Api404AfterRedirectError"),C=p("FetchNetworkError");function w(h,u){let t=h,f=h,v={"X-WP-Nonce":u},s={credentials:"same-origin",headers:v},a={method:"post",credentials:"same-origin",headers:Object.assign({},v,{"Content-type":"application/json"})},_=R;const A={setApiRoot(e){t=e},setWpcomOriginApiUrl(e){f=e},setApiNonce(e){v={"X-WP-Nonce":e},s={credentials:"same-origin",headers:v},a={method:"post",credentials:"same-origin",headers:Object.assign({},v,{"Content-type":"application/json"})}},setCacheBusterCallback:e=>{_=e},registerSite:(e,o,d)=>{const k={registration_nonce:e,no_iframe:!0};return(0,g.jetpackConfigHas)("consumer_slug")&&(k.plugin_slug=(0,g.jetpackConfigGet)("consumer_slug")),o!==null&&(k.redirect_uri=o),d&&(k.from=d),r(`${t}jetpack/v4/connection/register`,a,{body:JSON.stringify(k)}).then(n).then(i)},fetchAuthorizationUrl:e=>c((0,$.F)(`${t}jetpack/v4/connection/authorize_url`,{no_iframe:"1",redirect_uri:e}),s).then(n).then(i),fetchSiteConnectionData:()=>c(`${t}jetpack/v4/connection/data`,s).then(i),fetchSiteConnectionStatus:()=>c(`${t}jetpack/v4/connection`,s).then(i),fetchSiteConnectionTest:()=>c(`${t}jetpack/v4/connection/test`,s).then(n).then(i),fetchUserConnectionData:()=>c(`${t}jetpack/v4/connection/data`,s).then(i),fetchUserTrackingSettings:()=>c(`${t}jetpack/v4/tracking/settings`,s).then(n).then(i),updateUserTrackingSettings:e=>r(`${t}jetpack/v4/tracking/settings`,a,{body:JSON.stringify(e)}).then(n).then(i),disconnectSite:()=>r(`${t}jetpack/v4/connection`,a,{body:JSON.stringify({isActive:!1})}).then(n).then(i),fetchConnectUrl:()=>c(`${t}jetpack/v4/connection/url`,s).then(n).then(i),unlinkUser:()=>r(`${t}jetpack/v4/connection/user`,a,{body:JSON.stringify({linked:!1})}).then(n).then(i),reconnect:()=>r(`${t}jetpack/v4/connection/reconnect`,a).then(n).then(i),fetchConnectedPlugins:()=>c(`${t}jetpack/v4/connection/plugins`,s).then(n).then(i),setHasSeenWCConnectionModal:()=>r(`${t}jetpack/v4/seen-wc-connection-modal`,a).then(n).then(i),fetchModules:()=>c(`${t}jetpack/v4/module/all`,s).then(n).then(i),fetchModule:e=>c(`${t}jetpack/v4/module/${e}`,s).then(n).then(i),activateModule:e=>r(`${t}jetpack/v4/module/${e}/active`,a,{body:JSON.stringify({active:!0})}).then(n).then(i),deactivateModule:e=>r(`${t}jetpack/v4/module/${e}/active`,a,{body:JSON.stringify({active:!1})}),updateModuleOptions:(e,o)=>r(`${t}jetpack/v4/module/${e}`,a,{body:JSON.stringify(o)}).then(n).then(i),updateSettings:e=>r(`${t}jetpack/v4/settings`,a,{body:JSON.stringify(e)}).then(n).then(i),getProtectCount:()=>c(`${t}jetpack/v4/module/protect/data`,s).then(n).then(i),resetOptions:e=>r(`${t}jetpack/v4/options/${e}`,a,{body:JSON.stringify({reset:!0})}).then(n).then(i),activateVaultPress:()=>r(`${t}jetpack/v4/plugins`,a,{body:JSON.stringify({slug:"vaultpress",status:"active"})}).then(n).then(i),getVaultPressData:()=>c(`${t}jetpack/v4/module/vaultpress/data`,s).then(n).then(i),installPlugin:(e,o)=>{const d={slug:e,status:"active"};return o&&(d.source=o),r(`${t}jetpack/v4/plugins`,a,{body:JSON.stringify(d)}).then(n).then(i)},activateAkismet:()=>r(`${t}jetpack/v4/plugins`,a,{body:JSON.stringify({slug:"akismet",status:"active"})}).then(n).then(i),getAkismetData:()=>c(`${t}jetpack/v4/module/akismet/data`,s).then(n).then(i),checkAkismetKey:()=>c(`${t}jetpack/v4/module/akismet/key/check`,s).then(n).then(i),checkAkismetKeyTyped:e=>r(`${t}jetpack/v4/module/akismet/key/check`,a,{body:JSON.stringify({api_key:e})}).then(n).then(i),fetchStatsData:e=>c(U(e),s).then(n).then(i).then(D),getPluginUpdates:()=>c(`${t}jetpack/v4/updates/plugins`,s).then(n).then(i),getPlans:()=>c(`${t}jetpack/v4/plans`,s).then(n).then(i),fetchSettings:()=>c(`${t}jetpack/v4/settings`,s).then(n).then(i),updateSetting:e=>r(`${t}jetpack/v4/settings`,a,{body:JSON.stringify(e)}).then(n).then(i),fetchSiteData:()=>c(`${t}jetpack/v4/site`,s).then(n).then(i).then(e=>JSON.parse(e.data)),fetchSiteFeatures:()=>c(`${t}jetpack/v4/site/features`,s).then(n).then(i).then(e=>JSON.parse(e.data)),fetchSiteProducts:()=>c(`${t}jetpack/v4/site/products`,s).then(n).then(i),fetchSitePurchases:()=>c(`${t}jetpack/v4/site/purchases`,s).then(n).then(i).then(e=>JSON.parse(e.data)),fetchSiteBenefits:()=>c(`${t}jetpack/v4/site/benefits`,s).then(n).then(i).then(e=>JSON.parse(e.data)),fetchSiteDiscount:()=>c(`${t}jetpack/v4/site/discount`,s).then(n).then(i).then(e=>e.data),fetchSetupQuestionnaire:()=>c(`${t}jetpack/v4/setup/questionnaire`,s).then(n).then(i),fetchRecommendationsData:()=>c(`${t}jetpack/v4/recommendations/data`,s).then(n).then(i),fetchRecommendationsProductSuggestions:()=>c(`${t}jetpack/v4/recommendations/product-suggestions`,s).then(n).then(i),fetchRecommendationsUpsell:()=>c(`${t}jetpack/v4/recommendations/upsell`,s).then(n).then(i),fetchRecommendationsConditional:()=>c(`${t}jetpack/v4/recommendations/conditional`,s).then(n).then(i),saveRecommendationsData:e=>r(`${t}jetpack/v4/recommendations/data`,a,{body:JSON.stringify({data:e})}).then(n),fetchProducts:()=>c(`${t}jetpack/v4/products`,s).then(n).then(i),fetchRewindStatus:()=>c(`${t}jetpack/v4/rewind`,s).then(n).then(i).then(e=>JSON.parse(e.data)),fetchScanStatus:()=>c(`${t}jetpack/v4/scan`,s).then(n).then(i).then(e=>JSON.parse(e.data)),dismissJetpackNotice:e=>r(`${t}jetpack/v4/notice/${e}`,a,{body:JSON.stringify({dismissed:!0})}).then(n).then(i),fetchPluginsData:()=>c(`${t}jetpack/v4/plugins`,s).then(n).then(i),fetchIntroOffers:()=>c(`${t}jetpack/v4/intro-offers`,s).then(n).then(i),fetchVerifySiteGoogleStatus:e=>c(e!==null?`${t}jetpack/v4/verify-site/google/${e}`:`${t}jetpack/v4/verify-site/google`,s).then(n).then(i),verifySiteGoogle:e=>r(`${t}jetpack/v4/verify-site/google`,a,{body:JSON.stringify({keyring_id:e})}).then(n).then(i),submitSurvey:e=>r(`${t}jetpack/v4/marketing/survey`,a,{body:JSON.stringify(e)}).then(n).then(i),saveSetupQuestionnaire:e=>r(`${t}jetpack/v4/setup/questionnaire`,a,{body:JSON.stringify(e)}).then(n).then(i),updateLicensingError:e=>r(`${t}jetpack/v4/licensing/error`,a,{body:JSON.stringify(e)}).then(n).then(i),updateLicenseKey:e=>r(`${t}jetpack/v4/licensing/set-license`,a,{body:JSON.stringify({license:e})}).then(n).then(i),getUserLicensesCounts:()=>c(`${t}jetpack/v4/licensing/user/counts`,s).then(n).then(i),getUserLicenses:()=>c(`${t}jetpack/v4/licensing/user/licenses`,s).then(n).then(i),updateLicensingActivationNoticeDismiss:e=>r(`${t}jetpack/v4/licensing/user/activation-notice-dismiss`,a,{body:JSON.stringify({last_detached_count:e})}).then(n).then(i),updateRecommendationsStep:e=>r(`${t}jetpack/v4/recommendations/step`,a,{body:JSON.stringify({step:e})}).then(n),confirmIDCSafeMode:()=>r(`${t}jetpack/v4/identity-crisis/confirm-safe-mode`,a).then(n),startIDCFresh:e=>r(`${t}jetpack/v4/identity-crisis/start-fresh`,a,{body:JSON.stringify({redirect_uri:e})}).then(n).then(i),migrateIDC:()=>r(`${t}jetpack/v4/identity-crisis/migrate`,a).then(n),attachLicenses:e=>r(`${t}jetpack/v4/licensing/attach-licenses`,a,{body:JSON.stringify({licenses:e})}).then(n).then(i),fetchSearchPlanInfo:()=>c(`${f}jetpack/v4/search/plan`,s).then(n).then(i),fetchSearchSettings:()=>c(`${f}jetpack/v4/search/settings`,s).then(n).then(i),updateSearchSettings:e=>r(`${f}jetpack/v4/search/settings`,a,{body:JSON.stringify(e)}).then(n).then(i),fetchSearchStats:()=>c(`${f}jetpack/v4/search/stats`,s).then(n).then(i),fetchWafSettings:()=>c(`${t}jetpack/v4/waf`,s).then(n).then(i),updateWafSettings:e=>r(`${t}jetpack/v4/waf`,a,{body:JSON.stringify(e)}).then(n).then(i),fetchWordAdsSettings:()=>c(`${t}jetpack/v4/wordads/settings`,s).then(n).then(i),updateWordAdsSettings:e=>r(`${t}jetpack/v4/wordads/settings`,a,{body:JSON.stringify(e)}),fetchSearchPricing:()=>c(`${f}jetpack/v4/search/pricing`,s).then(n).then(i),fetchMigrationStatus:()=>c(`${t}jetpack/v4/migration/status`,s).then(n).then(i),fetchBackupUndoEvent:()=>c(`${t}jetpack/v4/site/backup/undo-event`,s).then(n).then(i),fetchBackupPreflightStatus:()=>c(`${t}jetpack/v4/site/backup/preflight`,s).then(n).then(i)};function R(e){const o=e.split("?"),d=o.length>1?o[1]:"",k=d.length?d.split("&"):[];return k.push("_cacheBuster="+new Date().getTime()),o[0]+"?"+k.join("&")}function c(e,o){return fetch(_(e),o)}function r(e,o,d){return fetch(e,Object.assign({},o,d)).catch(P)}function U(e){let o=`${t}jetpack/v4/module/stats/data`;return o.indexOf("?")!==-1?o=o+`&range=${encodeURIComponent(e)}`:o=o+`?range=${encodeURIComponent(e)}`,o}function D(e){return e.general&&e.general.response===void 0||e.week&&e.week.response===void 0||e.month&&e.month.response===void 0?e:{}}Object.assign(this,A)}const E=new w;function n(h){return h.status>=200&&h.status<300?h:h.status===404?new Promise(()=>{throw h.redirected?new J(h.redirected):new N}):h.json().catch(u=>O(u)).then(u=>{const t=new Error(`${u.message} (Status ${h.status})`);throw t.response=u,t.name="ApiError",t})}function i(h){return h.json().catch(u=>O(u,h.redirected,h.url))}function O(h,u,t){throw u?new b(t):new j}function P(){throw new C}},"../config/src/index.js":(S,y,l)=>{let g={};try{g=l(Object(function(){var j=new Error("Cannot find module 'jetpackConfig'");throw j.code="MODULE_NOT_FOUND",j}()))}catch(p){console.error("jetpackConfig is missing in your webpack config file. See @automattic/jetpack-config"),g={missingConfig:!0}}const m=p=>Object.hasOwn(g,p),$=p=>{if(!m(p))throw'This app requires the "'+p+'" Jetpack Config to be defined in your webpack configuration file. See details in @automattic/jetpack-config package docs.';return g[p]};S.exports={jetpackConfigHas:m,jetpackConfigGet:$}}}]);})();
