"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[2110],{"../../packages/my-jetpack/_inc/components/product-card/stories/index.stories.jsx":(f,p,n)=>{var w,o,a,y,P,h,j,O,v,M,C,D;n.r(p),n.d(p,{Default:()=>m,WithChildren:()=>e,WithMenu:()=>t,WithMenuForStandalone:()=>s,__namedExportsOrder:()=>_,default:()=>E});var u=n("../../../node_modules/.pnpm/@wordpress+icons@9.45.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/arrow-up.js"),i=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),d=n("../../packages/my-jetpack/_inc/components/product-card/index.jsx"),c=n("../../packages/my-jetpack/_inc/components/product-card/action-button.jsx"),l=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");window.myJetpackRest={};const E={title:"Packages/My Jetpack/Product Card",component:d.ZP,parameters:{layout:"centered",actions:{argTypesRegex:"^on.*"},controls:{exclude:"^on.*"},backgrounds:{default:"light",values:[{name:"light",value:"var(--jp-white-off)"}]}},decorators:[k=>(0,l.jsx)("div",{style:{width:"100vw",maxWidth:400},children:(0,l.jsx)(k,{})})],argTypes:{menuItems:{table:{disable:!0}},children:{table:{disable:!0}},slug:{control:"select",options:["anti-spam","backup","boost","crm","extras","protect","scan","social","search","videopress"]},status:{control:"select",options:[c.N.ACTIVE,c.N.INACTIVE,c.N.ERROR,c.N.ABSENT,c.N.ABSENT_WITH_PLAN,c.N.NEEDS_PURCHASE,c.N.NEEDS_PURCHASE_OR_FREE]}}},g=k=>(0,l.jsx)(d.ZP,{...k}),r={name:"Backup",description:"Save every change",status:c.N.ACTIVE,admin:!0,slug:"backup",isFetching:!1,showMenu:!1},m=g.bind({});m.args=r;const e=g.bind({});e.args={...r,children:(0,l.jsx)("div",{children:"Card Children"})};const t=g.bind({});t.args={...r,showMenu:!0,menuItems:[{label:"Upload",icon:u.Z}]};const s=g.bind({});s.args={...r,showMenu:!0,menuItems:[{label:"Upload",icon:u.Z}],onInstallStandalone:()=>alert("Installing standalone plugin"),onActivateStandalone:()=>alert("Activating standalone plugin"),hasStandalonePlugin:!0,isStandaloneInstalled:!1,isStandaloneActive:!1},m.parameters={...m.parameters,docs:{...(w=m.parameters)==null?void 0:w.docs,source:{originalSource:"args => <ProductCard {...args} />",...(a=(o=m.parameters)==null?void 0:o.docs)==null?void 0:a.source}}},e.parameters={...e.parameters,docs:{...(y=e.parameters)==null?void 0:y.docs,source:{originalSource:"args => <ProductCard {...args} />",...(h=(P=e.parameters)==null?void 0:P.docs)==null?void 0:h.source}}},t.parameters={...t.parameters,docs:{...(j=t.parameters)==null?void 0:j.docs,source:{originalSource:"args => <ProductCard {...args} />",...(v=(O=t.parameters)==null?void 0:O.docs)==null?void 0:v.source}}},s.parameters={...s.parameters,docs:{...(M=s.parameters)==null?void 0:M.docs,source:{originalSource:"args => <ProductCard {...args} />",...(D=(C=s.parameters)==null?void 0:C.docs)==null?void 0:D.source}}};const _=["Default","WithChildren","WithMenu","WithMenuForStandalone"]},"../../../node_modules/.pnpm/@wordpress+icons@9.45.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/arrow-up.js":(f,p,n)=>{n.d(p,{Z:()=>c});var u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=n("../../../node_modules/.pnpm/@wordpress+primitives@3.52.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const c=(0,u.createElement)(i.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(i.y$,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"}))},"../../../node_modules/.pnpm/@wordpress+icons@9.45.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/check.js":(f,p,n)=>{n.d(p,{Z:()=>c});var u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=n("../../../node_modules/.pnpm/@wordpress+primitives@3.52.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const c=(0,u.createElement)(i.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(i.y$,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}))},"../../../node_modules/.pnpm/@wordpress+icons@9.45.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/chevron-down.js":(f,p,n)=>{n.d(p,{Z:()=>c});var u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=n("../../../node_modules/.pnpm/@wordpress+primitives@3.52.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const c=(0,u.createElement)(i.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,u.createElement)(i.y$,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))},"../analytics/index.jsx":(f,p,n)=>{n.d(p,{Z:()=>m});var u=n("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),i=n.n(u);const d=i()("dops:analytics");let c,l;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;function E(e,t){let s="";if(typeof e=="object"){for(const _ in e)s+="&x_"+encodeURIComponent(_)+"="+encodeURIComponent(e[_]);d("Bumping stats %o",e)}else s="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),d('Bumping stat "%s" in group "%s"',t,e);return s}function g(e,t){let s="";if(typeof e=="object"){for(const _ in e)s+="&"+encodeURIComponent(_)+"="+encodeURIComponent(e[_]);d("Built stats %o",e)}else s="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),d('Built stat "%s" in group "%s"',t,e);return s}const r={initialize:function(e,t,s){r.setUser(e,t),r.setSuperProps(s),r.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){l={ID:e,username:t}},setSuperProps:function(e){c=e},assignSuperProps:function(e){c=Object.assign(c||{},e)},mc:{bumpStat:function(e,t){const s=E(e,t);r.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+s+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const s=g(e,t);r.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+s+"&t="+Math.random())}},pageView:{record:function(e,t){r.tracks.recordPageView(e),r.ga.recordPageView(e,t)}},purchase:{record:function(e,t,s,_,w,o,a){r.ga.recordPurchase(e,t,s,_,w,o,a)}},tracks:{recordEvent:function(e,t){if(t=t||{},e.indexOf("akismet_")!==0&&e.indexOf("jetpack_")!==0){d('- Event name must be prefixed by "akismet_" or "jetpack_"');return}c&&(d("- Super Props: %o",c),t=Object.assign(t,c)),d('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])},recordJetpackClick:function(e){const t=typeof e=="object"?e:{target:e};r.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){r.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){d("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};r.ga.initialized||(l&&(e={userId:"u-"+l.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),r.ga.initialized=!0)},recordPageView:function(e,t){r.ga.initialize(),d("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,s,_){r.ga.initialize();let w="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";typeof s!="undefined"&&(w+=" [Option Label: "+s+"]"),typeof _!="undefined"&&(w+=" [Option Value: "+_+"]"),d(w),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,s,_)},recordPurchase:function(e,t,s,_,w,o,a){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:_,currency:a}),window.ga("ecommerce:addItem",{id:e,name:t,sku:s,price:w,quantity:o}),window.ga("ecommerce:send")}},identifyUser:function(){l&&window._tkq.push(["identifyUser",l.ID,l.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},m=r},"../../packages/my-jetpack/_inc/data/products/use-product.ts":(f,p,n)=>{n.d(p,{Z:()=>w});var u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=n("../../packages/my-jetpack/_inc/data/constants.ts"),d=n("../../packages/my-jetpack/_inc/data/use-simple-query.ts"),c=n("../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts");const l=o=>Array.isArray(o)?o.map(a=>l(a)):typeof o=="object"&&o!==null?Object.fromEntries(Object.entries(o).map(([a,y])=>[a.replace(/([-_][a-z])/gi,P=>P.toUpperCase().replace(/[-_]/g,"")),l(y)])):o,E=l,g=o=>o.pricingForUi.productTerm==="year"?Math.round(o.pricingForUi.fullPrice/12*100)/100:o.pricingForUi.fullPrice,r=o=>o.pricingForUi.productTerm==="year"?Math.round(o.pricingForUi.discountPrice/12*100)/100:o.pricingForUi.discountPrice,m=()=>{const{items:o}=(0,c.$9)("products");return Object.entries(o).reduce((a,[y,P])=>({...a,[y]:s(P)}),{})},e=o=>(0,d.Z)({name:i.q9,query:{path:`${i.Jk}/${o}`},options:{enabled:!1}}),t=async(o,a)=>{const{data:y}=await a();window.myJetpackInitialState.products.items[o]=y},s=o=>{const a=E(o);return a.features=a.features||[],a.supportedProducts=a.supportedProducts||[],a.pricingForUi.fullPricePerMonth=g(a),a.pricingForUi.discountPricePerMonth=r(a),a},w=o=>{const a=m(),y=a==null?void 0:a[o],{refetch:P,isLoading:h}=e(o);return{detail:y,refetch:(0,u.useCallback)(()=>t(o,P),[o,P]),isLoading:h}}},"../../packages/my-jetpack/_inc/data/use-simple-query.ts":(f,p,n)=>{n.d(p,{Z:()=>l});var u=n("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useQuery.js"),i=n("../../../node_modules/.pnpm/@wordpress+api-fetch@6.51.0/node_modules/@wordpress/api-fetch/build-module/index.js"),d=n("../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts");const l=({name:E,query:g,options:r,errorMessage:m})=>{const e=(0,u.a)({queryKey:[E],queryFn:()=>(0,i.Z)(g),refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,...r}),{error:t,isError:s,isLoading:_}=e;return(0,d.o)({infoName:E,isError:!_&&s&&t.code!=="not_connected",overrideMessage:m}),e}},"../../packages/my-jetpack/_inc/hooks/use-analytics/index.ts":(f,p,n)=>{n.d(p,{Z:()=>E});var u=n("../analytics/index.jsx"),i=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),d=n("../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts"),c=n("../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.ts");const E=()=>{var o;const{isUserConnected:g,connectedPlugins:r,userConnectionData:m={}}=(0,c.Z)(),{login:e,ID:t}=((o=m.currentUser)==null?void 0:o.wpcomUser)||{},{myJetpackVersion:s=""}=(0,d.$9)();(0,i.useEffect)(()=>{g&&t&&e&&u.Z.initialize(t,e)},[t,g,e]);const _=Object.keys(r||{}).sort().join(",").replaceAll("jetpack-","");return{recordEvent:(0,i.useCallback)((a,y)=>{u.Z.tracks.recordEvent(a,{...y,version:s,referring_plugins:_})},[])}}},"../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.ts":(f,p,n)=>{n.d(p,{Z:()=>c});var u=n("../connection/components/use-connection/index.jsx"),i=n("../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts");const c=()=>{const{apiRoot:l,apiNonce:E}=(0,i.M_)(),{topJetpackMenuItemUrl:g,blogID:r}=(0,i.$9)(),m=(0,u.Z)({apiRoot:l,apiNonce:E}),{registrationNonce:e}=(0,i.vH)(),t=m.isRegistered;return{apiNonce:E,apiRoot:l,blogID:r,registrationNonce:e,...m,isSiteConnected:t,topJetpackMenuItemUrl:g}}}}]);})();
