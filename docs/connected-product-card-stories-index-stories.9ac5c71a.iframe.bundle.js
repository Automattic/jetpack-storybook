"use strict";(()=>{var pt=Object.defineProperty;var mt=(i,o,t)=>o in i?pt(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var dt=(i,o,t)=>(mt(i,typeof o!="symbol"?o+"":o,t),t),ct=(i,o,t)=>{if(!o.has(i))throw TypeError("Cannot "+t)};var a=(i,o,t)=>(ct(i,o,"read from private field"),t?t.call(i):o.get(i)),B=(i,o,t)=>{if(o.has(i))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(i):o.set(i,t)},N=(i,o,t,d)=>(ct(i,o,"write to private field"),d?d.call(i,t):o.set(i,t),t);var M=(i,o,t)=>(ct(i,o,"access private method"),t);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[5462],{"../../packages/my-jetpack/_inc/components/connected-product-card/stories/index.stories.jsx":(i,o,t)=>{var h,W,F;t.r(o),t.d(o,{Default:()=>c,__namedExportsOrder:()=>b,default:()=>m});var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=t("../../../node_modules/.pnpm/react-router-dom@6.6.2_react-dom@18.2.0_react@18.2.0/node_modules/react-router-dom/dist/index.js"),y=t("../../../node_modules/.pnpm/react-router@6.6.2_react@18.2.0/node_modules/react-router/dist/index.js"),l=t("../../packages/my-jetpack/_inc/components/connected-product-card/index.jsx"),D=t("../../packages/my-jetpack/_inc/state/store.js"),k=t("../../packages/my-jetpack/_inc/components/product-card/action-button.jsx"),O=t("../../packages/my-jetpack/_inc/components/product-detail-card/stories/utils.js"),v=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),x=`/* eslint-disable react/react-in-jsx-scope */

import React from 'react';
import { HashRouter, Routes, Route } from 'react-router-dom';
import ConnectedProductCard from '../';
import { initStore } from '../../../state/store';
import { PRODUCT_STATUSES } from '../../product-card';
import { getAllMockData, getProductSlugs } from '../../product-detail-card/stories/utils.js';

// Set myJetpackRest global var.
window.myJetpackRest = {};

const mockData = getAllMockData();

initStore();

export default {
	title: 'Packages/My Jetpack/Connected Product Card',
	component: ConnectedProductCard,
	argTypes: {
		slug: {
			options: getProductSlugs(),
			control: { type: 'select' },
		},
		status: {
			options: Object.values( PRODUCT_STATUSES ),
			control: { type: 'select' },
		},
	},
};

const Template = args => (
	<HashRouter>
		<Routes>
			<Route path="/" element={ <ConnectedProductCard { ...args } /> } />
		</Routes>
	</HashRouter>
);

export const Default = Template.bind( {} );
Default.parameters = { mockData };
Default.args = {
	admin: false,
	slug: 'backup',
};
`,E={Default:{startLoc:{col:17,line:32},endLoc:{col:1,line:38},startBody:{col:17,line:32},endBody:{col:1,line:38}}};window.myJetpackRest={};const A=(0,O.As)();(0,D.N)();const m={parameters:{storySource:{source:`

import React from 'react';
import { HashRouter, Routes, Route } from 'react-router-dom';
import ConnectedProductCard from '../';
import { initStore } from '../../../state/store';
import { PRODUCT_STATUSES } from '../../product-card';
import { getAllMockData, getProductSlugs } from '../../product-detail-card/stories/utils.js';

// Set myJetpackRest global var.
window.myJetpackRest = {};

const mockData = getAllMockData();

initStore();

export default {
	title: 'Packages/My Jetpack/Connected Product Card',
	component: ConnectedProductCard,
	argTypes: {
		slug: {
			options: getProductSlugs(),
			control: { type: 'select' },
		},
		status: {
			options: Object.values( PRODUCT_STATUSES ),
			control: { type: 'select' },
		},
	},
};

const Template = args => (
	<HashRouter>
		<Routes>
			<Route path="/" element={ <ConnectedProductCard { ...args } /> } />
		</Routes>
	</HashRouter>
);

export const Default = Template.bind( {} );
Default.parameters = { mockData };
Default.args = {
	admin: false,
	slug: 'backup',
};
`,locationsMap:{default:{startLoc:{col:17,line:32},endLoc:{col:1,line:38},startBody:{col:17,line:32},endBody:{col:1,line:38}}}}},title:"Packages/My Jetpack/Connected Product Card",component:l.Z,argTypes:{slug:{options:(0,O.h7)(),control:{type:"select"}},status:{options:Object.values(k.N),control:{type:"select"}}}},P=p=>(0,v.jsx)(g.UT,{children:(0,v.jsx)(y.Z5,{children:(0,v.jsx)(y.AW,{path:"/",element:(0,v.jsx)(l.Z,{...p})})})});P.displayName="Template";const c=P.bind({});c.parameters={mockData:A},c.args={admin:!1,slug:"backup"},c.parameters={...c.parameters,docs:{...(h=c.parameters)==null?void 0:h.docs,source:{originalSource:`args => <HashRouter>
        <Routes>
            <Route path="/" element={<ConnectedProductCard {...args} />} />
        </Routes>
    </HashRouter>`,...(F=(W=c.parameters)==null?void 0:W.docs)==null?void 0:F.source}}};const b=["Default"]},"../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useMutation.js":(i,o,t)=>{var m,P,c,b,h,Y,F,p,S,_,T,j,at,J,ut,q;t.d(o,{D:()=>E});var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=(F=class extends null{constructor(e){super();B(this,h);B(this,m,void 0);B(this,P,void 0);B(this,c,void 0);B(this,b,void 0);this.mutationId=e.mutationId,N(this,P,e.defaultOptions),N(this,c,e.mutationCache),N(this,m,[]),this.state=e.state||y(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...a(this,P),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){a(this,m).includes(e)||(a(this,m).push(e),this.clearGcTimeout(),a(this,c).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,m,a(this,m).filter(u=>u!==e)),this.scheduleGc(),a(this,c).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){a(this,m).length||(this.state.status==="pending"?this.scheduleGc():a(this,c).remove(this))}continue(){var e,u;return(u=(e=a(this,b))==null?void 0:e.continue())!=null?u:this.execute(this.state.variables)}async execute(e){var C,w,R,G,$,Z,I,U,X,Q,H,st,tt,nt,V,s,n,L,z,et;const u=()=>{var f;return N(this,b,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(ot,lt)=>{M(this,h,Y).call(this,{type:"failed",failureCount:ot,error:lt})},onPause:()=>{M(this,h,Y).call(this,{type:"pause"})},onContinue:()=>{M(this,h,Y).call(this,{type:"continue"})},retry:(f=this.options.retry)!=null?f:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),a(this,b).promise},r=this.state.status==="pending";try{if(!r){M(this,h,Y).call(this,{type:"pending",variables:e}),await((w=(C=a(this,c).config).onMutate)==null?void 0:w.call(C,e,this));const ot=await((G=(R=this.options).onMutate)==null?void 0:G.call(R,e));ot!==this.state.context&&M(this,h,Y).call(this,{type:"pending",context:ot,variables:e})}const f=await u();return await((Z=($=a(this,c).config).onSuccess)==null?void 0:Z.call($,f,e,this.state.context,this)),await((U=(I=this.options).onSuccess)==null?void 0:U.call(I,f,e,this.state.context)),await((Q=(X=a(this,c).config).onSettled)==null?void 0:Q.call(X,f,null,this.state.variables,this.state.context,this)),await((st=(H=this.options).onSettled)==null?void 0:st.call(H,f,null,e,this.state.context)),M(this,h,Y).call(this,{type:"success",data:f}),f}catch(f){try{throw await((nt=(tt=a(this,c).config).onError)==null?void 0:nt.call(tt,f,e,this.state.context,this)),await((s=(V=this.options).onError)==null?void 0:s.call(V,f,e,this.state.context)),await((L=(n=a(this,c).config).onSettled)==null?void 0:L.call(n,void 0,f,this.state.variables,this.state.context,this)),await((et=(z=this.options).onSettled)==null?void 0:et.call(z,void 0,f,e,this.state.context)),f}finally{M(this,h,Y).call(this,{type:"error",error:f})}}}},m=new WeakMap,P=new WeakMap,c=new WeakMap,b=new WeakMap,h=new WeakSet,Y=function(e){const u=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=u(this.state),notifyManager.batch(()=>{a(this,m).forEach(r=>{r.onMutationUpdate(e)}),a(this,c).notify({mutation:this,type:"updated",action:e})})},F);function y(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var l=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),D=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/subscribable.js"),k=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/utils.js"),O=(q=class extends D.l{constructor(e,u){super();B(this,j);B(this,J);B(this,p,void 0);B(this,S,void 0);B(this,_,void 0);B(this,T,void 0);N(this,p,e),this.setOptions(u),this.bindMethods(),M(this,j,at).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const u=this.options;this.options=a(this,p).defaultMutationOptions(e),(0,k.VS)(u,this.options)||a(this,p).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,_),observer:this}),u!=null&&u.mutationKey&&this.options.mutationKey&&(0,k.Ym)(u.mutationKey)!==(0,k.Ym)(this.options.mutationKey)?this.reset():(r=a(this,_))==null||r.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=a(this,_))==null||e.removeObserver(this)}onMutationUpdate(e){M(this,j,at).call(this),M(this,J,ut).call(this,e)}getCurrentResult(){return a(this,S)}reset(){var e;(e=a(this,_))==null||e.removeObserver(this),N(this,_,void 0),M(this,j,at).call(this),M(this,J,ut).call(this)}mutate(e,u){var r;return N(this,T,u),(r=a(this,_))==null||r.removeObserver(this),N(this,_,a(this,p).getMutationCache().build(a(this,p),this.options)),a(this,_).addObserver(this),a(this,_).execute(e)}},p=new WeakMap,S=new WeakMap,_=new WeakMap,T=new WeakMap,j=new WeakSet,at=function(){var u,r;const e=(r=(u=a(this,_))==null?void 0:u.state)!=null?r:y();N(this,S,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},J=new WeakSet,ut=function(e){l.V.batch(()=>{var u,r,C,w,R,G,$,Z;if(a(this,T)&&this.hasListeners()){const I=a(this,S).variables,U=a(this,S).context;(e==null?void 0:e.type)==="success"?((r=(u=a(this,T)).onSuccess)==null||r.call(u,e.data,I,U),(w=(C=a(this,T)).onSettled)==null||w.call(C,e.data,null,I,U)):(e==null?void 0:e.type)==="error"&&((G=(R=a(this,T)).onError)==null||G.call(R,e.error,I,U),(Z=($=a(this,T)).onSettled)==null||Z.call($,void 0,e.error,I,U))}this.listeners.forEach(I=>{I(a(this,S))})})},q),v=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),x=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/utils.js");function E(K,e){const u=(0,v.NL)(e),[r]=d.useState(()=>new O(u,K));d.useEffect(()=>{r.setOptions(K)},[r,K]);const C=d.useSyncExternalStore(d.useCallback(R=>r.subscribe(l.V.batchCalls(R)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),w=d.useCallback((R,G)=>{r.mutate(R,G).catch(A)},[r]);if(C.error&&(0,x.L)(r.options.throwOnError,[C.error]))throw C.error;return{...C,mutate:w,mutateAsync:C.mutate}}function A(){}},"../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/check.js":(i,o,t)=>{t.d(o,{Z:()=>l});var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=t("../../../node_modules/.pnpm/@wordpress+primitives@3.50.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const l=(0,d.createElement)(g.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(g.y$,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}))},"../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/chevron-down.js":(i,o,t)=>{t.d(o,{Z:()=>l});var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=t("../../../node_modules/.pnpm/@wordpress+primitives@3.50.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const l=(0,d.createElement)(g.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,d.createElement)(g.y$,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))},"../../packages/my-jetpack/_inc/components/connected-product-card/index.jsx":(i,o,t)=>{t.d(o,{Z:()=>F});var d=t("../components/components/text/index.tsx"),g=t("../connection/components/use-connection/index.jsx"),y=t("../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js"),l=t.n(y),D=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),k=t("../../packages/my-jetpack/_inc/data/products/use-activate.ts"),O=t("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),v=t("../../packages/my-jetpack/_inc/data/constants.ts"),x=t("../../packages/my-jetpack/_inc/data/use-simple-mutation.ts"),E=t("../../packages/my-jetpack/_inc/data/products/use-product.ts");const A=O.__,P=p=>{const{detail:S,refetch:_}=(0,E.Z)(p),{mutate:T,isPending:j}=(0,x.Z)("installPlugin",{path:`${v.Jk}/${p}/install-standalone`,method:"POST"},{onSuccess:_},null,(0,O.gB)(A("Failed to install standalone plugin for %1$s. Please try again","jetpack-my-jetpack"),S.name));return{install:T,isPending:j}};var c=t("../../packages/my-jetpack/_inc/hooks/use-my-jetpack-navigate/index.js"),b=t("../../packages/my-jetpack/_inc/components/product-card/index.jsx"),h=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const W=({admin:p,slug:S,children:_,isDataLoading:T,Description:j=null,additionalActions:rt=null,secondaryAction:J=null,upgradeInInterstitial:it=!1,primaryActionOverride:q})=>{const{isRegistered:K,isUserConnected:e}=(0,g.Z)(),{install:u,isPending:r}=P(S),{activate:C,isPending:w}=(0,k.Z)(S),{detail:R}=(0,E.Z)(S),{name:G,description:$,requiresUserConnection:Z,status:I}=R,U=(0,c.Z)("/connection"),X=(0,D.useCallback)(()=>{if((!K||!e)&&Z){U();return}C()},[C,K,e,Z,U]),Q=()=>{const H=$.replace(/\s(?=[^\s]*$)/,"\xA0");return(0,h.jsx)(d.ZP,{variant:"body-small",style:{flexGrow:1},children:H})};return(0,h.jsx)(b.ZP,{name:G,Description:j||Q,status:I,admin:p,isFetching:w||r,isDataLoading:T,isInstallingStandalone:r,additionalActions:rt,primaryActionOverride:q,secondaryAction:J,slug:S,onActivate:X,onInstallStandalone:u,onActivateStandalone:u,upgradeInInterstitial:it,children:_})};W.displayName="ConnectedProductCard",W.propTypes={children:l().node,admin:l().bool.isRequired,slug:l().string.isRequired,isDataLoading:l().bool,additionalActions:l().array,primaryActionOverride:l().object,secondaryAction:l().object};const F=W;W.__docgenInfo={description:"",methods:[],displayName:"ConnectedProductCard",props:{Description:{defaultValue:{value:"null",computed:!1},required:!1},additionalActions:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"array"},required:!1},secondaryAction:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"object"},required:!1},upgradeInInterstitial:{defaultValue:{value:"false",computed:!1},required:!1},children:{description:"",type:{name:"node"},required:!1},admin:{description:"",type:{name:"bool"},required:!0},slug:{description:"",type:{name:"string"},required:!0},isDataLoading:{description:"",type:{name:"bool"},required:!1},primaryActionOverride:{description:"",type:{name:"object"},required:!1}}}},"../../packages/my-jetpack/_inc/components/product-detail-card/stories/utils.js":(i,o,t)=>{t.d(o,{As:()=>m,TN:()=>A,h7:()=>P});const E={"anti-spam":{slug:"anti-spam",name:"Anti-Spam",title:"Jepack Anti-Spam",description:"Stop comment and form spam",is_upgradable_by_bundle:["security"],long_description:"Save time and get better responses by automatically blocking spam from your comments and forms.",status:"active",features:["Comment and form spam protection","Powered by Akismet","Block spam without CAPTCHAs","Advanced stats"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},backup:{slug:"backup",name:"Backup",title:"Jepack Backup",description:"Save every change",is_upgradable_by_bundle:["security"],long_description:"Never lose a word, image, page, or time worrying about your site with automated backups & one-click restores.",status:"active",features:["Real-time cloud backups","10GB of backup storage","30-day archive & activity log","One-click restores"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},boost:{slug:"boost",name:"Boost",title:"Jepack Boost",description:"Instant speed and SEO",long_description:"Jetpack Boost gives your site the same performance advantages as the world\u2019s leading websites, no developer required.",status:"inactive",features:["Check your site performance","Enable improvements in one click","Standalone free plugin for those focused on speed"],pricingForUi:{available:!0,is_free:!0}},crm:{slug:"crm",name:"CRM",title:"Jetpack CRM",description:"Connect with your people",long_description:"All of your contacts in one place. Build better relationships with your customers and clients.",status:"inactive",features:["Manage unlimited contacts","Manage billing and create invoices","Fully integrated with WordPress & WooCommerce","Infinitely customizable with integrations and extensions"],pricingForUi:{available:!0,is_free:!0}},extras:{slug:"extras",name:"Extras",title:"Jetpack Extras",description:"Basic tools for a successful site",long_description:"Secure and speed up your site for free with Jetpack's powerful WordPress tools.",status:"active",features:["Measure your impact with beautiful stats","Speed up your site with optimized images","Protect your site against bot attacks","Get notifications if your site goes offline","Enhance your site with dozens of other features"],pricingForUi:{available:!0,is_free:!0}},scan:{slug:"scan",name:"Scan",title:"Jepack Scan",description:"Stay one step ahead of threats",is_upgradable_by_bundle:["security"],long_description:"Automatic scanning and one-click fixes keep your site one step ahead of security threats and malware.",status:"inactive",features:["Automated daily scanning","One-click fixes for most issues","Instant email notifications","Access to latest Firewall rules"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},search:{slug:"search",name:"Search",title:"Jetpack Search",description:"Help them find what they need",long_description:"Help your site visitors find answers instantly so they keep reading and buying. Great for sites with a lot of content.",status:"inactive",features:["Instant search and indexing","Powerful filtering","Supports 38 languages","Spelling correction"],pricingForUi:{currency_code:"USD",full_price:59.95,discount_price:29.975,coupon_discount:50}},security:{slug:"security",name:"Security",title:"Security",description:"Comprehensive site security, including Backup, Scan, and Anti-spam.",long_description:"Comprehensive site security, including Backup, Scan, and Anti-spam.",status:"inactive",is_bundle:!0,supportedProducts:["backup","scan","anti-spam"],features:["Real-time cloud backups with 10GB storage","Automated real-time malware scan","One-click fixes for most threats","Comment & form spam protection"],pricingForUi:{currency_code:"USD",full_price:299,discount_price:149}},videopress:{slug:"videopress",name:"VideoPress",title:"Jetpack Site VideoPress",description:"High quality, ad-free video",long_description:"High-quality, ad-free video built specifically for WordPress.",status:"inactive",features:["1TB of storage","Built into WordPress editor","Ad-free and customizable player","Unlimited users"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}}};function A(c){const h=c.constructor===Array?c:[c],W=h.map(p=>({url:`my-jetpack/v1/site/products/${p}?_locale=user`,method:"GET",status:200,response:E[p]})),F=h.map(p=>({url:`my-jetpack/v1/site/products/${p}?_locale=user`,method:"POST",status:200,response:{...E[p],status:E[p].status==="active"?"inactive":"active"}}));return[...W,...F]}function m(){return A([...Object.keys(E)])}function P(){return["anti-spam","backup","boost","crm","extras","scan","search","videopress"]}},"../../packages/my-jetpack/_inc/hooks/use-my-jetpack-navigate/index.js":(i,o,t)=>{t.d(o,{Z:()=>y});var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=t("../../../node_modules/.pnpm/react-router@6.6.2_react@18.2.0/node_modules/react-router/dist/index.js");function y(l){const D=(0,g.s0)();return(0,d.useCallback)(()=>D(l),[D,l])}},"../../packages/my-jetpack/_inc/state/store.js":(i,o,t)=>{t.d(o,{t:()=>tt,N:()=>nt});var d=t("../../../node_modules/.pnpm/@wordpress+api-fetch@6.49.0/node_modules/@wordpress/api-fetch/build-module/index.js");const g="my-jetpack/v1",y="jetpack/v4/stats-app",l=`${g}/site/dismiss-welcome-banner`,D=s=>`${y}/sites/${s}/stats/highlights`,k="SET_STATS_COUNTS_IS_FETCHING",O="SET_STATS_COUNTS",v="SET_DISMISSED_WELCOME_BANNER_IS_FETCHING",x="SET_DISMISSED_WELCOME_BANNER",E="SET_GLOBAL_NOTICE",A="CLEAN_GLOBAL_NOTICE",m=s=>({type:k,isFetching:s}),P=s=>({type:O,statsCounts:s}),c=s=>({type:v,isFetching:s}),b=s=>({type:x,hasBeenDismissed:s}),S={setStatsCounts:P,setStatsCountsIsFetching:m,dismissWelcomeBanner:()=>async s=>{const{dispatch:n}=s;return n(c(!0)),(0,d.Z)({path:l,method:"POST"}).then(()=>{n(b(!0))}).finally(()=>{n(c(!1))})},...{setGlobalNotice:(s,n)=>({type:"SET_GLOBAL_NOTICE",message:s,options:n}),cleanGlobalNotice:()=>({type:"CLEAN_GLOBAL_NOTICE"})}};var _=t("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const T=(s={global:{}},n)=>{switch(n.type){case E:{const{message:L,options:z}=n;return{...s,global:{message:L,options:z}}}case A:return{...s,global:{}};default:return s}},j=(s={})=>s,rt=(s={},n)=>{switch(n.type){case k:return{...s,isFetching:n.isFetching};case O:return{...s,data:(n==null?void 0:n.statsCounts)||{}};default:return s}},J=(s={},n)=>{switch(n.type){case v:return{...s,isFetching:n.isFetching};case x:return{...s,hasBeenDismissed:n.hasBeenDismissed};default:return s}},it=(s={},n)=>{switch(n.type){default:return s}},K=(0,_.UY)({notices:T,plugins:j,statsCounts:rt,welcomeBanner:J,lifecycleStats:it});var e=t("../connection/state/store.jsx");const r={...{getStatsCounts:()=>async s=>{const{dispatch:n,registry:L}=s;n.setStatsCountsIsFetching(!0);const z=L.select(e.t).getBlogId();try{n.setStatsCounts(await(0,d.Z)({path:D(z)})),n.setStatsCountsIsFetching(!1)}catch(et){n.setStatsCountsIsFetching(!1)}}}},C=s=>{var n;return(n=s.statsCounts)==null?void 0:n.data},w=s=>s.lifecycleStats,X={...{getStatsCounts:C,isFetchingStatsCounts:s=>{var n;return((n=s.statsCounts)==null?void 0:n.isFetching)||!1}},...{getGlobalNotice:s=>{var n;return(n=s.notices)==null?void 0:n.global}},getWelcomeBannerHasBeenDismissed:s=>{var n;return(n=s.welcomeBanner)==null?void 0:n.hasBeenDismissed},getGuessedSiteLifecycleStatus:s=>{const{modules:n,purchases:L,plugins:z,isSiteConnected:et,isUserConnected:f}=w(s);return L.length===0&&n.length<3?(!f||!et)&&n.length===0&&z.length===1?"brand-new":"new":L.length===1&&n.length<10?"settling-in":"established"}};var Q=t("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const V=class{static mayBeInit(n,L){V.store===null&&(V.store=(0,Q.Z)(n,L),(0,_.z2)(V.store))}};let H=V;dt(H,"store",null);const st=H,tt="my-jetpack";function nt(){st.mayBeInit(tt,{__experimentalUseThunks:!0,reducer:K,actions:S,selectors:X,resolvers:r,initialState:window.myJetpackInitialState||{}})}},"../../packages/my-jetpack/_inc/data/products/use-activate.ts":(i,o,t)=>{t.d(o,{Z:()=>O});var d=t("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),g=t("../../packages/my-jetpack/_inc/data/constants.ts"),y=t("../../packages/my-jetpack/_inc/data/use-simple-mutation.ts"),l=t("../../packages/my-jetpack/_inc/data/products/use-product.ts");const D=d.__,O=v=>{const{detail:x,refetch:E}=(0,l.Z)(v),{mutate:A,isPending:m}=(0,y.Z)("activateProduct",{path:`${g.Jk}/${v}`,method:"POST"},{onSuccess:E},null,(0,d.gB)(D("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),x.name));return{activate:A,isPending:m}}},"../../packages/my-jetpack/_inc/data/use-simple-mutation.ts":(i,o,t)=>{t.d(o,{Z:()=>D});var d=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useMutation.js"),g=t("../../../node_modules/.pnpm/@wordpress+api-fetch@6.49.0/node_modules/@wordpress/api-fetch/build-module/index.js"),y=t("../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts");const D=(k,O,v,x,E)=>{const A=(0,d.D)({mutationKey:[k,x],mutationFn:()=>(0,g.Z)(O),...v}),{isError:m,isPending:P}=A;return(0,y.o)({infoName:k,isError:!P&&m,overrideMessage:E}),A}}}]);})();
