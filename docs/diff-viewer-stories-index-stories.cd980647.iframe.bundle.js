"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[5619],{"../../plugins/protect/src/js/components/diff-viewer/stories/index.stories.jsx":(V,D,a)=>{var L,N,P;a.r(D),a.d(D,{Default:()=>u,__namedExportsOrder:()=>v,default:()=>r});var x=a("../../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),y=a("../../../node_modules/.pnpm/diff@4.0.2/node_modules/diff/lib/patch/parse.js"),S=a("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=a.n(S),j=a("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/sass-loader/dist/cjs.js!../../plugins/protect/src/js/components/diff-viewer/styles.module.scss"),b={};b.insert="head",b.singleton=!1;var s=n()(j.Z,b);const d=j.Z.locals||{};var e=a("../../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const O=t=>{const c=t.lastIndexOf("/");return c>-1?[t.slice(0,c),t.slice(c)]:["",t]},l=({oldFileName:t,newFileName:c})=>{const C=t[0]==="a"&&t[1]==="/"&&c[0]==="b"&&c[1]==="/",[i,_]=C?[t.slice(2),c.slice(2)]:[t,c];if(i===_){const[m,w]=O(i);return(0,e.jsxs)(x.Fragment,{children:[m&&(0,e.jsx)("span",{className:d["diff-viewer__path-prefix"],children:m}),(0,e.jsx)("span",{className:d["diff-viewer__path"],children:w})]})}const g=Math.max(i.length,_.length);for(let m=0,w=0;m<g;m++)if(i[m]==="/"&&_[m]==="/"&&(w=m),i[m]!==_[m])return(0,e.jsxs)(x.Fragment,{children:[w!==0&&(0,e.jsx)("span",{className:d["diff-viewer__path-prefix"],children:i.slice(0,w)}),(0,e.jsx)("span",{className:d["diff-viewer__path"],children:i.slice(w)})," \u2192 ",w!==0&&(0,e.jsx)("span",{className:d["diff-viewer__path-prefix"],children:_.slice(0,w)}),(0,e.jsx)("span",{className:d["diff-viewer__path"],children:_.slice(w)})]});const[k,h]=O(i),[E,M]=O(_);return(0,e.jsxs)(x.Fragment,{children:[k&&(0,e.jsx)("span",{className:d["diff-viewer__path-prefix"],children:k}),(0,e.jsx)("span",{className:d["diff-viewer__path"],children:h})," \u2192 ",E&&(0,e.jsx)("span",{className:d["diff-viewer__path-prefix"],children:E}),(0,e.jsx)("span",{className:d["diff-viewer__path"],children:M})]})},f=({diff:t})=>(0,e.jsx)("div",{className:d["diff-viewer"],children:(0,y.G)(t).map((c,C)=>(0,e.jsxs)(x.Fragment,{children:[(0,e.jsx)("div",{className:d["diff-viewer__filename"],children:l(c)},`file-${C}`),(0,e.jsxs)("div",{className:d["diff-viewer__file"],children:[(0,e.jsx)("div",{className:d["diff-viewer__line-numbers"],children:c.hunks.map((i,_)=>{let g=0;return i.lines.map((k,h)=>(0,e.jsx)("div",{children:k[0]==="+"?"\xA0":i.oldStart+g++},`${_}-${h}`))})},"left-numbers"),(0,e.jsx)("div",{className:d["diff-viewer__line-numbers"],children:c.hunks.map((i,_)=>{let g=0;return i.lines.map((k,h)=>(0,e.jsx)("div",{children:k[0]==="-"?"\xA0":i.newStart+g++},`${_}-${h}`))})},"right-numbers"),(0,e.jsx)("div",{className:d["diff-viewer__lines"],children:c.hunks.map((i,_)=>i.lines.map((g,k)=>{const h=g.slice(1).replace(/^\s*$/,"\xA0"),E=`${_}-${k}`;switch(g[0]){case" ":return(0,e.jsx)("div",{children:h},E);case"-":return(0,e.jsx)("del",{children:h},E);case"+":return(0,e.jsx)("ins",{children:h},E);default:return}}))})]},`diff-${C}`)]},C))}),o=f;f.__docgenInfo={description:"",methods:[],displayName:"DiffViewer"};const r={title:"Plugins/Protect/Diff Viewer",component:o},p=`index 51455bdb14..bc0622d001 100644
--- a/circle.yml
+++ b/circle.yml
@@ -1,6 +1,6 @@
 machine:
   node:
-    version: 8.9.4
+    version: 8.11.0
 test:
   pre:
     - ? |`,u=t=>(0,e.jsx)(o,{...t});u.args={diff:p};const v=["Default"];u.parameters={...u.parameters,docs:{...(L=u.parameters)==null?void 0:L.docs,source:{originalSource:"args => <DiffViewer {...args} />",...(P=(N=u.parameters)==null?void 0:N.docs)==null?void 0:P.source}}}},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/sass-loader/dist/cjs.js!../../plugins/protect/src/js/components/diff-viewer/styles.module.scss":(V,D,a)=>{a.d(D,{Z:()=>b});var x=a("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/css-loader/dist/runtime/noSourceMaps.js"),y=a.n(x),S=a("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0_webpack-cli@4.9.1_/node_modules/css-loader/dist/runtime/api.js"),n=a.n(S),j=n()(y());j.push([V.id,'.miUwiwnDBxwWiTHyu4sC{font-size:var(--font-body);line-height:1.5}.pIatYsMPv_pZokb194YO{padding:calc(var(--spacing-base)/2) var(--spacing-base);background-color:var(--jp-gray-10);font-weight:600}.raJLdXVde4OovH9ySSUx{background-color:var(--jp-gray-0);display:flex;font-family:"Courier 10 Pitch",Courier,monospace;flex-direction:row;overflow-x:scroll;white-space:pre}.cXOKHjaSEnfS4KjeDbEY{padding:0 var(--spacing-base);display:flex;flex-direction:column;text-align:right;background-color:var(--jp-gray-10);color:var(--jp-gray-50)}.DVQVCdbxyD05XaoD4Nnw{display:flex;flex-direction:column;flex-grow:1;overflow-x:visible}.DVQVCdbxyD05XaoD4Nnw div,.DVQVCdbxyD05XaoD4Nnw del,.DVQVCdbxyD05XaoD4Nnw ins{padding:0 var(--spacing-base);text-decoration:none}.DVQVCdbxyD05XaoD4Nnw del{background-color:var(--jp-red-0);color:var(--jp-red-60)}.DVQVCdbxyD05XaoD4Nnw ins{background-color:var(--jp-green-5);color:var(--jp-green-60)}',""]),j.locals={"diff-viewer":"miUwiwnDBxwWiTHyu4sC","diff-viewer__filename":"pIatYsMPv_pZokb194YO","diff-viewer__file":"raJLdXVde4OovH9ySSUx","diff-viewer__line-numbers":"cXOKHjaSEnfS4KjeDbEY","diff-viewer__lines":"DVQVCdbxyD05XaoD4Nnw"};const b=j},"../../../node_modules/.pnpm/diff@4.0.2/node_modules/diff/lib/patch/parse.js":(V,D)=>{var a;a={value:!0},D.G=x;function x(y){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=y.split(/\r\n|[\n\v\f\r\x85]/),j=y.match(/\r\n|[\n\v\f\r\x85]/g)||[],b=[],s=0;function d(){var l={};for(b.push(l);s<n.length;){var f=n[s];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var o=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);o&&(l.index=o[1]),s++}for(e(l),e(l),l.hunks=[];s<n.length;){var r=n[s];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(r))break;if(/^@@/.test(r))l.hunks.push(O());else{if(r&&S.strict)throw new Error("Unknown line "+(s+1)+" "+JSON.stringify(r));s++}}}function e(l){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[s]);if(f){var o=f[1]==="---"?"old":"new",r=f[2].split("	",2),p=r[0].replace(/\\\\/g,"\\");/^".*"$/.test(p)&&(p=p.substr(1,p.length-2)),l[o+"FileName"]=p,l[o+"Header"]=(r[1]||"").trim(),s++}}function O(){for(var l=s,f=n[s++],o=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),r={oldStart:+o[1],oldLines:+o[2]||1,newStart:+o[3],newLines:+o[4]||1,lines:[],linedelimiters:[]},p=0,u=0;s<n.length&&!(n[s].indexOf("--- ")===0&&s+2<n.length&&n[s+1].indexOf("+++ ")===0&&n[s+2].indexOf("@@")===0);s++){var v=n[s].length==0&&s!=n.length-1?" ":n[s][0];if(v==="+"||v==="-"||v===" "||v==="\\")r.lines.push(n[s]),r.linedelimiters.push(j[s]||`
`),v==="+"?p++:v==="-"?u++:v===" "&&(p++,u++);else break}if(!p&&r.newLines===1&&(r.newLines=0),!u&&r.oldLines===1&&(r.oldLines=0),S.strict){if(p!==r.newLines)throw new Error("Added line count did not match for hunk at line "+(l+1));if(u!==r.oldLines)throw new Error("Removed line count did not match for hunk at line "+(l+1))}return r}for(;s<n.length;)d();return b}}}]);})();
