"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[4370],{"../connection/components/use-connection/index.jsx":(de,Z,a)=>{a.d(Z,{Z:()=>N});var E=a("../api/index.jsx"),_=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),I=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),m=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),c=a("../connection/state/store.jsx");const l=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},N=function(){let{registrationNonce:k=l.registrationNonce,apiRoot:B=l.apiRoot,apiNonce:A=l.apiNonce,redirectUri:h,autoTrigger:P,from:H,skipUserConnection:U}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:M,connectUser:x,refreshConnectedPlugins:F}=(0,_.Z)(c.t),v=(0,I.Z)(S=>S(c.t).getRegistrationError()),{siteIsRegistering:L,userIsConnecting:R,userConnectionData:O,connectedPlugins:p,connectionErrors:$,isRegistered:G,isUserConnected:K,hasConnectedOwner:J,isOfflineMode:Y}=(0,I.Z)(S=>({siteIsRegistering:S(c.t).getSiteIsRegistering(),userIsConnecting:S(c.t).getUserIsConnecting(),userConnectionData:S(c.t).getUserConnectionData(),connectedPlugins:S(c.t).getConnectedPlugins(),connectionErrors:S(c.t).getConnectionErrors(),isOfflineMode:S(c.t).getIsOfflineMode(),...S(c.t).getConnectionStatus()})),j=()=>{if(U){if(h)return window.location=h,Promise.resolve(h)}else return x({from:H,redirectUri:h});return Promise.resolve()},Q=S=>(S&&S.preventDefault(),G?j():M({registrationNonce:k,redirectUri:h}).then(()=>j()));return(0,m.useEffect)(()=>{E.ZP.setApiRoot(B),E.ZP.setApiNonce(A)},[B,A]),(0,m.useEffect)(()=>{P&&!L&&!R&&Q()},[]),{handleRegisterSite:Q,handleConnectUser:j,refreshConnectedPlugins:F,isRegistered:G,isUserConnected:K,siteIsRegistering:L,userIsConnecting:R,registrationError:v,userConnectionData:O,hasConnectedOwner:J,connectedPlugins:p,connectionErrors:$,isOfflineMode:Y}}},"../connection/state/store.jsx":(de,Z,a)=>{a.d(Z,{t:()=>D});var E=a("../api/index.jsx");const _="SET_CONNECTION_STATUS",I="SET_CONNECTION_STATUS_IS_FETCHING",m="FETCH_CONNECTION_STATUS",c="SET_SITE_IS_REGISTERING",l="SET_USER_IS_CONNECTING",N="SET_REGISTRATION_ERROR",k="CLEAR_REGISTRATION_ERROR",B="REGISTER_SITE",A="SET_AUTHORIZATION_URL",h="CONNECT_USER",P="DISCONNECT_USER_SUCCESS",H="FETCH_AUTHORIZATION_URL",U="SET_CONNECTED_PLUGINS",M="REFRESH_CONNECTED_PLUGINS",x="SET_CONNECTION_ERRORS",F="SET_IS_OFFLINE_MODE",v=s=>({type:_,connectionStatus:s}),L=s=>({type:I,isFetching:s}),R=()=>({type:m}),O=s=>({type:c,isRegistering:s}),p=s=>({type:l,isConnecting:s}),$=()=>({type:P}),G=s=>({type:N,registrationError:s}),K=()=>({type:k}),J=s=>({type:A,authorizationUrl:s}),Y=s=>({type:H,redirectUri:s}),j=s=>({type:U,connectedPlugins:s}),Q=s=>({type:x,connectionErrors:s}),S=s=>({type:F,isOfflineMode:s});function ge(){let{from:s,redirectFunc:o,redirectUri:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield p(!0),yield{type:h,from:s,redirectFunc:o,redirectUri:u}}()}function Ee(s){let{registrationNonce:o,redirectUri:u}=s;return function*(){yield K(),yield O(!0);try{const T=yield{type:B,registrationNonce:o,redirectUri:u};return yield v({isRegistered:!0}),yield J(T.authorizeUrl),yield O(!1),Promise.resolve(T)}catch(T){return yield G(T),yield O(!1),Promise.reject(T)}}()}const ne={setConnectionStatus:v,setConnectionStatusIsFetching:L,fetchConnectionStatus:R,fetchAuthorizationUrl:Y,setSiteIsRegistering:O,setUserIsConnecting:p,setRegistrationError:G,clearRegistrationError:K,setAuthorizationUrl:J,registerSite:Ee,connectUser:ge,disconnectUserSuccess:$,setConnectedPlugins:j,refreshConnectedPlugins:()=>async s=>{let{dispatch:o}=s;return await new Promise(u=>E.ZP.fetchConnectedPlugins().then(T=>{o(j(T)),u(T)}))},setConnectionErrors:Q,setIsOfflineMode:S};var _e=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const D="jetpack-connection",V=s=>{let{registrationNonce:o,redirectUri:u}=s;return E.ZP.registerSite(o,u)},me=(0,_e.R)(s=>{let{resolveSelect:o}=s;return function(){let{from:u,redirectFunc:T,redirectUri:z}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((re,Ie)=>{o(D).getAuthorizationUrl(z).then(oe=>{const b=T||(xe=>window.location.assign(xe)),W=new URL(oe);u&&W.searchParams.set("from",encodeURIComponent(u));const ie=W.toString();b(ie),re(ie)}).catch(oe=>{Ie(oe)})})}}),Se={FETCH_AUTHORIZATION_URL:s=>{let{redirectUri:o}=s;return E.ZP.fetchAuthorizationUrl(o)},REGISTER_SITE:V,CONNECT_USER:me};var f=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ae=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case _:return{...s,...o.connectionStatus};case P:return{...s,isUserConnected:!1}}return s},Re=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case U:return o.connectedPlugins}return s},Oe=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case I:return o.isFetching}return s},ye=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case c:return o.isRegistering}return s},Ne=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case l:return o.isConnecting}return s},Ue=(s,o)=>{switch(o.type){case k:return!1;case N:return o.registrationError;default:return s}},Fe=(s,o)=>{switch(o.type){case A:return o.authorizationUrl;default:return s}},ve=(s,o)=>{switch(o.type){default:return s}},pe=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case x:return o.connectionErrors}return s},Te=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case F:return o.isConnecting}return s},ce=(0,f.UY)({connectionStatus:ae,connectionStatusIsFetching:Oe,siteIsRegistering:ye,userIsConnecting:Ne,registrationError:Ue,authorizationUrl:Fe,userConnectionData:ve,connectedPlugins:Re,connectionErrors:pe,isOfflineMode:Te}),he={...{getAuthorizationUrl:{isFulfilled:function(s){const o=!!s.authorizationUrl;for(var u=arguments.length,T=new Array(u>1?u-1:0),z=1;z<u;z++)T[z-1]=arguments[z];const re=(0,f.Ys)(D).hasFinishedResolution("getAuthorizationUrl",T);return o&&!re&&(0,f.WI)(D).finishResolution("getAuthorizationUrl",T),o},*fulfill(s){const o=yield ne.fetchAuthorizationUrl(s);yield ne.setAuthorizationUrl(o.authorizeUrl)}}}},fe={...{getConnectionStatus:s=>s.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:s=>s.siteIsRegistering||!1,getUserIsConnecting:s=>s.userIsConnecting||!1,getRegistrationError:s=>s.registrationError||!1,getAuthorizationUrl:s=>s.authorizationUrl||!1,getUserConnectionData:s=>s.userConnectionData||!1,getConnectedPlugins:s=>s.connectedPlugins||[],getConnectionErrors:s=>s.connectionErrors||[],getIsOfflineMode:s=>s.isOfflineMode||!1,getWpcomUser:s=>{var o,u;return(u=(o=s==null?void 0:s.userConnectionData)==null?void 0:o.currentUser)==null?void 0:u.wpcomUser},getBlogId:s=>{var o,u;return(u=(o=s==null?void 0:s.userConnectionData)==null?void 0:o.currentUser)==null?void 0:u.blogId}}};var Be=a("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),Ce=a.n(Be),se=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class y{static mayBeInit(o,u){y.store===null&&(y.store=(0,se.Z)(o,u),(0,f.z2)(y.store))}}Ce()(y,"store",null);const He=y,ue=window.JP_CONNECTION_INITIAL_STATE;ue||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),He.mayBeInit(D,{__experimentalUseThunks:!0,reducer:ce,actions:ne,selectors:fe,resolvers:he,controls:Se,initialState:ue||{}})},"../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx":(de,Z,a)=>{a.d(Z,{N:()=>l,Z:()=>k});var E=a("../components/components/button/index.tsx"),_=a("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js"),I=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),m=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const c=_.__,l={ACTIVE:"active",INACTIVE:"inactive",ERROR:"error",ABSENT:"plugin_absent",ABSENT_WITH_PLAN:"plugin_absent_with_plan",NEEDS_PURCHASE:"needs_purchase",NEEDS_PURCHASE_OR_FREE:"needs_purchase_or_free"},N=B=>{let{status:A,admin:h,name:P,onActivate:H,onManage:U,onFixConnection:M,isFetching:x,isInstallingStandalone:F,isDeactivatingStandalone:v,className:L,onAdd:R}=B;if(!h)return(0,m.jsx)(E.Z,{...p,size:"small",variant:"link",weight:"regular",children:(0,_.gB)(c("Learn about %s","jetpack-my-jetpack"),P)});const O=x||F||v,p={variant:O?void 0:"primary",disabled:O,className:L};switch(A){case l.ABSENT:case l.ABSENT_WITH_PLAN:return(0,m.jsxs)(E.Z,{...p,size:"small",variant:"link",weight:"regular",children:[A===l.ABSENT&&(0,_.gB)(c("Get %s","jetpack-my-jetpack"),P),A===l.ABSENT_WITH_PLAN&&(0,_.gB)(c("Install %s","jetpack-my-jetpack"),P)]});case l.NEEDS_PURCHASE:return(0,m.jsx)(E.Z,{...p,size:"small",weight:"regular",onClick:R,children:c("Purchase","jetpack-my-jetpack")});case l.NEEDS_PURCHASE_OR_FREE:return(0,m.jsx)(E.Z,{...p,size:"small",weight:"regular",onClick:R,children:c("Start for free","jetpack-my-jetpack")});case l.ACTIVE:return(0,m.jsx)(E.Z,{...p,size:"small",weight:"regular",variant:"secondary",onClick:U,children:c("Manage","jetpack-my-jetpack")});case l.ERROR:return(0,m.jsx)(E.Z,{...p,size:"small",weight:"regular",onClick:M,children:c("Fix connection","jetpack-my-jetpack")});case l.INACTIVE:return(0,m.jsx)(E.Z,{...p,size:"small",weight:"regular",variant:"secondary",onClick:H,children:c("Activate","jetpack-my-jetpack")});default:return null}};N.__docgenInfo={description:"",methods:[],displayName:"ActionButton"};const k=N},"../../packages/my-jetpack/_inc/state/store.js":(de,Z,a)=>{a.d(Z,{t:()=>Ge,N:()=>$e});var E=a("../connection/state/store.jsx"),_=a("../../../node_modules/.pnpm/@wordpress+api-fetch@6.29.0/node_modules/@wordpress/api-fetch/build-module/index.js"),I=a("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js");const m="my-jetpack/v1",c=`${m}/site/purchases`,l=`${m}/site/products`,N=`${m}/chat/availability`,k=["scan"],B="videopress",A="videopress/v1/stats/featured",h=I.__,P="SET_PURCHASES_IS_FETCHING",H="FETCH_PURCHASES",U="SET_PURCHASES",M="SET_AVAILABLE_LICENSES_IS_FETCHING",x="FETCH_AVAILABLE_LICENSES",F="SET_AVAILABLE_LICENSES",v="SET_IS_FETCHING_PRODUCT",L="SET_PRODUCT",R="SET_PRODUCT_REQUEST_ERROR",O="ACTIVATE_PRODUCT",p="SET_PRODUCT_STATUS",$="SET_CHAT_AVAILABILITY_IS_FETCHING",G="SET_CHAT_AVAILABILITY",K="SET_GLOBAL_NOTICE",J="CLEAN_GLOBAL_NOTICE",Y="SET_PRODUCT_STATS",j="SET_IS_FETCHING_PRODUCT_STATS",Q=e=>({type:P,isFetching:e}),S=e=>({type:$,isFetching:e}),ge=()=>({type:H}),Ee=e=>({type:U,purchases:e}),Ae=e=>({type:G,chatAvailability:e}),ne=e=>({type:M,isFetching:e}),_e=()=>({type:x}),Pe=e=>({type:F,availableLicenses:e}),D=e=>({type:L,product:e}),V=(e,t)=>({type:R,productId:e,error:t}),me=(e,t)=>({type:p,productId:e,status:t}),X=(e,t)=>({type:"SET_GLOBAL_NOTICE",message:e,options:t}),Se=()=>({type:"CLEAN_GLOBAL_NOTICE"});function f(e,t){return{type:v,productId:e,isFetching:t}}function ae(e,t,r){let{select:n,dispatch:i,registry:d}=r;return new Promise((w,ee)=>{if(!n.isValidProduct(e)){const C=h("Invalid product name","jetpack-my-jetpack"),le=new Error(C);i(V(e,le)),i(X(C,{status:"error",isDismissible:!0})),ee(le);return}const te=t.activate?"POST":"DELETE";return i(f(e,!0)),(0,_.Z)({path:`${l}/${e}`,method:te}).then(C=>{i(f(e,!1)),i(D(C)),d.dispatch(E.t).refreshConnectedPlugins(),w(C==null?void 0:C.status)}).catch(C=>{const{name:le}=n.getProduct(e),Ke=(0,I.gB)(h("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),le);i(f(e,!1)),i(V(e,C)),i(X(Ke,{status:"error",isDismissible:!0})),ee(C)})})}const pe={setPurchasesIsFetching:Q,setChatAvailabilityIsFetching:S,fetchPurchases:ge,setPurchases:Ee,setChatAvailability:Ae,setAvailableLicensesIsFetching:ne,fetchAvailableLicenses:_e,setAvailableLicenses:Pe,setProductStats:(e,t)=>({type:Y,productId:e,stats:t}),setIsFetchingProductStats:(e,t)=>({type:j,productId:e,isFetching:t}),...{setGlobalNotice:X,cleanGlobalNotice:Se},...{setProduct:D,activateProduct:e=>async t=>await ae(e,{activate:!0},t),deactivateStandalonePluginForProduct:e=>async t=>await ae(e,{activate:!1},t),installStandalonePluginForProduct:e=>async t=>{const{select:r,dispatch:n,registry:i}=t;return await new Promise((d,w)=>{if(!r.isValidProduct(e)){const g=h("Invalid product name","jetpack-my-jetpack"),te=new Error(g);n(V(e,te)),n(X(g,{status:"error",isDismissible:!0})),w(te);return}return n(f(e,!0)),(0,_.Z)({path:`${l}/${e}/install-standalone`,method:"POST"}).then(g=>{n(f(e,!1)),n(D(g)),i.dispatch(E.t).refreshConnectedPlugins(),d(g==null?void 0:g.standalone_plugin_info)}).catch(g=>{const{name:te}=r.getProduct(e),C=(0,I.gB)(h("Failed to install standalone plugin for %1$s: %2$s. Please try again","jetpack-my-jetpack"),te,g.message);n(f(e,!1)),n(V(e,g)),n(X(C,{status:"error",isDismissible:!0})),w(g)})})},setIsFetchingProduct:f,setRequestProductError:V,setProductStatus:me}};function Te(){return new Promise((e,t)=>{(0,_.Z)({path:c}).then(e).catch(t)})}const Le={[H]:Te};var ce=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const je=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:{const{productId:r,isFetching:n}=t;return{...e,isFetching:{...e.isFetching,[r]:n},errors:{...e.errors,[r]:n?void 0:e.errors[r]}}}case p:{const{productId:r,status:n}=t;return{...e,items:{...e.items,[r]:{...e.items[r],status:n}}}}case L:{const{product:r}=t,{slug:n}=r;return{...e,items:{...e.items,[n]:r}}}case R:{const{productId:r,error:n}=t;return{...e,errors:{...e.errors,[r]:n}}}default:return e}},he=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{...e,isFetching:t.isFetching};case U:return{...e,items:(t==null?void 0:t.purchases)||[]};default:return e}},De=function(){var r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{isFetching:!1,isAvailable:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{...e,isFetching:t.isFetching};case G:return{...e,isAvailable:(r=t==null?void 0:t.chatAvailability)==null?void 0:r.is_available};default:return e}},be=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{...e,isFetching:t.isFetching};case F:return{...e,items:(t==null?void 0:t.availableLicenses)||[]};default:return e}},we=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{global:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:{const{message:r,options:n}=t;return{...e,global:{message:r,options:n}}}case J:return{...e,global:{}};default:return e}},ke=function(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}},fe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:{const{productId:r,isFetching:n}=t;return{...e,isFetching:{...e.isFetching,[r]:n}}}case Y:{const{productId:r,stats:n}=t;return{...e,items:{...e.items,[r]:n}}}default:return e}},Ce=(0,ce.UY)({products:je,purchases:he,chatAvailability:De,availableLicenses:be,notices:we,plugins:ke,stats:fe});var se=a("../api/index.jsx"),y=a("../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx");const ue=async()=>(0,_.Z)({path:A}),o=async e=>e===B?ue():null,u=I.__,re={...{getProduct:{isFulfilled:(e,t)=>{var n;return(((n=e==null?void 0:e.products)==null?void 0:n.items)||{}).hasOwnProperty(t)&&!k.includes(t)},fulfill:e=>async t=>{let{dispatch:r}=t;try{r.setIsFetchingProduct(e,!0);const n=await(0,_.Z)({path:`${l}/${e}`});return r.setProduct(n),r.setIsFetchingProduct(e,!1),Promise.resolve()}catch(n){if(r.setIsFetchingProduct(e,!1),n!=null&&n.code&&(n!=null&&n.message))return r.setRequestProductError(e,n),Promise.reject(n);throw new Error(n)}}},getPurchases:()=>async e=>{let{dispatch:t}=e;t.setPurchasesIsFetching(!0);try{t.setPurchases(await(0,_.Z)({path:c})),t.setPurchasesIsFetching(!1)}catch(r){t.setPurchasesIsFetching(!1),r.code!=="not_connected"&&t.setGlobalNotice(u("There was an error fetching your purchases information. Check your site connectivity and try again.","jetpack-my-jetpack"),{status:"error"})}},getChatAvailability:()=>async e=>{let{dispatch:t}=e;t.setChatAvailabilityIsFetching(!0);try{t.setChatAvailability(await(0,_.Z)({path:N})),t.setChatAvailabilityIsFetching(!1)}catch(r){t.setChatAvailabilityIsFetching(!1)}},getAvailableLicenses:()=>async e=>{let{dispatch:t}=e;t.setAvailableLicensesIsFetching(!0);try{const{apiRoot:r,apiNonce:n}=(window==null?void 0:window.myJetpackRest)||{};se.ZP.setApiRoot(r),se.ZP.setApiNonce(n);const i=await se.ZP.getUserLicenses();i&&i.items?t.setAvailableLicenses(i.items.filter(d=>{let{attached_at:w}=d;return w===null})):t.setAvailableLicenses([])}catch(r){t.setAvailableLicenses([])}finally{t.setAvailableLicensesIsFetching(!1)}}},getProductStats:{isFulfilled:(e,t)=>{var r,n;return((n=(r=e.stats)==null?void 0:r.items)==null?void 0:n.hasOwnProperty(t))||!1},fulfill:e=>async t=>{let{dispatch:r,select:n}=t;const{status:i}=n.getProduct(e);if(i!==y.N.ACTIVE)return r.setProductStats(e,null),Promise.resolve();try{r.setIsFetchingProductStats(e,!0);const d=await o(e);return r.setProductStats(e,d),r.setIsFetchingProductStats(e,!1),Promise.resolve()}catch(d){if(r.setProductStats(e,null),r.setIsFetchingProductStats(e,!1),d!=null&&d.code&&(d!=null&&d.message))return Promise.reject(d);throw new Error(d)}}}};function Ie(e){return e.replace(/([-_][a-z])/gi,t=>t.toUpperCase().replace("_",""))}function oe(e){return e.indexOf("_")!==-1}function b(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=Object.assign({},e);for(const n in r)r.hasOwnProperty(n)&&oe(n)&&(r[Ie(n)]=r[n],t&&delete r[n]);return r}const W=e=>{var t;return((t=e.products)==null?void 0:t.items)||{}},ie=e=>Object.keys(W(e)),Ze={...{getProducts:W,getProductNames:ie,getProduct:(e,t)=>{var i,d;const r=((i=W(e))==null?void 0:i[t])||{},n=b(r,!0);return n.standalonePluginInfo=b(n.standalonePluginInfo||{},!0),n.pricingForUi=b(n.pricingForUi||{},!0),n.pricingForUi.introductoryOffer=n.pricingForUi.isIntroductoryOffer?b(n.pricingForUi.introductoryOffer,!0):null,(d=n.pricingForUi)!=null&&d.tiers&&(n.pricingForUi.tiers=b(n.pricingForUi.tiers,!0),n.pricingForUi.tiers=Object.keys(n.pricingForUi.tiers).reduce((w,ee)=>{const g=b(n.pricingForUi.tiers[ee],!0)||{};return w[ee]={...g,introductoryOffer:g!=null&&g.isIntroductoryOffer?b(g==null?void 0:g.introductoryOffer,!0):null},w},{})),n.features=n.features||[],n.supportedProducts=n.supportedProducts||[],n.pricingForUi.fullPricePerMonth=n.pricingForUi.productTerm==="year"?Math.ceil(n.pricingForUi.fullPrice/12*100)/100:n.pricingForUi.fullPrice,n.pricingForUi.discountPricePerMonth=n.pricingForUi.productTerm==="year"?Math.ceil(n.pricingForUi.discountPrice/12*100)/100:n.pricingForUi.discountPrice,n},isValidProduct:(e,t)=>ie(e).includes(t),isFetching:(e,t)=>{var r,n;return((n=(r=e.products)==null?void 0:r.isFetching)==null?void 0:n[t])||!1},getProductsThatRequiresUserConnection:e=>{const t=W(e);return Object.keys(t).reduce((r,n)=>{const i=t[n];return(i==null?void 0:i.requires_user_connection)&&((i==null?void 0:i.status)===y.N.ACTIVE||(i==null?void 0:i.status)===y.N.ERROR)&&r.push(i==null?void 0:i.name),r},[])}},...{getPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.items)||[]},isRequestingPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.isFetching)||!1}},...{getChatAvailability:e=>e.chatAvailability.isAvailable,isRequestingChatAvailability:e=>e.chatAvailability.isFetching},...{getAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.items)||[]},isFetchingAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.isFetching)||!1}},...{getGlobalNotice:e=>{var t;return(t=e.notices)==null?void 0:t.global}},...{hasStandalonePluginInstalled:e=>Object.values(e.plugins).filter(t=>["jetpack-backup","jetpack-boost","jetpack-protect","jetpack-search","jetpack-social","jetpack-videopress"].indexOf(t.TextDomain)>=0).length>0},...{getProductStats:(e,t)=>{var r,n;return(n=(r=e.stats)==null?void 0:r.items)==null?void 0:n[t]},isFetchingProductStats:(e,t)=>{var r,n;return((n=(r=e.stats)==null?void 0:r.isFetching)==null?void 0:n[t])||!1}}};var Me=a("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),Ve=a.n(Me),ze=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class q{static mayBeInit(t,r){q.store===null&&(q.store=(0,ze.Z)(t,r),(0,ce.z2)(q.store))}}Ve()(q,"store",null);const We=q,Ge="my-jetpack";function $e(){We.mayBeInit(Ge,{__experimentalUseThunks:!0,reducer:Ce,actions:pe,selectors:Ze,resolvers:re,controls:Le,initialState:window.myJetpackInitialState||{}})}}}]);})();
