"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[6836],{"../../plugins/protect/src/js/components/interstitial-page/stories/mock.js":(D,h,a)=>{a.d(h,{r:()=>t});const t={apiRoot:"http://localhost/wp-json/",apiNonce:"f2d2d42e2a",registrationNonce:"c923ca109f",status:{last_checked:"2022-05-05 20:56:27",num_threats:6,num_plugins_threats:3,num_themes_threats:3,status:"scheduled",wordpress:{version:"5.9.3",threats:[]},themes:[{slug:"twentynineteen",version:"2.2",threats:[{id:"1fd6742e-1a32-446d-be3d-7cce44f8f416",title:"Sample Threat number 1 with a long title",fixed_in:"3.14.2"}]},{slug:"twentytwenty",version:"1.9",threats:[{id:"1ac912c1-5e29-41ac-8f76-a062de254c09",title:"Sample Threat number 1 with a long title",fixed_in:"3.14.2"},{id:"6e61b246-5af1-4a4f-9ca8-a8c87eb2e499",title:"Sample Threat number 2 with a long title",fixed_in:"3.14.2"}]},{slug:"twentytwentyone",version:"1.5",threats:[]},{slug:"twentytwentytwo",version:"1.1",threats:[]}],plugins:[{slug:"akismet/akismet.php",version:"4.2.3",threats:[{id:"36e3817f-7fcc-4a97-9ea2-e5e3b01f93a1",title:"Sample Threat number 1 with a long title",fixed_in:"3.14.2"}]},{slug:"always-use-jetpack-open-graph/always-use-jetpack-open-graph.php",version:"1.0.2-alpha",threats:[{id:"d442acac-4394-45e4-b6bb-adf4a40960fb",title:"Sample Threat number 1 with a long title",fixed_in:"3.14.2"},{id:"0c980e1c-d4dc-4b96-b0ce-282289674f55",title:"Sample Threat number 2 with a long title",fixed_in:"3.14.2"}]},{slug:"core-control/core-control.php",version:"1.2.1",threats:[]},{slug:"creative-mail-by-constant-contact/creative-mail-plugin.php",version:"1.4.9",threats:[]},{slug:"gutenberg/gutenberg.php",version:"12.7.1",threats:[]},{slug:"jetpack/jetpack.php",version:"11.0-a.2",threats:[]},{slug:"backup/jetpack-backup.php",version:"1.3.0-alpha",threats:[]},{slug:"beta/jetpack-beta.php",version:"3.1.2-alpha",threats:[]},{slug:"boost/jetpack-boost.php",version:"1.4.3-alpha",threats:[]},{slug:"jetpack-boost/jetpack-boost.php",version:"1.4.0",threats:[]},{slug:"zero-bs-crm/ZeroBSCRM.php",version:"4.9.0",threats:[]},{slug:"debug-helper/plugin.php",version:"1.4.0-alpha",threats:[]},{slug:"protect/jetpack-protect.php",version:"0.1.0-alpha",threats:[]},{slug:"search/jetpack-search.php",version:"0.1.0-alpha",threats:[]},{slug:"social/jetpack-social.php",version:"0.1.0-alpha",threats:[]},{slug:"starter-plugin/jetpack-starter-plugin.php",version:"0.1.0-alpha",threats:[]},{slug:"qr-block/qr-block.php",version:"0.0.10",threats:[]},{slug:"query-monitor/query-monitor.php",version:"3.8.2",threats:[]},{slug:"vaultpress/vaultpress.php",version:"2.2.2-alpha",threats:[]},{slug:"wp-crontrol/wp-crontrol.php",version:"1.12.0",threats:[]}]},installedPlugins:{"akismet/akismet.php":{Name:"Akismet Anti-Spam",PluginURI:"https://akismet.com/",Version:"4.2.3",Description:"Used by millions, Akismet is quite possibly the best way in the world to <strong>protect your blog from spam</strong>. Your site is fully configured and being protected, even while you sleep.",Author:"Automattic",AuthorURI:"https://automattic.com/wordpress-plugins/",TextDomain:"akismet",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Akismet Anti-Spam",AuthorName:"Automattic",active:!0},"always-use-jetpack-open-graph/always-use-jetpack-open-graph.php":{Name:"Always Use Open Graph with Jetpack",PluginURI:"https://kraft.blog/",Version:"1.0.2-alpha",Description:"Jetpack automatically disables its Open Graph tags when there's a known plugin that already adds Open Graph tags, which is good. Sometimes, though, you might want to use Jetpack's version instead. Even if you disable the tags in the conflicting plugin, Jetpack won't add Open Graph tags without being told to do so.",Author:"Brandon Kraft",AuthorURI:"",TextDomain:"always-use-jetpack-open-graph",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Always Use Open Graph with Jetpack",AuthorName:"Brandon Kraft",active:!1},"core-control/core-control.php":{Name:"Core Control",PluginURI:"https://dd32.id.au/wordpress-plugins/core-control/",Version:"1.2.1",Description:"Core Control is a set of plugin modules which can be used to control certain aspects of the WordPress control.",Author:"Dion Hulse",AuthorURI:"https://dd32.id.au/",TextDomain:"core-control",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Core Control",AuthorName:"Dion Hulse",active:!1},"creative-mail-by-constant-contact/creative-mail-plugin.php":{Name:"Creative Mail by Constant Contact",PluginURI:"https://wordpress.org/plugins/creative-mail-by-constant-contact/",Version:"1.4.9",Description:"Free email marketing designed specifically for WordPress, Jetpack and WooCommerce. Send newsletters, promotions, updates and transactional e-commerce emails. Simple and easy, powered by Constant Contact\u2019s rock solid reliability.",Author:"Constant Contact",AuthorURI:"https://www.constantcontact.com",TextDomain:"creative-mail-by-constant-contact",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Creative Mail by Constant Contact",AuthorName:"Constant Contact",active:!1},"gutenberg/gutenberg.php":{Name:"Gutenberg",PluginURI:"https://github.com/WordPress/gutenberg",Version:"12.7.1",Description:"Printing since 1440. This is the development plugin for the new block editor in core.",Author:"Gutenberg Team",AuthorURI:"",TextDomain:"gutenberg",DomainPath:"",Network:!1,RequiresWP:"5.8",RequiresPHP:"5.6",UpdateURI:"",Title:"Gutenberg",AuthorName:"Gutenberg Team",active:!1},"jetpack/jetpack.php":{Name:"Jetpack",PluginURI:"https://jetpack.com",Version:"11.0-a.2",Description:"Security, performance, and marketing tools made by WordPress experts. Jetpack keeps your site protected so you can focus on more important things.",Author:"Automattic",AuthorURI:"https://jetpack.com",TextDomain:"jetpack",DomainPath:"",Network:!1,RequiresWP:"5.9",RequiresPHP:"5.6",UpdateURI:"",Title:"Jetpack",AuthorName:"Automattic",active:!1},"backup/jetpack-backup.php":{Name:"Jetpack Backup",PluginURI:"https://jetpack.com/jetpack-backup",Version:"1.3.0-alpha",Description:"Easily restore or download a backup of your site from a specific moment in time.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-backup",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Backup",AuthorName:"Automattic",active:!0},"beta/jetpack-beta.php":{Name:"Jetpack Beta Tester",PluginURI:"https://jetpack.com/beta/",Version:"3.1.2-alpha",Description:"Use the Beta plugin to get a sneak peek at new features and test them on your site.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-beta",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"https://jetpack.com/download-jetpack-beta/",Title:"Jetpack Beta Tester",AuthorName:"Automattic",active:!1},"boost/jetpack-boost.php":{Name:"Jetpack Boost",PluginURI:"https://jetpack.com/boost",Version:"1.4.3-alpha",Description:"Boost your WordPress site's performance, from the creators of Jetpack",Author:"Automattic - Website Speed and Performance team",AuthorURI:"https://automattic.com",TextDomain:"jetpack-boost",DomainPath:"/languages",Network:!1,RequiresWP:"5.5",RequiresPHP:"7.0",UpdateURI:"",Title:"Jetpack Boost",AuthorName:"Automattic - Website Speed and Performance team",active:!1},"jetpack-boost/jetpack-boost.php":{Name:"Jetpack Boost",PluginURI:"https://jetpack.com/boost",Version:"1.4.0",Description:"Boost your WordPress site's performance, from the creators of Jetpack",Author:"Automattic",AuthorURI:"https://automattic.com",TextDomain:"jetpack-boost",DomainPath:"/languages",Network:!1,RequiresWP:"5.5",RequiresPHP:"7.0",UpdateURI:"",Title:"Jetpack Boost",AuthorName:"Automattic",active:!0},"zero-bs-crm/ZeroBSCRM.php":{Name:"Jetpack CRM",PluginURI:"https://jetpackcrm.com",Version:"4.9.0",Description:"Jetpack CRM is the simplest CRM for WordPress. Self host your own Customer Relationship Manager using WP.",Author:"Automattic",AuthorURI:"https://jetpackcrm.com",TextDomain:"zero-bs-crm",DomainPath:"",Network:!1,RequiresWP:"5.0",RequiresPHP:"5.6",UpdateURI:"",Title:"Jetpack CRM",AuthorName:"Automattic",active:!1},"debug-helper/plugin.php":{Name:"Jetpack Debug Tools",PluginURI:"",Version:"1.4.0-alpha",Description:"Give me a Jetpack connection, and I'll break it every way possible.",Author:"Automattic - Jetpack Crew",AuthorURI:"",TextDomain:"jetpack",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Debug Tools",AuthorName:"Automattic - Jetpack Crew",active:!1},"protect/jetpack-protect.php":{Name:"Jetpack Protect",PluginURI:"https://wordpress.org/plugins/jetpack-protect",Version:"0.1.0-alpha",Description:"Security tools that keep your site safe and sound, from posts to plugins.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-protect",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Protect",AuthorName:"Automattic",active:!0},"search/jetpack-search.php":{Name:"Jetpack Search",PluginURI:"https://jetpack.com/search/",Version:"0.1.0-alpha",Description:"A cloud-powered replacement for WordPress' search.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-search",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Search",AuthorName:"Automattic",active:!1},"social/jetpack-social.php":{Name:"Jetpack Social",PluginURI:"https://wordpress.org/plugins/jetpack-social",Version:"0.1.0-alpha",Description:"Share your site\u2019s posts on several social media networks automatically when you publish a new post.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-social",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Social",AuthorName:"Automattic",active:!0},"starter-plugin/jetpack-starter-plugin.php":{Name:"Jetpack Starter Plugin",PluginURI:"https://wordpress.org/plugins/jetpack-starter-plugin",Version:"0.1.0-alpha",Description:"plugin--description.",Author:"Automattic",AuthorURI:"https://jetpack.com/",TextDomain:"jetpack-starter-plugin",DomainPath:"",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"Jetpack Starter Plugin",AuthorName:"Automattic",active:!1},"qr-block/qr-block.php":{Name:"QR Block",PluginURI:"",Version:"0.0.10",Description:"Another amazing QR Code block for Gutenberg.",Author:"retrofox",AuthorURI:"",TextDomain:"qr-block",DomainPath:"",Network:!1,RequiresWP:"5.8",RequiresPHP:"7.0",UpdateURI:"",Title:"QR Block",AuthorName:"retrofox",active:!1},"query-monitor/query-monitor.php":{Name:"Query Monitor",PluginURI:"https://querymonitor.com/",Version:"3.8.2",Description:"The Developer Tools Panel for WordPress.",Author:"John Blackbourn",AuthorURI:"https://querymonitor.com/",TextDomain:"query-monitor",DomainPath:"/languages/",Network:!1,RequiresWP:"",RequiresPHP:"5.3.6",UpdateURI:"",Title:"Query Monitor",AuthorName:"John Blackbourn",active:!1},"vaultpress/vaultpress.php":{Name:"VaultPress",PluginURI:"http://vaultpress.com/?utm_source=plugin-uri&amp;utm_medium=plugin-description&amp;utm_campaign=1.0",Version:"2.2.2-alpha",Description:'Protect your content, themes, plugins, and settings with <strong>realtime backup</strong> and <strong>automated security scanning</strong> from <a href="http://vaultpress.com/?utm_source=wp-admin&amp;utm_medium=plugin-description&amp;utm_campaign=1.0" rel="nofollow">VaultPress</a>. Activate, enter your registration key, and never worry again. <a href="http://vaultpress.com/help/?utm_source=wp-admin&amp;utm_medium=plugin-description&amp;utm_campaign=1.0" rel="nofollow">Need some help?</a>',Author:"Automattic",AuthorURI:"http://vaultpress.com/?utm_source=author-uri&amp;utm_medium=plugin-description&amp;utm_campaign=1.0",TextDomain:"vaultpress",DomainPath:"/languages/",Network:!1,RequiresWP:"",RequiresPHP:"",UpdateURI:"",Title:"VaultPress",AuthorName:"Automattic",active:!1},"wp-crontrol/wp-crontrol.php":{Name:"WP Crontrol",PluginURI:"https://wordpress.org/plugins/wp-crontrol/",Version:"1.12.0",Description:"WP Crontrol enables you to view and control what's happening in the WP-Cron system.",Author:"John Blackbourn & crontributors",AuthorURI:"https://github.com/johnbillion/wp-crontrol/graphs/contributors",TextDomain:"wp-crontrol",DomainPath:"/languages/",Network:!1,RequiresWP:"",RequiresPHP:"5.3.6",UpdateURI:"",Title:"WP Crontrol",AuthorName:"John Blackbourn & crontributors",active:!0}},installedThemes:{twentynineteen:{Name:"Twenty Nineteen",ThemeURI:"https://wordpress.org/themes/twentynineteen/",Author:"the WordPress team",Version:"2.2",Template:"",Status:"publish",TextDomain:"twentynineteen",RequiresWP:"4.9.6",RequiresPHP:"5.2.4",active:!1,is_block_theme:!1},twentytwenty:{Name:"Twenty Twenty",ThemeURI:"https://wordpress.org/themes/twentytwenty/",Author:"the WordPress team",Version:"1.9",Template:"",Status:"publish",TextDomain:"twentytwenty",RequiresWP:"4.7",RequiresPHP:"5.2.4",active:!1,is_block_theme:!1},twentytwentyone:{Name:"Twenty Twenty-One",ThemeURI:"https://wordpress.org/themes/twentytwentyone/",Author:"the WordPress team",Version:"1.5",Template:"",Status:"publish",TextDomain:"twentytwentyone",RequiresWP:"5.3",RequiresPHP:"5.6",active:!1,is_block_theme:!1},twentytwentytwo:{Name:"Twenty Twenty-Two",ThemeURI:"https://wordpress.org/themes/twentytwentytwo/",Author:"the WordPress team",Version:"1.1",Template:"",Status:"publish",TextDomain:"twentytwentytwo",RequiresWP:"5.9",RequiresPHP:"5.6",active:!0,is_block_theme:!0}},wpVersion:"5.9.3",adminUrl:"http://localhost/wp-admin/admin.php?page=jetpack-protect",siteSuffix:"localhost",jetpackScan:{slug:"scan",name:"Scan",title:"Jetpack Scan",description:"Stay one step ahead of threats",long_description:"Automatic scanning and one-click fixes keep your site one step ahead of security threats and malware.",features:["Automated daily scanning","One-click fixes for most issues","Instant email notifications","Access to latest Firewall rules"],status:"needs_purchase",pricingForUi:{productId:2106,productName:"Jetpack Scan Daily",productSlug:"jetpack_scan",description:"",productType:"jetpack",available:!0,billingProductSlug:"jetpack-scan",isDomainRegistration:!1,costDisplay:"C$155.40",combinedCostDisplay:"C$155.40",cost:155.4,costSmallestUnit:15540,currencyCode:"CAD",priceTierList:[],priceTierUsageQuantity:null,productTerm:"year",priceTiers:[],priceTierSlug:"",introductoryOffer:{intervalUnit:"year",intervalCount:1,usageLimit:null,costPerInterval:83.4,transitionAfterRenewalCount:0,shouldProrateWhenOfferEnds:!1}},is_bundle:!1,is_upgradable_by_bundle:["security"],supported_products:["scan"],wpcom_product_slug:"jetpack_scan",requires_user_connection:!0,has_required_plan:!1,manage_url:"",post_activation_url:"",class:"Automattic\\Jetpack\\My_Jetpack\\Products\\Scan"}}},"../../plugins/protect/src/js/components/pricing-table/index.jsx":(D,h,a)=>{a.d(h,{Z:()=>o});var t=a("../components/components/pricing-table/index.tsx"),P=a("../components/components/product-price/index.tsx"),p=a("../components/components/button/index.tsx"),u=a("../connection/components/use-connection/index.jsx"),y=a("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),A=a("../../../node_modules/.pnpm/@wordpress+i18n@4.30.0/node_modules/@wordpress/i18n/build-module/index.js"),j=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),l=a("../../plugins/protect/src/js/hooks/use-analytics-tracks/index.js"),b=a("../../plugins/protect/src/js/hooks/use-protect-data/index.js"),T=a("../../plugins/protect/src/js/hooks/use-waf-data/index.jsx"),v=a("../../plugins/protect/src/js/state/store.js"),e=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const s=A.__,m=d=>{let{onScanAdd:r}=d;const{handleRegisterSite:n,registrationError:g}=(0,u.Z)({skipUserConnection:!0}),{refreshPlan:c,refreshStatus:w}=(0,y.Z)(v.t),[k,_]=(0,j.useState)(!1),[f,I]=(0,j.useState)(!1),{jetpackScan:i}=(0,b.Z)(),{refreshWaf:x}=(0,T.Z)(),{pricingForUi:U}=i,{introductoryOffer:R,currencyCode:W="USD"}=U,N=U.cost?Math.ceil(U.cost/12*100)/100:null,S=R!=null&&R.costPerInterval?Math.ceil(R.costPerInterval/12*100)/100:null,{recordEvent:C,recordEventHandler:E}=(0,l.Z)(),q=E("jetpack_protect_pricing_table_get_scan_link_click",()=>{I(!0),r()}),J=(0,j.useCallback)(()=>{C("jetpack_protect_connected_product_activated"),_(!0),n().then(()=>_(!1)).then(()=>{c(),x(),w(!0)})},[n,C,x,c,w]),M={title:s("Stay one step ahead of threats","jetpack-protect"),items:[{name:s("Scan for threats and vulnerabilities","jetpack-protect")},{name:s("Daily automated scans","jetpack-protect")},{name:s("Web Application Firewall","jetpack-protect")},{name:s("Brute force protection","jetpack-protect")},{name:s("Access to scan on Cloud","jetpack-protect")},{name:s("One-click auto fixes","jetpack-protect")},{name:s("Notifications","jetpack-protect")},{name:s("Severity labels","jetpack-protect")}]};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(t.ZP,{...M,children:[(0,e.jsxs)(t.oK,{primary:!0,children:[(0,e.jsxs)(t.NE,{children:[(0,e.jsx)(P.Z,{price:N,offPrice:S,leyend:s("/month, billed yearly","jetpack-protect"),currency:W,hideDiscountLabel:!1}),(0,e.jsx)(p.Z,{fullWidth:!0,onClick:q,isLoading:f,disabled:k||f,children:s("Get Jetpack Protect","jetpack-protect")})]}),(0,e.jsx)(t.kF,{isIncluded:!0,label:(0,e.jsx)("strong",{children:s("Line by line malware scanning","jetpack-protect")})}),(0,e.jsx)(t.kF,{isIncluded:!0,label:(0,e.jsx)("strong",{children:s("Plus on-demand manual scans","jetpack-protect")})}),(0,e.jsx)(t.kF,{isIncluded:!0,label:(0,e.jsx)("strong",{children:s("Automatic protection and rule updates","jetpack-protect")})}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!0})]}),(0,e.jsxs)(t.oK,{children:[(0,e.jsxs)(t.NE,{children:[(0,e.jsx)(P.Z,{price:0,leyend:s("Free forever","jetpack-protect"),currency:W,hidePriceFraction:!0}),(0,e.jsx)(p.Z,{fullWidth:!0,variant:"secondary",onClick:J,isLoading:k,disabled:k||f,error:g?s("An error occurred. Please try again.","jetpack-protect"):null,children:s("Start for free","jetpack-protect")})]}),(0,e.jsx)(t.kF,{isIncluded:!0,label:s("Check items against database","jetpack-protect")}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!0,label:s("Manual rules only","jetpack-protect")}),(0,e.jsx)(t.kF,{isIncluded:!0}),(0,e.jsx)(t.kF,{isIncluded:!1}),(0,e.jsx)(t.kF,{isIncluded:!1}),(0,e.jsx)(t.kF,{isIncluded:!1}),(0,e.jsx)(t.kF,{isIncluded:!1})]})]})})};m.__docgenInfo={description:`Product Detail component.

@param {object} props                 - Component props
@param {Function} props.onScanAdd     - Callback when adding paid protect product successfully
@returns {object}                ConnectedPricingTable react component.`,methods:[],displayName:"ConnectedPricingTable"};const o=m},"../../plugins/protect/src/js/hooks/use-waf-data/index.jsx":(D,h,a)=>{a.d(h,{Z:()=>v});var t=a("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),P=a("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),p=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),u=a("../../../node_modules/.pnpm/@wordpress+api-fetch@6.27.0/node_modules/@wordpress/api-fetch/build-module/index.js"),y=a("../../../node_modules/.pnpm/camelize@1.0.0/node_modules/camelize/index.js"),A=a.n(y);const l={fetchWaf:()=>(0,u.Z)({path:"jetpack-protect/v1/waf",method:"GET"}).then(A()),toggleWaf:()=>(0,u.Z)({method:"POST",path:"jetpack-protect/v1/toggle-waf"}),updateWaf:e=>(0,u.Z)({method:"POST",path:"jetpack/v4/waf",data:e}),wafSeen:()=>(0,u.Z)({path:"jetpack-protect/v1/waf-seen",method:"POST"}),wafUpgradeSeen:()=>(0,u.Z)({path:"jetpack-protect/v1/waf-upgrade-seen",method:"POST"})};var b=a("../../plugins/protect/src/js/state/store.js");const v=()=>{const{setWafConfig:e,setWafStats:s,setWafIsEnabled:m,setWafIsUpdating:o,setWafIsToggling:d}=(0,t.Z)(b.t),r=(0,P.Z)(i=>i(b.t).getWaf()),n=(0,p.useCallback)(()=>(o(!0),l.fetchWaf().then(i=>{m(i==null?void 0:i.isEnabled),e(i==null?void 0:i.config),s(i==null?void 0:i.stats)}).finally(()=>o(!1))),[e,s,m,o]),g=(0,p.useCallback)(()=>(r.isEnabled||d(!0),o(!0),l.toggleWaf().then(n).finally(()=>{d(!1),o(!1)})),[n,r.isEnabled,d,o]),c=(0,p.useCallback)(()=>r.isEnabled?Promise.resolve():g(),[g,r.isEnabled]),w=(0,p.useCallback)(()=>(o(!0),c().then(()=>l.updateWaf({jetpack_waf_automatic_rules:!r.config.jetpackWafAutomaticRules})).then(n).finally(()=>o(!1))),[c,n,o,r.config.jetpackWafAutomaticRules]),k=(0,p.useCallback)(()=>(o(!0),c().then(()=>l.updateWaf({jetpack_waf_ip_list:!r.config.jetpackWafIpList})).then(n).finally(()=>o(!1))),[c,n,o,r.config.jetpackWafIpList]),_=(0,p.useCallback)(()=>(o(!0),c().then(()=>l.updateWaf({brute_force_protection:!r.config.bruteForceProtection})).then(n).finally(()=>o(!1))),[c,n,o,r.config.bruteForceProtection]),f=(0,p.useCallback)(()=>(o(!0),c().then(()=>l.updateWaf({jetpack_waf_share_data:!r.config.jetpackWafShareData})).then(n).finally(()=>o(!1))),[c,n,o,r.config.jetpackWafShareData]),I=(0,p.useCallback)(i=>(o(!0),c().then(()=>l.updateWaf(i)).then(n).finally(()=>o(!1))),[c,n,o]);return(0,p.useEffect)(()=>{r.config===void 0&&!r.isFetching&&n()},[r.config,r.isFetching,o,n]),{...r,refreshWaf:n,toggleWaf:g,toggleAutomaticRules:w,toggleManualRules:k,toggleBruteForceProtection:_,toggleShareData:f,updateConfig:I}}}}]);})();
