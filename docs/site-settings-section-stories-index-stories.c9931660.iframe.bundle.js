"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[3556],{"../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js":(O,l,n)=>{n.d(l,{Z:()=>i});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/registry-provider/use-registry.js");const i=u=>{const{dispatch:o}=(0,a.Z)();return u===void 0?o:o(u)}},"../../packages/videopress/src/client/admin/components/site-settings-section/stories/index.stories.tsx":(O,l,n)=>{var x,U,R;n.r(l),n.d(l,{__namedExportsOrder:()=>A,_default:()=>g,default:()=>M});var a=n("../../../node_modules/.pnpm/@storybook+addon-actions@7.0.5_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),p=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=n("../components/components/layout/container/index.tsx"),u=n("../components/components/layout/col/index.tsx"),o=n("../components/components/text/index.tsx"),_=n("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js"),d=n("../../packages/videopress/src/client/admin/hooks/use-permission/index.ts"),C=n("../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts"),I=n("../../packages/videopress/src/client/admin/components/video-filter/index.tsx"),E=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts"),r=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const h=_.__,P=S=>{let{videoPressVideosPrivateForSite:N,siteIsPrivate:T,siteType:f,onPrivacyChange:c}=S;const{canPerformAction:Z}=(0,d.g)(),z=T&&f===E.mP,B=!Z||z,H=z?h("You cannot change this setting because your site is private. You can only choose the video privacy default on public sites.","jetpack-videopress-pkg"):null;return(0,r.jsxs)(i.Z,{horizontalSpacing:0,horizontalGap:0,children:[(0,r.jsx)(u.Z,{children:(0,r.jsx)(o.ZP,{variant:"headline-small",mb:1,children:h("Settings","jetpack-videopress-pkg")})}),(0,r.jsx)(u.Z,{sm:12,md:12,lg:12,children:(0,r.jsx)(I.JC,{for:"settings-site-privacy",label:h("Video Privacy: Restrict views to members of this site","jetpack-videopress-pkg"),onChange:c,checked:N,disabled:B,disabledReason:H})})]})};P.displayName="SiteSettingsSection";const y=()=>{const{settings:S,onUpdate:N}=(0,C.C)(),{videoPressVideosPrivateForSite:T,siteIsPrivate:f,siteType:c}=S;return(0,r.jsx)(P,{videoPressVideosPrivateForSite:T,siteIsPrivate:f,siteType:c,onPrivacyChange:Z=>{N({videoPressVideosPrivateForSite:Z})}})};y.displayName="ConnectSiteSettingsSection";const L=P;var w=`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';

export default {
	title: 'Packages/VideoPress/Site Settings',
	component: SettingsSection,
	argTypes: {},
};

const Template = args => <SettingsSection { ...args } />;

export const _default = Template.bind( {} );
_default.args = {
	onPrivacyChange: action( 'onPrivacyChange' ),
};
`,F={_default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}};const M={parameters:{storySource:{source:`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';
export default {
  title: 'Packages/VideoPress/Site Settings',
  component: SettingsSection,
  argTypes: {}
};
const Template = args => <SettingsSection {...args} />;
export const _default = Template.bind({});
_default.args = {
  onPrivacyChange: action('onPrivacyChange')
};
_default.parameters = {
  ..._default.parameters,
  docs: {
    ..._default.parameters?.docs,
    source: {
      originalSource: "args => <SettingsSection {...args} />",
      ..._default.parameters?.docs?.source
    }
  }
};`,locationsMap:{default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}}}},title:"Packages/VideoPress/Site Settings",component:L,argTypes:{}},v=S=>(0,r.jsx)(L,{...S});v.displayName="Template";const g=v.bind({});g.args={onPrivacyChange:(0,a.aD)("onPrivacyChange")},g.parameters={...g.parameters,docs:{...(x=g.parameters)==null?void 0:x.docs,source:{originalSource:"args => <SettingsSection {...args} />",...(R=(U=g.parameters)==null?void 0:U.docs)==null?void 0:R.source}}};const A=["_default"]},"../connection/components/use-connection/index.jsx":(O,l,n)=>{n.d(l,{Z:()=>d});var a=n("../api/index.jsx"),p=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),i=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),o=n("../connection/state/store.jsx");const _=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},d=function(){let{registrationNonce:C=_.registrationNonce,apiRoot:I=_.apiRoot,apiNonce:E=_.apiNonce,redirectUri:r,autoTrigger:h,from:P,skipUserConnection:y}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:L,connectUser:w,refreshConnectedPlugins:F}=(0,p.Z)(o.t),M=(0,i.Z)(c=>c(o.t).getRegistrationError()),{siteIsRegistering:v,userIsConnecting:g,userConnectionData:A,connectedPlugins:x,connectionErrors:U,isRegistered:R,isUserConnected:S,hasConnectedOwner:N}=(0,i.Z)(c=>({siteIsRegistering:c(o.t).getSiteIsRegistering(),userIsConnecting:c(o.t).getUserIsConnecting(),userConnectionData:c(o.t).getUserConnectionData(),connectedPlugins:c(o.t).getConnectedPlugins(),connectionErrors:c(o.t).getConnectionErrors(),...c(o.t).getConnectionStatus()})),T=()=>{if(y){if(r)return window.location=r,Promise.resolve(r)}else return w({from:P,redirectUri:r});return Promise.resolve()},f=c=>(c&&c.preventDefault(),R?T():L({registrationNonce:C,redirectUri:r}).then(()=>T()));return(0,u.useEffect)(()=>{a.ZP.setApiRoot(I),a.ZP.setApiNonce(E)},[I,E]),(0,u.useEffect)(()=>{h&&!v&&!g&&f()},[]),{handleRegisterSite:f,handleConnectUser:T,refreshConnectedPlugins:F,isRegistered:R,isUserConnected:S,siteIsRegistering:v,userIsConnecting:g,registrationError:M,userConnectionData:A,hasConnectedOwner:N,connectedPlugins:x,connectionErrors:U}}},"../connection/state/store.jsx":(O,l,n)=>{n.d(l,{t:()=>G});var a=n("../api/index.jsx");const p="SET_CONNECTION_STATUS",i="SET_CONNECTION_STATUS_IS_FETCHING",u="FETCH_CONNECTION_STATUS",o="SET_SITE_IS_REGISTERING",_="SET_USER_IS_CONNECTING",d="SET_REGISTRATION_ERROR",C="CLEAR_REGISTRATION_ERROR",I="REGISTER_SITE",E="SET_AUTHORIZATION_URL",r="CONNECT_USER",h="DISCONNECT_USER_SUCCESS",P="FETCH_AUTHORIZATION_URL",y="SET_CONNECTED_PLUGINS",L="REFRESH_CONNECTED_PLUGINS",w="SET_CONNECTION_ERRORS",F=e=>({type:p,connectionStatus:e}),M=e=>({type:i,isFetching:e}),v=()=>({type:u}),g=e=>({type:o,isRegistering:e}),A=e=>({type:_,isConnecting:e}),x=()=>({type:h}),U=e=>({type:d,registrationError:e}),R=()=>({type:C}),S=e=>({type:E,authorizationUrl:e}),N=e=>({type:P,redirectUri:e}),T=e=>({type:y,connectedPlugins:e}),f=e=>({type:w,connectionErrors:e});function c(){let{from:e,redirectFunc:t,redirectUri:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield A(!0),yield{type:r,from:e,redirectFunc:t,redirectUri:s}}()}function Z(e){let{registrationNonce:t,redirectUri:s}=e;return function*(){yield R(),yield g(!0);try{const m=yield{type:I,registrationNonce:t,redirectUri:s};return yield F({isRegistered:!0}),yield S(m.authorizeUrl),yield g(!1),Promise.resolve(m)}catch(m){return yield U(m),yield g(!1),Promise.reject(m)}}()}const B={setConnectionStatus:F,setConnectionStatusIsFetching:M,fetchConnectionStatus:v,fetchAuthorizationUrl:N,setSiteIsRegistering:g,setUserIsConnecting:A,setRegistrationError:U,clearRegistrationError:R,setAuthorizationUrl:S,registerSite:Z,connectUser:c,disconnectUserSuccess:x,setConnectedPlugins:T,refreshConnectedPlugins:()=>async e=>{let{dispatch:t}=e;return await new Promise(s=>a.ZP.fetchConnectedPlugins().then(m=>{t(T(m)),s(m)}))},setConnectionErrors:f};var H=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const G="jetpack-connection",J=e=>{let{registrationNonce:t,redirectUri:s}=e;return a.ZP.registerSite(t,s)},X=(0,H.R)(e=>{let{resolveSelect:t}=e;return function(){let{from:s,redirectFunc:m,redirectUri:j}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((W,pe)=>{t(G).getAuthorizationUrl(j).then(b=>{const _e=m||(Ee=>window.location.assign(Ee)),V=new URL(b);s&&V.searchParams.set("from",encodeURIComponent(s));const Y=V.toString();_e(Y),W(Y)}).catch(b=>{pe(b)})})}}),Q={FETCH_AUTHORIZATION_URL:e=>{let{redirectUri:t}=e;return a.ZP.fetchAuthorizationUrl(t)},REGISTER_SITE:J,CONNECT_USER:X};var k=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const $=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{...e,...t.connectionStatus};case h:return{...e,isUserConnected:!1}}return e},q=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.connectedPlugins}return e},ee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return t.isFetching}return e},te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return t.isRegistering}return e},ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.isConnecting}return e},se=(e,t)=>{switch(t.type){case C:return!1;case d:return t.registrationError;default:return e}},oe=(e,t)=>{switch(t.type){case E:return t.authorizationUrl;default:return e}},re=(e,t)=>{switch(t.type){default:return e}},ie=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.connectionErrors}return e},ce=(0,k.UY)({connectionStatus:$,connectionStatusIsFetching:ee,siteIsRegistering:te,userIsConnecting:ne,registrationError:se,authorizationUrl:oe,userConnectionData:re,connectedPlugins:q,connectionErrors:ie}),ae={...{getAuthorizationUrl:{isFulfilled:function(e){const t=!!e.authorizationUrl;for(var s=arguments.length,m=new Array(s>1?s-1:0),j=1;j<s;j++)m[j-1]=arguments[j];const W=(0,k.Ys)(G).hasFinishedResolution("getAuthorizationUrl",m);return t&&!W&&(0,k.WI)(G).finishResolution("getAuthorizationUrl",m),t},*fulfill(e){const t=yield B.fetchAuthorizationUrl(e);yield B.setAuthorizationUrl(t.authorizeUrl)}}}},de={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getWpcomUser:e=>{var t,s;return(s=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:s.wpcomUser},getBlogId:e=>{var t,s;return(s=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:s.blogId}}};var ue=n("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),le=n.n(ue),ge=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class D{static mayBeInit(t,s){D.store===null&&(D.store=(0,ge.Z)(t,s),(0,k.z2)(D.store))}}le()(D,"store",null);const me=D,K=window.JP_CONNECTION_INITIAL_STATE;K||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),me.mayBeInit(G,{__experimentalUseThunks:!0,reducer:ce,actions:B,selectors:de,resolvers:ae,controls:Q,initialState:K||{}})},"../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts":(O,l,n)=>{n.d(l,{RB:()=>i,mP:()=>a});const a="atomic",p="simple",i="jetpack"},"../../packages/videopress/src/client/admin/hooks/use-permission/index.ts":(O,l,n)=>{n.d(l,{g:()=>p});var a=n("../connection/components/use-connection/index.jsx");const p=()=>{const{isRegistered:i,hasConnectedOwner:u,isUserConnected:o}=(0,a.Z)();return{isRegistered:i,hasConnectedOwner:u,isUserConnected:o,canPerformAction:i&&u&&o}}},"../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts":(O,l,n)=>{n.d(l,{C:()=>o});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),p=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),i=n("../../packages/videopress/src/client/state/index.js"),u=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts");const o=()=>{var C,I,E;const _=(0,a.Z)(i.tT),d=(0,p.Z)(r=>r(i.tT).getVideoPressSettings(),[]);return{settings:{videoPressVideosPrivateForSite:(C=d==null?void 0:d.videoPressVideosPrivateForSite)!=null?C:!1,siteIsPrivate:(I=d==null?void 0:d.siteIsPrivate)!=null?I:!1,siteType:(E=d==null?void 0:d.siteType)!=null?E:u.RB},onUpdate:r=>_.updateVideoPressSettings(r)}}}}]);})();
