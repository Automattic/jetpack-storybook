(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[8409],{"../../../node_modules/.pnpm/@wordpress+url@4.7.0/node_modules/@wordpress/url/build-module/clean-for-slug.js":(Q,$,j)=>{"use strict";j.d($,{O:()=>B});var N=j("../../../node_modules/.pnpm/remove-accents@0.5.0/node_modules/remove-accents/index.js"),G=j.n(N);function B(K){return K?G()(K).replace(/[\s\./]+/g,"-").replace(/[^\p{L}\p{N}_-]+/gu,"").toLowerCase().replace(/-+/g,"-").replace(/(^-+)|(-+$)/g,""):""}},"../../../node_modules/.pnpm/querystringify@2.2.0/node_modules/querystringify/index.js":(Q,$)=>{"use strict";var j=Object.prototype.hasOwnProperty,N;function G(L){try{return decodeURIComponent(L.replace(/\+/g," "))}catch(C){return null}}function B(L){try{return encodeURIComponent(L)}catch(C){return null}}function K(L){for(var C=/([^=?#&]+)=?([^&]*)/g,q={},T;T=C.exec(L);){var U=G(T[1]),oe=G(T[2]);U===null||oe===null||U in q||(q[U]=oe)}return q}function ne(L,C){C=C||"";var q=[],T,U;typeof C!="string"&&(C="?");for(U in L)if(j.call(L,U)){if(T=L[U],!T&&(T===null||T===N||isNaN(T))&&(T=""),U=B(U),T=B(T),U===null||T===null)continue;q.push(U+"="+T)}return q.length?C+q.join("&"):""}$.stringify=ne,$.parse=K},"../../../node_modules/.pnpm/remove-accents@0.5.0/node_modules/remove-accents/index.js":Q=>{var $={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u1EA4:"A",\u1EAE:"A",\u1EB2:"A",\u1EB4:"A",\u1EB6:"A",\u00C6:"AE",\u1EA6:"A",\u1EB0:"A",\u0202:"A",\u1EA2:"A",\u1EA0:"A",\u1EA8:"A",\u1EAA:"A",\u1EAC:"A",\u00C7:"C",\u1E08:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u1EBE:"E",\u1E16:"E",\u1EC0:"E",\u1E14:"E",\u1E1C:"E",\u0206:"E",\u1EBA:"E",\u1EBC:"E",\u1EB8:"E",\u1EC2:"E",\u1EC4:"E",\u1EC6:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u1E2E:"I",\u020A:"I",\u1EC8:"I",\u1ECA:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u1ED0:"O",\u1E4C:"O",\u1E52:"O",\u020E:"O",\u1ECE:"O",\u1ECC:"O",\u1ED4:"O",\u1ED6:"O",\u1ED8:"O",\u1EDC:"O",\u1EDE:"O",\u1EE0:"O",\u1EDA:"O",\u1EE2:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u1EE6:"U",\u1EE4:"U",\u1EEC:"U",\u1EEE:"U",\u1EF0:"U",\u00DD:"Y",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u1EA5:"a",\u1EAF:"a",\u1EB3:"a",\u1EB5:"a",\u1EB7:"a",\u00E6:"ae",\u1EA7:"a",\u1EB1:"a",\u0203:"a",\u1EA3:"a",\u1EA1:"a",\u1EA9:"a",\u1EAB:"a",\u1EAD:"a",\u00E7:"c",\u1E09:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u1EBF:"e",\u1E17:"e",\u1EC1:"e",\u1E15:"e",\u1E1D:"e",\u0207:"e",\u1EBB:"e",\u1EBD:"e",\u1EB9:"e",\u1EC3:"e",\u1EC5:"e",\u1EC7:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u1E2F:"i",\u020B:"i",\u1EC9:"i",\u1ECB:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u1ED1:"o",\u1E4D:"o",\u1E53:"o",\u020F:"o",\u1ECF:"o",\u1ECD:"o",\u1ED5:"o",\u1ED7:"o",\u1ED9:"o",\u1EDD:"o",\u1EDF:"o",\u1EE1:"o",\u1EDB:"o",\u1EE3:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u1EE7:"u",\u1EE5:"u",\u1EED:"u",\u1EEF:"u",\u1EF1:"u",\u00FD:"y",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",C\u0306:"C",c\u0306:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u01F4:"G",\u011D:"g",\u01F5:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u1E2A:"H",\u1E2B:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u1E30:"K",\u1E31:"k",K\u0306:"K",k\u0306:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"l",\u0142:"l",\u1E3E:"M",\u1E3F:"m",M\u0306:"M",m\u0306:"m",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"n",N\u0306:"N",n\u0306:"n",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",P\u0306:"P",p\u0306:"p",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",R\u0306:"R",r\u0306:"r",\u0212:"R",\u0213:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u0218:"S",\u0219:"s",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u021B:"t",\u021A:"T",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",T\u0306:"T",t\u0306:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0216:"U",\u0217:"u",V\u0306:"V",v\u0306:"v",\u0174:"W",\u0175:"w",\u1E82:"W",\u1E83:"w",X\u0306:"X",x\u0306:"x",\u0176:"Y",\u0177:"y",\u0178:"Y",Y\u0306:"Y",y\u0306:"y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u017F:"s",\u0192:"f",\u01A0:"O",\u01A1:"o",\u01AF:"U",\u01B0:"u",\u01CD:"A",\u01CE:"a",\u01CF:"I",\u01D0:"i",\u01D1:"O",\u01D2:"o",\u01D3:"U",\u01D4:"u",\u01D5:"U",\u01D6:"u",\u01D7:"U",\u01D8:"u",\u01D9:"U",\u01DA:"u",\u01DB:"U",\u01DC:"u",\u1EE8:"U",\u1EE9:"u",\u1E78:"U",\u1E79:"u",\u01FA:"A",\u01FB:"a",\u01FC:"AE",\u01FD:"ae",\u01FE:"O",\u01FF:"o",\u00DE:"TH",\u00FE:"th",\u1E54:"P",\u1E55:"p",\u1E64:"S",\u1E65:"s",X\u0301:"X",x\u0301:"x",\u0403:"\u0413",\u0453:"\u0433",\u040C:"\u041A",\u045C:"\u043A",A\u030B:"A",a\u030B:"a",E\u030B:"E",e\u030B:"e",I\u030B:"I",i\u030B:"i",\u01F8:"N",\u01F9:"n",\u1ED2:"O",\u1ED3:"o",\u1E50:"O",\u1E51:"o",\u1EEA:"U",\u1EEB:"u",\u1E80:"W",\u1E81:"w",\u1EF2:"Y",\u1EF3:"y",\u0200:"A",\u0201:"a",\u0204:"E",\u0205:"e",\u0208:"I",\u0209:"i",\u020C:"O",\u020D:"o",\u0210:"R",\u0211:"r",\u0214:"U",\u0215:"u",B\u030C:"B",b\u030C:"b",\u010C\u0323:"C",\u010D\u0323:"c",\u00CA\u030C:"E",\u00EA\u030C:"e",F\u030C:"F",f\u030C:"f",\u01E6:"G",\u01E7:"g",\u021E:"H",\u021F:"h",J\u030C:"J",\u01F0:"j",\u01E8:"K",\u01E9:"k",M\u030C:"M",m\u030C:"m",P\u030C:"P",p\u030C:"p",Q\u030C:"Q",q\u030C:"q",\u0158\u0329:"R",\u0159\u0329:"r",\u1E66:"S",\u1E67:"s",V\u030C:"V",v\u030C:"v",W\u030C:"W",w\u030C:"w",X\u030C:"X",x\u030C:"x",Y\u030C:"Y",y\u030C:"y",A\u0327:"A",a\u0327:"a",B\u0327:"B",b\u0327:"b",\u1E10:"D",\u1E11:"d",\u0228:"E",\u0229:"e",\u0190\u0327:"E",\u025B\u0327:"e",\u1E28:"H",\u1E29:"h",I\u0327:"I",i\u0327:"i",\u0197\u0327:"I",\u0268\u0327:"i",M\u0327:"M",m\u0327:"m",O\u0327:"O",o\u0327:"o",Q\u0327:"Q",q\u0327:"q",U\u0327:"U",u\u0327:"u",X\u0327:"X",x\u0327:"x",Z\u0327:"Z",z\u0327:"z",\u0439:"\u0438",\u0419:"\u0418",\u0451:"\u0435",\u0401:"\u0415"},j=Object.keys($).join("|"),N=new RegExp(j,"g"),G=new RegExp(j,"");function B(L){return $[L]}var K=function(L){return L.replace(N,B)},ne=function(L){return!!L.match(G)};Q.exports=K,Q.exports.has=ne,Q.exports.remove=K},"../../../node_modules/.pnpm/requires-port@1.0.0/node_modules/requires-port/index.js":Q=>{"use strict";Q.exports=function(j,N){if(N=N.split(":")[0],j=+j,!j)return!1;switch(N){case"http":case"ws":return j!==80;case"https":case"wss":return j!==443;case"ftp":return j!==21;case"gopher":return j!==70;case"file":return!1}return j!==0}},"../../../node_modules/.pnpm/tus-js-client@4.1.0/node_modules/tus-js-client/lib.esm/browser/index.js":(Q,$,j)=>{"use strict";j.d($,{_O:()=>on});const N="3.7.7",G=N,B=typeof Buffer=="function",K=typeof TextDecoder=="function"?new TextDecoder:void 0,ne=typeof TextEncoder=="function"?new TextEncoder:void 0,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",C=Array.prototype.slice.call(L),q=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(C),T=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,U=String.fromCharCode.bind(String),oe=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),we=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),X=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Se=e=>{let t,r,n,a,l="";const h=e.length%3;for(let b=0;b<e.length;){if((r=e.charCodeAt(b++))>255||(n=e.charCodeAt(b++))>255||(a=e.charCodeAt(b++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|a,l+=C[t>>18&63]+C[t>>12&63]+C[t>>6&63]+C[t&63]}return h?l.slice(0,h-3)+"===".substring(h):l},Ue=typeof btoa=="function"?e=>btoa(e):B?e=>Buffer.from(e,"binary").toString("base64"):Se,M=B?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,a=e.length;n<a;n+=4096)r.push(U.apply(null,e.subarray(n,n+4096)));return Ue(r.join(""))},ye=(e,t=!1)=>t?we(M(e)):M(e),Be=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?U(192|t>>>6)+U(128|t&63):U(224|t>>>12&15)+U(128|t>>>6&63)+U(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return U(240|t>>>18&7)+U(128|t>>>12&63)+U(128|t>>>6&63)+U(128|t&63)}},y=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=e=>e.replace(y,Be),m=B?e=>Buffer.from(e,"utf8").toString("base64"):ne?e=>M(ne.encode(e)):e=>Ue(v(e)),c=(e,t=!1)=>t?we(m(e)):m(e),x=e=>c(e,!0),S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return U((r>>>10)+55296)+U((r&1023)+56320);case 3:return U((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return U((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},O=e=>e.replace(S,k),Y=e=>{if(e=e.replace(/\s+/g,""),!T.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,a;for(let l=0;l<e.length;)t=q[e.charAt(l++)]<<18|q[e.charAt(l++)]<<12|(n=q[e.charAt(l++)])<<6|(a=q[e.charAt(l++)]),r+=n===64?U(t>>16&255):a===64?U(t>>16&255,t>>8&255):U(t>>16&255,t>>8&255,t&255);return r},ae=typeof atob=="function"?e=>atob(X(e)):B?e=>Buffer.from(e,"base64").toString("binary"):Y,xe=B?e=>oe(Buffer.from(e,"base64")):e=>oe(ae(e).split("").map(t=>t.charCodeAt(0))),g=e=>xe(tt(e)),Oe=B?e=>Buffer.from(e,"base64").toString("utf8"):K?e=>K.decode(xe(e)):e=>O(ae(e)),tt=e=>X(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),ze=e=>Oe(tt(e)),Dt=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},rt=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),nt=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,rt(r));e("fromBase64",function(){return ze(this)}),e("toBase64",function(t){return c(this,t)}),e("toBase64URI",function(){return c(this,!0)}),e("toBase64URL",function(){return c(this,!0)}),e("toUint8Array",function(){return g(this)})},ot=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,rt(r));e("toBase64",function(t){return ye(this,t)}),e("toBase64URI",function(){return ye(this,!0)}),e("toBase64URL",function(){return ye(this,!0)})},Ft={version:N,VERSION:G,atob:ae,atobPolyfill:Y,btoa:Ue,btoaPolyfill:Se,fromBase64:ze,toBase64:c,encode:c,encodeURI:x,encodeURL:x,utob:v,btou:O,decode:ze,isValid:Dt,fromUint8Array:ye,toUint8Array:g,extendString:nt,extendUint8Array:ot,extendBuiltins:()=>{nt(),ot()}};var Nt=j("../../../node_modules/.pnpm/url-parse@1.5.10/node_modules/url-parse/index.js"),Bt=j.n(Nt);function me(e){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ht(n.key),n)}}function zt(e,t,r){return t&&it(e.prototype,t),r&&it(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ht(e){var t=qt(e,"string");return me(t)=="symbol"?t:String(t)}function qt(e,t){if(me(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(me(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t,r){return t=Pe(t),Kt(e,qe()?Reflect.construct(t,r||[],Pe(e).constructor):t.apply(e,r))}function Kt(e,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}function Xt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}function He(e){var t=typeof Map=="function"?new Map:void 0;return He=function(n){if(n===null||!Zt(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,a)}function a(){return Wt(n,arguments,Pe(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Ee(a,n)},He(e)}function Wt(e,t,r){if(qe())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var a=new(e.bind.apply(e,n));return r&&Ee(a,r.prototype),a}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(qe=function(){return!!e})()}function Zt(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch(t){return typeof e=="function"}}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ee(e,t)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pe(e)}var Vt=function(e){Yt(t,e);function t(r){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Mt(this,t),n=Gt(this,t,[r]),n.originalRequest=l,n.originalResponse=h,n.causingError=a,a!=null&&(r+=", caused by ".concat(a.toString())),l!=null){var b=l.getHeader("X-Request-ID")||"n/a",d=l.getMethod(),_=l.getURL(),P=h?h.getStatus():"n/a",F=h?h.getBody()||"":"n/a";r+=", originated from request (method: ".concat(d,", url: ").concat(_,", response code: ").concat(P,", response text: ").concat(F,", request id: ").concat(b,")")}return n.message=r,n}return zt(t)}(He(Error));const De=Vt;var at=!1;function un(){at=!0}function ue(e){at&&console.log(e)}function $t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})}function Me(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Me=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(u,o,i){u[o]=i.value},l=typeof Symbol=="function"?Symbol:{},h=l.iterator||"@@iterator",b=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function _(u,o,i){return Object.defineProperty(u,o,{value:i,enumerable:!0,configurable:!0,writable:!0}),u[o]}try{_({},"")}catch(u){_=function(i,s,p){return i[s]=p}}function P(u,o,i,s){var p=o&&o.prototype instanceof ee?o:ee,f=Object.create(p.prototype),w=new he(s||[]);return a(f,"_invoke",{value:Qe(u,i,w)}),f}function F(u,o,i){try{return{type:"normal",arg:u.call(o,i)}}catch(s){return{type:"throw",arg:s}}}t.wrap=P;var ie="suspendedStart",Te="suspendedYield",fe="executing",J="completed",A={};function ee(){}function W(){}function I(){}var V={};_(V,h,function(){return this});var ce=Object.getPrototypeOf,te=ce&&ce(ce(de([])));te&&te!==r&&n.call(te,h)&&(V=te);var Z=I.prototype=ee.prototype=Object.create(V);function Ce(u){["next","throw","return"].forEach(function(o){_(u,o,function(i){return this._invoke(o,i)})})}function re(u,o){function i(p,f,w,E){var R=F(u[p],u,f);if(R.type!=="throw"){var z=R.arg,D=z.value;return D&&le(D)=="object"&&n.call(D,"__await")?o.resolve(D.__await).then(function(H){i("next",H,w,E)},function(H){i("throw",H,w,E)}):o.resolve(D).then(function(H){z.value=H,w(z)},function(H){return i("throw",H,w,E)})}E(R.arg)}var s;a(this,"_invoke",{value:function(f,w){function E(){return new o(function(R,z){i(f,w,R,z)})}return s=s?s.then(E,E):E()}})}function Qe(u,o,i){var s=ie;return function(p,f){if(s===fe)throw new Error("Generator is already running");if(s===J){if(p==="throw")throw f;return{value:e,done:!0}}for(i.method=p,i.arg=f;;){var w=i.delegate;if(w){var E=Ie(w,i);if(E){if(E===A)continue;return E}}if(i.method==="next")i.sent=i._sent=i.arg;else if(i.method==="throw"){if(s===ie)throw s=J,i.arg;i.dispatchException(i.arg)}else i.method==="return"&&i.abrupt("return",i.arg);s=fe;var R=F(u,o,i);if(R.type==="normal"){if(s=i.done?J:Te,R.arg===A)continue;return{value:R.arg,done:i.done}}R.type==="throw"&&(s=J,i.method="throw",i.arg=R.arg)}}}function Ie(u,o){var i=o.method,s=u.iterator[i];if(s===e)return o.delegate=null,i==="throw"&&u.iterator.return&&(o.method="return",o.arg=e,Ie(u,o),o.method==="throw")||i!=="return"&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),A;var p=F(s,u.iterator,o.arg);if(p.type==="throw")return o.method="throw",o.arg=p.arg,o.delegate=null,A;var f=p.arg;return f?f.done?(o[u.resultName]=f.value,o.next=u.nextLoc,o.method!=="return"&&(o.method="next",o.arg=e),o.delegate=null,A):f:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,A)}function et(u){var o={tryLoc:u[0]};1 in u&&(o.catchLoc=u[1]),2 in u&&(o.finallyLoc=u[2],o.afterLoc=u[3]),this.tryEntries.push(o)}function pe(u){var o=u.completion||{};o.type="normal",delete o.arg,u.completion=o}function he(u){this.tryEntries=[{tryLoc:"root"}],u.forEach(et,this),this.reset(!0)}function de(u){if(u||u===""){var o=u[h];if(o)return o.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length)){var i=-1,s=function p(){for(;++i<u.length;)if(n.call(u,i))return p.value=u[i],p.done=!1,p;return p.value=e,p.done=!0,p};return s.next=s}}throw new TypeError(le(u)+" is not iterable")}return W.prototype=I,a(Z,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:W,configurable:!0}),W.displayName=_(I,d,"GeneratorFunction"),t.isGeneratorFunction=function(u){var o=typeof u=="function"&&u.constructor;return!!o&&(o===W||(o.displayName||o.name)==="GeneratorFunction")},t.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,I):(u.__proto__=I,_(u,d,"GeneratorFunction")),u.prototype=Object.create(Z),u},t.awrap=function(u){return{__await:u}},Ce(re.prototype),_(re.prototype,b,function(){return this}),t.AsyncIterator=re,t.async=function(u,o,i,s,p){p===void 0&&(p=Promise);var f=new re(P(u,o,i,s),p);return t.isGeneratorFunction(o)?f:f.next().then(function(w){return w.done?w.value:f.next()})},Ce(Z),_(Z,d,"Generator"),_(Z,h,function(){return this}),_(Z,"toString",function(){return"[object Generator]"}),t.keys=function(u){var o=Object(u),i=[];for(var s in o)i.push(s);return i.reverse(),function p(){for(;i.length;){var f=i.pop();if(f in o)return p.value=f,p.done=!1,p}return p.done=!0,p}},t.values=de,he.prototype={constructor:he,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(pe),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function s(z,D){return w.type="throw",w.arg=o,i.next=z,D&&(i.method="next",i.arg=e),!!D}for(var p=this.tryEntries.length-1;p>=0;--p){var f=this.tryEntries[p],w=f.completion;if(f.tryLoc==="root")return s("end");if(f.tryLoc<=this.prev){var E=n.call(f,"catchLoc"),R=n.call(f,"finallyLoc");if(E&&R){if(this.prev<f.catchLoc)return s(f.catchLoc,!0);if(this.prev<f.finallyLoc)return s(f.finallyLoc)}else if(E){if(this.prev<f.catchLoc)return s(f.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return s(f.finallyLoc)}}}},abrupt:function(o,i){for(var s=this.tryEntries.length-1;s>=0;--s){var p=this.tryEntries[s];if(p.tryLoc<=this.prev&&n.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var f=p;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var w=f?f.completion:{};return w.type=o,w.arg=i,f?(this.method="next",this.next=f.finallyLoc,A):this.complete(w)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),A},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.finallyLoc===o)return this.complete(s.completion,s.afterLoc),pe(s),A}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc===o){var p=s.completion;if(p.type==="throw"){var f=p.arg;pe(s)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(o,i,s){return this.delegate={iterator:de(o),resultName:i,nextLoc:s},this.method==="next"&&(this.arg=e),A}},t}function ut(e,t,r,n,a,l,h){try{var b=e[l](h),d=b.value}catch(_){r(_);return}b.done?t(d):Promise.resolve(d).then(n,a)}function Jt(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function h(d){ut(l,n,a,h,b,"next",d)}function b(d){ut(l,n,a,h,b,"throw",d)}h(void 0)})}}function lt(e,t){return rr(e)||tr(e,t)||er(e,t)||Qt()}function Qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function er(e,t){if(e){if(typeof e=="string")return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(e,t)}}function st(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,l,h,b=[],d=!0,_=!1;try{if(l=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=l.call(r)).done)&&(b.push(n.value),b.length!==t);d=!0);}catch(P){_=!0,a=P}finally{try{if(!d&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw a}}return b}}function rr(e){if(Array.isArray(e))return e}function le(e){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(e)}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(r),!0).forEach(function(n){nr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nr(e,t,r){return t=pt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pt(n.key),n)}}function ir(e,t,r){return t&&ct(e.prototype,t),r&&ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pt(e){var t=ar(e,"string");return le(t)=="symbol"?t:String(t)}function ar(e,t){if(le(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(le(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ge="tus-v1",Fe="ietf-draft-03",ur={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:gt,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Ge},ht=function(){function e(t,r){or(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return ir(e,[{key:"findPreviousUploads",value:function(){var r=this;return this.options.fingerprint(this.file,this.options).then(function(n){return r._urlStorage.findUploadsByFingerprint(n)})}},{key:"resumeFromPreviousUpload",value:function(r){this.url=r.uploadUrl||null,this._parallelUploadUrls=r.parallelUploadUrls||null,this._urlStorageKey=r.urlStorageKey}},{key:"start",value:function(){var r=this,n=this.file;if(!n){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Ge,Fe].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var a=this.options.retryDelays;if(a!=null&&Object.prototype.toString.call(a)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var l=0,h=["uploadUrl","uploadSize","uploadLengthDeferred"];l<h.length;l++){var b=h[l];if(this.options[b]){this._emitError(new Error("tus: cannot use the ".concat(b," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(n,this.options).then(function(d){return d==null?ue("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):ue("Calculated fingerprint: ".concat(d)),r._fingerprint=d,r._source?r._source:r.options.fileReader.openFile(n,r.options.chunkSize)}).then(function(d){if(r._source=d,r.options.uploadLengthDeferred)r._size=null;else if(r.options.uploadSize!=null){if(r._size=Number(r.options.uploadSize),Number.isNaN(r._size)){r._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(r._size=r._source.size,r._size==null){r._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}r.options.parallelUploads>1||r._parallelUploadUrls!=null?r._startParallelUpload():r._startSingleUpload()}).catch(function(d){r._emitError(d)})}},{key:"_startParallelUpload",value:function(){var r,n=this,a=this._size,l=0;this._parallelUploads=[];var h=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,b=(r=this.options.parallelUploadBoundaries)!==null&&r!==void 0?r:sr(this._source.size,h);this._parallelUploadUrls&&b.forEach(function(P,F){P.uploadUrl=n._parallelUploadUrls[F]||null}),this._parallelUploadUrls=new Array(b.length);var d=b.map(function(P,F){var ie=0;return n._source.slice(P.start,P.end).then(function(Te){var fe=Te.value;return new Promise(function(J,A){var ee=ve(ve({},n.options),{},{uploadUrl:P.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:ve(ve({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:J,onError:A,onProgress:function(V){l=l-ie+V,ie=V,n._emitProgress(l,a)},onUploadUrlAvailable:function(){n._parallelUploadUrls[F]=W.url,n._parallelUploadUrls.filter(function(V){return!!V}).length===b.length&&n._saveUploadInUrlStorage()}}),W=new e(fe,ee);W.start(),n._parallelUploads.push(W)})})}),_;Promise.all(d).then(function(){_=n._openRequest("POST",n.options.endpoint),_.setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var P=dt(n.options.metadata);return P!==""&&_.setHeader("Upload-Metadata",P),n._sendRequest(_,null)}).then(function(P){if(!ge(P.getStatus(),200)){n._emitHttpError(_,P,"tus: unexpected response while creating upload");return}var F=P.getHeader("Location");if(F==null){n._emitHttpError(_,P,"tus: invalid or missing Location header");return}n.url=bt(n.options.endpoint,F),ue("Created upload at ".concat(n.url)),n._emitSuccess()}).catch(function(P){n._emitError(P)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){ue("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){ue("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,this._resumeUpload();return}ue("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(r){var n=this;return this._parallelUploads!=null&&this._parallelUploads.forEach(function(a){a.abort(r)}),this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!r||this.url==null?Promise.resolve():e.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(r,n,a,l){this._emitError(new De(a,l,r,n))}},{key:"_emitError",value:function(r){var n=this;if(!this._aborted){if(this.options.retryDelays!=null){var a=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(a&&(this._retryAttempt=0),vt(r,this._retryAttempt,this.options)){var l=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){n.start()},l);return}}if(typeof this.options.onError=="function")this.options.onError(r);else throw r}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(r,n){typeof this.options.onProgress=="function"&&this.options.onProgress(r,n)}},{key:"_emitChunkComplete",value:function(r,n,a){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(r,n,a)}},{key:"_createUpload",value:function(){var r=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var n=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?n.setHeader("Upload-Defer-Length",1):n.setHeader("Upload-Length",this._size);var a=dt(this.options.metadata);a!==""&&n.setHeader("Upload-Metadata",a);var l;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,l=this._addChunkToRequest(n)):(this.options.protocol===Fe&&n.setHeader("Upload-Complete","?0"),l=this._sendRequest(n,null)),l.then(function(h){if(!ge(h.getStatus(),200)){r._emitHttpError(n,h,"tus: unexpected response while creating upload");return}var b=h.getHeader("Location");if(b==null){r._emitHttpError(n,h,"tus: invalid or missing Location header");return}if(r.url=bt(r.options.endpoint,b),ue("Created upload at ".concat(r.url)),typeof r.options.onUploadUrlAvailable=="function"&&r.options.onUploadUrlAvailable(),r._size===0){r._emitSuccess(),r._source.close();return}r._saveUploadInUrlStorage().then(function(){r.options.uploadDataDuringCreation?r._handleUploadResponse(n,h):(r._offset=0,r._performUpload())})}).catch(function(h){r._emitHttpError(n,null,"tus: failed to create upload",h)})}},{key:"_resumeUpload",value:function(){var r=this,n=this._openRequest("HEAD",this.url),a=this._sendRequest(n,null);a.then(function(l){var h=l.getStatus();if(!ge(h,200)){if(h===423){r._emitHttpError(n,l,"tus: upload is currently locked; retry later");return}if(ge(h,400)&&r._removeFromUrlStorage(),!r.options.endpoint){r._emitHttpError(n,l,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}r.url=null,r._createUpload();return}var b=parseInt(l.getHeader("Upload-Offset"),10);if(Number.isNaN(b)){r._emitHttpError(n,l,"tus: invalid or missing offset value");return}var d=parseInt(l.getHeader("Upload-Length"),10);if(Number.isNaN(d)&&!r.options.uploadLengthDeferred&&r.options.protocol===Ge){r._emitHttpError(n,l,"tus: invalid or missing length value");return}typeof r.options.onUploadUrlAvailable=="function"&&r.options.onUploadUrlAvailable(),r._saveUploadInUrlStorage().then(function(){if(b===d){r._emitProgress(d,d),r._emitSuccess();return}r._offset=b,r._performUpload()})}).catch(function(l){r._emitHttpError(n,null,"tus: failed to resume upload",l)})}},{key:"_performUpload",value:function(){var r=this;if(!this._aborted){var n;this.options.overridePatchMethod?(n=this._openRequest("POST",this.url),n.setHeader("X-HTTP-Method-Override","PATCH")):n=this._openRequest("PATCH",this.url),n.setHeader("Upload-Offset",this._offset);var a=this._addChunkToRequest(n);a.then(function(l){if(!ge(l.getStatus(),200)){r._emitHttpError(n,l,"tus: unexpected response while uploading chunk");return}r._handleUploadResponse(n,l)}).catch(function(l){r._aborted||r._emitHttpError(n,null,"tus: failed to upload chunk at offset ".concat(r._offset),l)})}}},{key:"_addChunkToRequest",value:function(r){var n=this,a=this._offset,l=this._offset+this.options.chunkSize;return r.setProgressHandler(function(h){n._emitProgress(a+h,n._size)}),r.setHeader("Content-Type","application/offset+octet-stream"),(l===1/0||l>this._size)&&!this.options.uploadLengthDeferred&&(l=this._size),this._source.slice(a,l).then(function(h){var b=h.value,d=h.done,_=b&&b.size?b.size:0;n.options.uploadLengthDeferred&&d&&(n._size=n._offset+_,r.setHeader("Upload-Length",n._size));var P=n._offset+_;return!n.options.uploadLengthDeferred&&d&&P!==n._size?Promise.reject(new Error("upload was configured with a size of ".concat(n._size," bytes, but the source is done after ").concat(P," bytes"))):b===null?n._sendRequest(r):(n.options.protocol===Fe&&r.setHeader("Upload-Complete",d?"?1":"?0"),n._emitProgress(n._offset,n._size),n._sendRequest(r,b))})}},{key:"_handleUploadResponse",value:function(r,n){var a=parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){this._emitHttpError(r,n,"tus: invalid or missing offset value");return}if(this._emitProgress(a,this._size),this._emitChunkComplete(a-this._offset,a,this._size),this._offset=a,a===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(r,n){var a=yt(r,n,this.options);return this._req=a,a}},{key:"_removeFromUrlStorage",value:function(){var r=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(n){r._emitError(n)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var r=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var n={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?n.parallelUploadUrls=this._parallelUploadUrls:n.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,n).then(function(a){r._urlStorageKey=a})}},{key:"_sendRequest",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return mt(r,n,this.options)}}],[{key:"terminate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=yt("DELETE",r,n);return mt(a,null,n).then(function(l){if(l.getStatus()!==204)throw new De("tus: unexpected response while terminating upload",null,a,l)}).catch(function(l){if(l instanceof De||(l=new De("tus: failed to terminate upload",l,a,null)),!vt(l,0,n))throw l;var h=n.retryDelays[0],b=n.retryDelays.slice(1),d=ve(ve({},n),{},{retryDelays:b});return new Promise(function(_){return setTimeout(_,h)}).then(function(){return e.terminate(r,d)})})}}]),e}();function dt(e){return Object.entries(e).map(function(t){var r=lt(t,2),n=r[0],a=r[1];return"".concat(n," ").concat(Ft.encode(String(a)))}).join(",")}function ge(e,t){return e>=t&&e<t+100}function yt(e,t,r){var n=r.httpStack.createRequest(e,t);r.protocol===Fe?n.setHeader("Upload-Draft-Interop-Version","5"):n.setHeader("Tus-Resumable","1.0.0");var a=r.headers||{};if(Object.entries(a).forEach(function(h){var b=lt(h,2),d=b[0],_=b[1];n.setHeader(d,_)}),r.addRequestId){var l=$t();n.setHeader("X-Request-ID",l)}return n}function mt(e,t,r){return Ke.apply(this,arguments)}function Ke(){return Ke=Jt(Me().mark(function e(t,r,n){var a;return Me().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(typeof n.onBeforeRequest!="function"){h.next=3;break}return h.next=3,n.onBeforeRequest(t);case 3:return h.next=5,t.send(r);case 5:if(a=h.sent,typeof n.onAfterResponse!="function"){h.next=9;break}return h.next=9,n.onAfterResponse(t,a);case 9:return h.abrupt("return",a);case 10:case"end":return h.stop()}},e)})),Ke.apply(this,arguments)}function lr(){var e=!0;return typeof navigator!="undefined"&&navigator.onLine===!1&&(e=!1),e}function vt(e,t,r){return r.retryDelays==null||t>=r.retryDelays.length||e.originalRequest==null?!1:r&&typeof r.onShouldRetry=="function"?r.onShouldRetry(e,t,r):gt(e)}function gt(e){var t=e.originalResponse?e.originalResponse.getStatus():0;return(!ge(t,400)||t===409||t===423)&&lr()}function bt(e,t){return new(Bt())(t,e).toString()}function sr(e,t){for(var r=Math.floor(e/t),n=[],a=0;a<t;a++)n.push({start:r*a,end:r*(a+1)});return n[t-1].end=e,n}ht.defaultOptions=ur;const Xe=ht;function Re(e){"@babel/helpers - typeof";return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(e)}function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pr(n.key),n)}}function cr(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pr(e){var t=hr(e,"string");return Re(t)=="symbol"?t:String(t)}function hr(e,t){if(Re(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Re(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dr=function(){function e(){fr(this,e)}return cr(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(r){return Promise.resolve([])}},{key:"removeUpload",value:function(r){return Promise.resolve()}},{key:"addUpload",value:function(r,n){return Promise.resolve(null)}}]),e}();function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vr(n.key),n)}}function mr(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vr(e){var t=gr(e,"string");return je(t)=="symbol"?t:String(t)}function gr(e,t){if(je(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(je(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ye=!1;try{Ye="localStorage"in window;var We="tusSupport",St=localStorage.getItem(We);localStorage.setItem(We,St),St===null&&localStorage.removeItem(We)}catch(e){if(e.code===e.SECURITY_ERR||e.code===e.QUOTA_EXCEEDED_ERR)Ye=!1;else throw e}var br=Ye,_r=function(){function e(){yr(this,e)}return mr(e,[{key:"findAllUploads",value:function(){var r=this._findEntries("tus::");return Promise.resolve(r)}},{key:"findUploadsByFingerprint",value:function(r){var n=this._findEntries("tus::".concat(r,"::"));return Promise.resolve(n)}},{key:"removeUpload",value:function(r){return localStorage.removeItem(r),Promise.resolve()}},{key:"addUpload",value:function(r,n){var a=Math.round(Math.random()*1e12),l="tus::".concat(r,"::").concat(a);return localStorage.setItem(l,JSON.stringify(n)),Promise.resolve(l)}},{key:"_findEntries",value:function(r){for(var n=[],a=0;a<localStorage.length;a++){var l=localStorage.key(a);if(l.indexOf(r)===0)try{var h=JSON.parse(localStorage.getItem(l));h.urlStorageKey=l,n.push(h)}catch(b){}}return n}}]),e}();function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wr(n.key),n)}}function Ve(e,t,r){return t&&Ut(e.prototype,t),r&&Ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wr(e){var t=Sr(e,"string");return ke(t)=="symbol"?t:String(t)}function Sr(e,t){if(ke(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ke(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ur=function(){function e(){Ze(this,e)}return Ve(e,[{key:"createRequest",value:function(r,n){return new xr(r,n)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),xr=function(){function e(t,r){Ze(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return Ve(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(r,n){this._xhr.setRequestHeader(r,n),this._headers[r]=n}},{key:"getHeader",value:function(r){return this._headers[r]}},{key:"setProgressHandler",value:function(r){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(n){n.lengthComputable&&r(n.loaded)})}},{key:"send",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(a,l){r._xhr.onload=function(){a(new Or(r._xhr))},r._xhr.onerror=function(h){l(h)},r._xhr.send(n)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Or=function(){function e(t){Ze(this,e),this._xhr=t}return Ve(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(r){return this._xhr.getResponseHeader(r)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Er=function(){return typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};const xt=Er;function Pr(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var a=n.response;t(a)},n.onerror=function(a){r(a)},n.open("GET",e),n.send()})}var Rr=function(){return typeof window!="undefined"&&(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined")};const jr=Rr;function kr(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){var a=new Uint8Array(n.result);t({value:a})},n.onerror=function(a){r(a)},n.readAsArrayBuffer(e)})}function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function Ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tr(n.key),n)}}function Lr(e,t,r){return t&&Ot(e.prototype,t),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tr(e){var t=Cr(e,"string");return Ae(t)=="symbol"?t:String(t)}function Cr(e,t){if(Ae(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ae(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Et=function(){function e(t){Ar(this,e),this._file=t,this.size=t.size}return Lr(e,[{key:"slice",value:function(r,n){if(jr())return kr(this._file.slice(r,n));var a=this._file.slice(r,n),l=n>=this.size;return Promise.resolve({value:a,done:l})}},{key:"close",value:function(){}}]),e}();function Le(e){"@babel/helpers - typeof";return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(e)}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fr(n.key),n)}}function Dr(e,t,r){return t&&Pt(e.prototype,t),r&&Pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fr(e){var t=Nr(e,"string");return Le(t)=="symbol"?t:String(t)}function Nr(e,t){if(Le(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Le(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rt(e){return e===void 0?0:e.size!==void 0?e.size:e.length}function Br(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}var zr=function(){function e(t){Ir(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return Dr(e,[{key:"slice",value:function(r,n){return r<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(r,n)}},{key:"_readUntilEnoughDataOrDone",value:function(r,n){var a=this,l=n<=this._bufferOffset+Rt(this._buffer);if(this._done||l){var h=this._getDataFromBuffer(r,n),b=h==null?this._done:!1;return Promise.resolve({value:h,done:b})}return this._reader.read().then(function(d){var _=d.value,P=d.done;return P?a._done=!0:a._buffer===void 0?a._buffer=_:a._buffer=Br(a._buffer,_),a._readUntilEnoughDataOrDone(r,n)})}},{key:"_getDataFromBuffer",value:function(r,n){r>this._bufferOffset&&(this._buffer=this._buffer.slice(r-this._bufferOffset),this._bufferOffset=r);var a=Rt(this._buffer)===0;return this._done&&a?null:this._buffer.slice(0,n-r)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function se(e){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(e)}function $e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(u,o,i){u[o]=i.value},l=typeof Symbol=="function"?Symbol:{},h=l.iterator||"@@iterator",b=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function _(u,o,i){return Object.defineProperty(u,o,{value:i,enumerable:!0,configurable:!0,writable:!0}),u[o]}try{_({},"")}catch(u){_=function(i,s,p){return i[s]=p}}function P(u,o,i,s){var p=o&&o.prototype instanceof ee?o:ee,f=Object.create(p.prototype),w=new he(s||[]);return a(f,"_invoke",{value:Qe(u,i,w)}),f}function F(u,o,i){try{return{type:"normal",arg:u.call(o,i)}}catch(s){return{type:"throw",arg:s}}}t.wrap=P;var ie="suspendedStart",Te="suspendedYield",fe="executing",J="completed",A={};function ee(){}function W(){}function I(){}var V={};_(V,h,function(){return this});var ce=Object.getPrototypeOf,te=ce&&ce(ce(de([])));te&&te!==r&&n.call(te,h)&&(V=te);var Z=I.prototype=ee.prototype=Object.create(V);function Ce(u){["next","throw","return"].forEach(function(o){_(u,o,function(i){return this._invoke(o,i)})})}function re(u,o){function i(p,f,w,E){var R=F(u[p],u,f);if(R.type!=="throw"){var z=R.arg,D=z.value;return D&&se(D)=="object"&&n.call(D,"__await")?o.resolve(D.__await).then(function(H){i("next",H,w,E)},function(H){i("throw",H,w,E)}):o.resolve(D).then(function(H){z.value=H,w(z)},function(H){return i("throw",H,w,E)})}E(R.arg)}var s;a(this,"_invoke",{value:function(f,w){function E(){return new o(function(R,z){i(f,w,R,z)})}return s=s?s.then(E,E):E()}})}function Qe(u,o,i){var s=ie;return function(p,f){if(s===fe)throw new Error("Generator is already running");if(s===J){if(p==="throw")throw f;return{value:e,done:!0}}for(i.method=p,i.arg=f;;){var w=i.delegate;if(w){var E=Ie(w,i);if(E){if(E===A)continue;return E}}if(i.method==="next")i.sent=i._sent=i.arg;else if(i.method==="throw"){if(s===ie)throw s=J,i.arg;i.dispatchException(i.arg)}else i.method==="return"&&i.abrupt("return",i.arg);s=fe;var R=F(u,o,i);if(R.type==="normal"){if(s=i.done?J:Te,R.arg===A)continue;return{value:R.arg,done:i.done}}R.type==="throw"&&(s=J,i.method="throw",i.arg=R.arg)}}}function Ie(u,o){var i=o.method,s=u.iterator[i];if(s===e)return o.delegate=null,i==="throw"&&u.iterator.return&&(o.method="return",o.arg=e,Ie(u,o),o.method==="throw")||i!=="return"&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),A;var p=F(s,u.iterator,o.arg);if(p.type==="throw")return o.method="throw",o.arg=p.arg,o.delegate=null,A;var f=p.arg;return f?f.done?(o[u.resultName]=f.value,o.next=u.nextLoc,o.method!=="return"&&(o.method="next",o.arg=e),o.delegate=null,A):f:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,A)}function et(u){var o={tryLoc:u[0]};1 in u&&(o.catchLoc=u[1]),2 in u&&(o.finallyLoc=u[2],o.afterLoc=u[3]),this.tryEntries.push(o)}function pe(u){var o=u.completion||{};o.type="normal",delete o.arg,u.completion=o}function he(u){this.tryEntries=[{tryLoc:"root"}],u.forEach(et,this),this.reset(!0)}function de(u){if(u||u===""){var o=u[h];if(o)return o.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length)){var i=-1,s=function p(){for(;++i<u.length;)if(n.call(u,i))return p.value=u[i],p.done=!1,p;return p.value=e,p.done=!0,p};return s.next=s}}throw new TypeError(se(u)+" is not iterable")}return W.prototype=I,a(Z,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:W,configurable:!0}),W.displayName=_(I,d,"GeneratorFunction"),t.isGeneratorFunction=function(u){var o=typeof u=="function"&&u.constructor;return!!o&&(o===W||(o.displayName||o.name)==="GeneratorFunction")},t.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,I):(u.__proto__=I,_(u,d,"GeneratorFunction")),u.prototype=Object.create(Z),u},t.awrap=function(u){return{__await:u}},Ce(re.prototype),_(re.prototype,b,function(){return this}),t.AsyncIterator=re,t.async=function(u,o,i,s,p){p===void 0&&(p=Promise);var f=new re(P(u,o,i,s),p);return t.isGeneratorFunction(o)?f:f.next().then(function(w){return w.done?w.value:f.next()})},Ce(Z),_(Z,d,"Generator"),_(Z,h,function(){return this}),_(Z,"toString",function(){return"[object Generator]"}),t.keys=function(u){var o=Object(u),i=[];for(var s in o)i.push(s);return i.reverse(),function p(){for(;i.length;){var f=i.pop();if(f in o)return p.value=f,p.done=!1,p}return p.done=!0,p}},t.values=de,he.prototype={constructor:he,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(pe),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function s(z,D){return w.type="throw",w.arg=o,i.next=z,D&&(i.method="next",i.arg=e),!!D}for(var p=this.tryEntries.length-1;p>=0;--p){var f=this.tryEntries[p],w=f.completion;if(f.tryLoc==="root")return s("end");if(f.tryLoc<=this.prev){var E=n.call(f,"catchLoc"),R=n.call(f,"finallyLoc");if(E&&R){if(this.prev<f.catchLoc)return s(f.catchLoc,!0);if(this.prev<f.finallyLoc)return s(f.finallyLoc)}else if(E){if(this.prev<f.catchLoc)return s(f.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return s(f.finallyLoc)}}}},abrupt:function(o,i){for(var s=this.tryEntries.length-1;s>=0;--s){var p=this.tryEntries[s];if(p.tryLoc<=this.prev&&n.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var f=p;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var w=f?f.completion:{};return w.type=o,w.arg=i,f?(this.method="next",this.next=f.finallyLoc,A):this.complete(w)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),A},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.finallyLoc===o)return this.complete(s.completion,s.afterLoc),pe(s),A}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc===o){var p=s.completion;if(p.type==="throw"){var f=p.arg;pe(s)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(o,i,s){return this.delegate={iterator:de(o),resultName:i,nextLoc:s},this.method==="next"&&(this.arg=e),A}},t}function jt(e,t,r,n,a,l,h){try{var b=e[l](h),d=b.value}catch(_){r(_);return}b.done?t(d):Promise.resolve(d).then(n,a)}function Hr(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function h(d){jt(l,n,a,h,b,"next",d)}function b(d){jt(l,n,a,h,b,"throw",d)}h(void 0)})}}function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gr(n.key),n)}}function Mr(e,t,r){return t&&kt(e.prototype,t),r&&kt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gr(e){var t=Kr(e,"string");return se(t)=="symbol"?t:String(t)}function Kr(e,t){if(se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xr=function(){function e(){qr(this,e)}return Mr(e,[{key:"openFile",value:function(){var t=Hr($e().mark(function n(a,l){var h;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(xt()&&a&&typeof a.uri!="undefined")){d.next=11;break}return d.prev=1,d.next=4,Pr(a.uri);case 4:return h=d.sent,d.abrupt("return",new Et(h));case 8:throw d.prev=8,d.t0=d.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(d.t0));case 11:if(!(typeof a.slice=="function"&&typeof a.size!="undefined")){d.next=13;break}return d.abrupt("return",Promise.resolve(new Et(a)));case 13:if(typeof a.read!="function"){d.next=18;break}if(l=Number(l),Number.isFinite(l)){d.next=17;break}return d.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return d.abrupt("return",Promise.resolve(new zr(a,l)));case 18:return d.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return d.stop()}},n,null,[[1,8]])}));function r(n,a){return t.apply(this,arguments)}return r}()}]),e}();function Yr(e,t){return xt()?Promise.resolve(Wr(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}function Wr(e,t){var r=e.exif?Zr(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}function Zr(e){var t=0;if(e.length===0)return t;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n,t&=t}return t}function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ct(n.key),n)}}function $r(e,t,r){return t&&At(e.prototype,t),r&&At(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jr(e,t,r){return t=Ne(t),Qr(e,Lt()?Reflect.construct(t,r||[],Ne(e).constructor):t.apply(e,r))}function Qr(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}function en(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Lt=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ne(e)}function tn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Je(e,t)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(r),!0).forEach(function(n){rn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rn(e,t,r){return t=Ct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ct(e){var t=nn(e,"string");return be(t)=="symbol"?t:String(t)}function nn(e,t){if(be(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(be(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var It=_e(_e({},Xe.defaultOptions),{},{httpStack:new Ur,fileReader:new Xr,urlStorage:br?new _r:new dr,fingerprint:Yr}),on=function(e){tn(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vr(this,t),n=_e(_e({},It),n),Jr(this,t,[r,n])}return $r(t,null,[{key:"terminate",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=_e(_e({},It),a),Xe.terminate(n,a)}}]),t}(Xe),ln=typeof XMLHttpRequest=="function"&&typeof Blob=="function"&&typeof Blob.prototype.slice=="function"},"../../../node_modules/.pnpm/url-parse@1.5.10/node_modules/url-parse/index.js":(Q,$,j)=>{"use strict";var N=j("../../../node_modules/.pnpm/requires-port@1.0.0/node_modules/requires-port/index.js"),G=j("../../../node_modules/.pnpm/querystringify@2.2.0/node_modules/querystringify/index.js"),B=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,K=/[\n\r\t]/g,ne=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,L=/:\d+$/,C=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,q=/^[a-zA-Z]:/;function T(y){return(y||"").toString().replace(B,"")}var U=[["#","hash"],["?","query"],function(v,m){return X(m.protocol)?v.replace(/\\/g,"/"):v},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],oe={hash:1,query:1};function we(y){var v;typeof window!="undefined"?v=window:typeof j.g!="undefined"?v=j.g:typeof self!="undefined"?v=self:v={};var m=v.location||{};y=y||m;var c={},x=typeof y,S;if(y.protocol==="blob:")c=new M(unescape(y.pathname),{});else if(x==="string"){c=new M(y,{});for(S in oe)delete c[S]}else if(x==="object"){for(S in y)S in oe||(c[S]=y[S]);c.slashes===void 0&&(c.slashes=ne.test(y.href))}return c}function X(y){return y==="file:"||y==="ftp:"||y==="http:"||y==="https:"||y==="ws:"||y==="wss:"}function Se(y,v){y=T(y),y=y.replace(K,""),v=v||{};var m=C.exec(y),c=m[1]?m[1].toLowerCase():"",x=!!m[2],S=!!m[3],k=0,O;return x?S?(O=m[2]+m[3]+m[4],k=m[2].length+m[3].length):(O=m[2]+m[4],k=m[2].length):S?(O=m[3]+m[4],k=m[3].length):O=m[4],c==="file:"?k>=2&&(O=O.slice(2)):X(c)?O=m[4]:c?x&&(O=O.slice(2)):k>=2&&X(v.protocol)&&(O=m[4]),{protocol:c,slashes:x||X(c),slashesCount:k,rest:O}}function Ue(y,v){if(y==="")return v;for(var m=(v||"/").split("/").slice(0,-1).concat(y.split("/")),c=m.length,x=m[c-1],S=!1,k=0;c--;)m[c]==="."?m.splice(c,1):m[c]===".."?(m.splice(c,1),k++):k&&(c===0&&(S=!0),m.splice(c,1),k--);return S&&m.unshift(""),(x==="."||x==="..")&&m.push(""),m.join("/")}function M(y,v,m){if(y=T(y),y=y.replace(K,""),!(this instanceof M))return new M(y,v,m);var c,x,S,k,O,Y,ae=U.slice(),xe=typeof v,g=this,Oe=0;for(xe!=="object"&&xe!=="string"&&(m=v,v=null),m&&typeof m!="function"&&(m=G.parse),v=we(v),x=Se(y||"",v),c=!x.protocol&&!x.slashes,g.slashes=x.slashes||c&&v.slashes,g.protocol=x.protocol||v.protocol||"",y=x.rest,(x.protocol==="file:"&&(x.slashesCount!==2||q.test(y))||!x.slashes&&(x.protocol||x.slashesCount<2||!X(g.protocol)))&&(ae[3]=[/(.*)/,"pathname"]);Oe<ae.length;Oe++){if(k=ae[Oe],typeof k=="function"){y=k(y,g);continue}S=k[0],Y=k[1],S!==S?g[Y]=y:typeof S=="string"?(O=S==="@"?y.lastIndexOf(S):y.indexOf(S),~O&&(typeof k[2]=="number"?(g[Y]=y.slice(0,O),y=y.slice(O+k[2])):(g[Y]=y.slice(O),y=y.slice(0,O)))):(O=S.exec(y))&&(g[Y]=O[1],y=y.slice(0,O.index)),g[Y]=g[Y]||c&&k[3]&&v[Y]||"",k[4]&&(g[Y]=g[Y].toLowerCase())}m&&(g.query=m(g.query)),c&&v.slashes&&g.pathname.charAt(0)!=="/"&&(g.pathname!==""||v.pathname!=="")&&(g.pathname=Ue(g.pathname,v.pathname)),g.pathname.charAt(0)!=="/"&&X(g.protocol)&&(g.pathname="/"+g.pathname),N(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(O=g.auth.indexOf(":"),~O?(g.username=g.auth.slice(0,O),g.username=encodeURIComponent(decodeURIComponent(g.username)),g.password=g.auth.slice(O+1),g.password=encodeURIComponent(decodeURIComponent(g.password))):g.username=encodeURIComponent(decodeURIComponent(g.auth)),g.auth=g.password?g.username+":"+g.password:g.username),g.origin=g.protocol!=="file:"&&X(g.protocol)&&g.host?g.protocol+"//"+g.host:"null",g.href=g.toString()}function ye(y,v,m){var c=this;switch(y){case"query":typeof v=="string"&&v.length&&(v=(m||G.parse)(v)),c[y]=v;break;case"port":c[y]=v,N(v,c.protocol)?v&&(c.host=c.hostname+":"+v):(c.host=c.hostname,c[y]="");break;case"hostname":c[y]=v,c.port&&(v+=":"+c.port),c.host=v;break;case"host":c[y]=v,L.test(v)?(v=v.split(":"),c.port=v.pop(),c.hostname=v.join(":")):(c.hostname=v,c.port="");break;case"protocol":c.protocol=v.toLowerCase(),c.slashes=!m;break;case"pathname":case"hash":if(v){var x=y==="pathname"?"/":"#";c[y]=v.charAt(0)!==x?x+v:v}else c[y]=v;break;case"username":case"password":c[y]=encodeURIComponent(v);break;case"auth":var S=v.indexOf(":");~S?(c.username=v.slice(0,S),c.username=encodeURIComponent(decodeURIComponent(c.username)),c.password=v.slice(S+1),c.password=encodeURIComponent(decodeURIComponent(c.password))):c.username=encodeURIComponent(decodeURIComponent(v))}for(var k=0;k<U.length;k++){var O=U[k];O[4]&&(c[O[1]]=c[O[1]].toLowerCase())}return c.auth=c.password?c.username+":"+c.password:c.username,c.origin=c.protocol!=="file:"&&X(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString(),c}function Be(y){(!y||typeof y!="function")&&(y=G.stringify);var v,m=this,c=m.host,x=m.protocol;x&&x.charAt(x.length-1)!==":"&&(x+=":");var S=x+(m.protocol&&m.slashes||X(m.protocol)?"//":"");return m.username?(S+=m.username,m.password&&(S+=":"+m.password),S+="@"):m.password?(S+=":"+m.password,S+="@"):m.protocol!=="file:"&&X(m.protocol)&&!c&&m.pathname!=="/"&&(S+="@"),(c[c.length-1]===":"||L.test(m.hostname)&&!m.port)&&(c+=":"),S+=c+m.pathname,v=typeof m.query=="object"?y(m.query):m.query,v&&(S+=v.charAt(0)!=="?"?"?"+v:v),m.hash&&(S+=m.hash),S}M.prototype={set:ye,toString:Be},M.extractProtocol=Se,M.location=we,M.trimLeft=T,M.qs=G,Q.exports=M}}]);})();
