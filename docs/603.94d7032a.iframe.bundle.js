"use strict";(()=>{var mt=Object.defineProperty;var Rt=(f,E,s)=>E in f?mt(f,E,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[E]=s;var Z=(f,E,s)=>(Rt(f,typeof E!="symbol"?E+"":E,s),s);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[603],{"../analytics/index.jsx":(f,E,s)=>{s.d(E,{Z:()=>I});var u=s("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),T=s.n(u);const d=T()("dops:analytics");let p,r;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;function C(e,o){let c="";if(typeof e=="object"){for(const a in e)c+="&x_"+encodeURIComponent(a)+"="+encodeURIComponent(e[a]);d("Bumping stats %o",e)}else c="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(o),d('Bumping stat "%s" in group "%s"',o,e);return c}function R(e,o){let c="";if(typeof e=="object"){for(const a in e)c+="&"+encodeURIComponent(a)+"="+encodeURIComponent(e[a]);d("Built stats %o",e)}else c="&"+encodeURIComponent(e)+"="+encodeURIComponent(o),d('Built stat "%s" in group "%s"',o,e);return c}const i={initialize:function(e,o,c){i.setUser(e,o),i.setSuperProps(c),i.identifyUser()},setGoogleAnalyticsEnabled:function(e,o=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=o},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,o){r={ID:e,username:o}},setSuperProps:function(e){p=e},assignSuperProps:function(e){p=Object.assign(p||{},e)},mc:{bumpStat:function(e,o){const c=C(e,o);i.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+c+"&t="+Math.random())},bumpStatWithPageView:function(e,o){const c=R(e,o);i.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+c+"&t="+Math.random())}},pageView:{record:function(e,o){i.tracks.recordPageView(e),i.ga.recordPageView(e,o)}},purchase:{record:function(e,o,c,a,l,S,g){i.ga.recordPurchase(e,o,c,a,l,S,g)}},tracks:{recordEvent:function(e,o){if(o=o||{},e.indexOf("akismet_")!==0&&e.indexOf("jetpack_")!==0){d('- Event name must be prefixed by "akismet_" or "jetpack_"');return}p&&(d("- Super Props: %o",p),o=Object.assign(o,p)),d('Record event "%s" called with props %s',e,JSON.stringify(o)),window._tkq.push(["recordEvent",e,o])},recordJetpackClick:function(e){const o=typeof e=="object"?e:{target:e};i.tracks.recordEvent("jetpack_wpa_click",o)},recordPageView:function(e){i.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){d("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};i.ga.initialized||(r&&(e={userId:"u-"+r.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),i.ga.initialized=!0)},recordPageView:function(e,o){i.ga.initialize(),d("Recording Page View ~ [URL: "+e+"] [Title: "+o+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:o}))},recordEvent:function(e,o,c,a){i.ga.initialize();let l="Recording Event ~ [Category: "+e+"] [Action: "+o+"]";typeof c!="undefined"&&(l+=" [Option Label: "+c+"]"),typeof a!="undefined"&&(l+=" [Option Value: "+a+"]"),d(l),this.googleAnalyticsEnabled&&window.ga("send","event",e,o,c,a)},recordPurchase:function(e,o,c,a,l,S,g){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:a,currency:g}),window.ga("ecommerce:addItem",{id:e,name:o,sku:c,price:l,quantity:S}),window.ga("ecommerce:send")}},identifyUser:function(){r&&window._tkq.push(["identifyUser",r.ID,r.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},I=i},"../connection/components/use-connection/index.jsx":(f,E,s)=>{s.d(E,{Z:()=>R});var u=s("../api/index.jsx"),T=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),d=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),p=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),r=s("../connection/state/store.jsx");const C=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},R=({registrationNonce:i=C.registrationNonce,apiRoot:I=C.apiRoot,apiNonce:e=C.apiNonce,redirectUri:o,autoTrigger:c,from:a,skipUserConnection:l}={})=>{const{registerSite:S,connectUser:g,refreshConnectedPlugins:h}=(0,T.Z)(r.t),P=(0,d.Z)(m=>m(r.t).getRegistrationError()),{siteIsRegistering:y,userIsConnecting:O,userConnectionData:N,connectedPlugins:A,connectionErrors:w,isRegistered:U,isUserConnected:k,hasConnectedOwner:v,isOfflineMode:M}=(0,d.Z)(m=>({siteIsRegistering:m(r.t).getSiteIsRegistering(),userIsConnecting:m(r.t).getUserIsConnecting(),userConnectionData:m(r.t).getUserConnectionData(),connectedPlugins:m(r.t).getConnectedPlugins(),connectionErrors:m(r.t).getConnectionErrors(),isOfflineMode:m(r.t).getIsOfflineMode(),...m(r.t).getConnectionStatus()})),D=()=>{if(l){if(o)return window.location=o,Promise.resolve(o)}else return g({from:a,redirectUri:o});return Promise.resolve()},L=m=>(m&&m.preventDefault(),U?D():S({registrationNonce:i,redirectUri:o}).then(()=>D()));return(0,p.useEffect)(()=>{u.ZP.setApiRoot(I),u.ZP.setApiNonce(e)},[I,e]),(0,p.useEffect)(()=>{c&&!y&&!O&&L()},[]),{handleRegisterSite:L,handleConnectUser:D,refreshConnectedPlugins:h,isRegistered:U,isUserConnected:k,siteIsRegistering:y,userIsConnecting:O,registrationError:P,userConnectionData:N,hasConnectedOwner:v,connectedPlugins:A,connectionErrors:w,isOfflineMode:M}}},"../connection/state/store.jsx":(f,E,s)=>{s.d(E,{t:()=>j});var u=s("../api/index.jsx");const T="SET_CONNECTION_STATUS",d="SET_CONNECTION_STATUS_IS_FETCHING",p="FETCH_CONNECTION_STATUS",r="SET_SITE_IS_REGISTERING",C="SET_USER_IS_CONNECTING",R="SET_REGISTRATION_ERROR",i="CLEAR_REGISTRATION_ERROR",I="REGISTER_SITE",e="SET_AUTHORIZATION_URL",o="CONNECT_USER",c="DISCONNECT_USER_SUCCESS",a="FETCH_AUTHORIZATION_URL",l="SET_CONNECTED_PLUGINS",S="REFRESH_CONNECTED_PLUGINS",g="SET_CONNECTION_ERRORS",h="SET_IS_OFFLINE_MODE",P=t=>({type:T,connectionStatus:t}),y=t=>({type:d,isFetching:t}),O=()=>({type:p}),N=t=>({type:r,isRegistering:t}),A=t=>({type:C,isConnecting:t}),w=()=>({type:c}),U=t=>({type:R,registrationError:t}),k=()=>({type:i}),v=t=>({type:e,authorizationUrl:t}),M=t=>({type:a,redirectUri:t}),D=t=>({type:l,connectedPlugins:t}),L=t=>({type:g,connectionErrors:t}),m=t=>({type:h,isOfflineMode:t});function*W({from:t,redirectFunc:n,redirectUri:_}={}){yield A(!0),yield{type:o,from:t,redirectFunc:n,redirectUri:_}}function*V({registrationNonce:t,redirectUri:n}){yield k(),yield N(!0);try{const _=yield{type:I,registrationNonce:t,redirectUri:n};return yield P({isRegistered:!0}),yield v(_.authorizeUrl),yield N(!1),Promise.resolve(_)}catch(_){return yield U(_),yield N(!1),Promise.reject(_)}}const B={setConnectionStatus:P,setConnectionStatusIsFetching:y,fetchConnectionStatus:O,fetchAuthorizationUrl:M,setSiteIsRegistering:N,setUserIsConnecting:A,setRegistrationError:U,clearRegistrationError:k,setAuthorizationUrl:v,registerSite:V,connectUser:W,disconnectUserSuccess:w,setConnectedPlugins:D,refreshConnectedPlugins:()=>async({dispatch:t})=>await new Promise(n=>u.ZP.fetchConnectedPlugins().then(_=>{t(D(_)),n(_)})),setConnectionErrors:L,setIsOfflineMode:m};var Q=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const j="jetpack-connection",J=({registrationNonce:t,redirectUri:n})=>u.ZP.registerSite(t,n),$=(0,Q.R)(({resolveSelect:t})=>({from:n,redirectFunc:_,redirectUri:K}={})=>new Promise((Ct,It)=>{t(j).getAuthorizationUrl(K).then(Y=>{const gt=_||(St=>window.location.assign(St)),z=new URL(Y);n&&z.searchParams.set("from",encodeURIComponent(n));const G=z.toString();gt(G),Ct(G)}).catch(Y=>{It(Y)})})),X={FETCH_AUTHORIZATION_URL:({redirectUri:t})=>u.ZP.fetchAuthorizationUrl(t),REGISTER_SITE:J,CONNECT_USER:$};var F=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const q=(t={},n)=>{switch(n.type){case T:return{...t,...n.connectionStatus};case c:return{...t,isUserConnected:!1}}return t},tt=(t={},n)=>{switch(n.type){case l:return n.connectedPlugins}return t},et=(t=!1,n)=>{switch(n.type){case d:return n.isFetching}return t},nt=(t=!1,n)=>{switch(n.type){case r:return n.isRegistering}return t},ot=(t=!1,n)=>{switch(n.type){case C:return n.isConnecting}return t},st=(t,n)=>{switch(n.type){case i:return!1;case R:return n.registrationError;default:return t}},ct=(t,n)=>{switch(n.type){case e:return n.authorizationUrl;default:return t}},it=(t,n)=>{switch(n.type){default:return t}},rt=(t={},n)=>{switch(n.type){case g:return n.connectionErrors}return t},at=(t=!1,n)=>{switch(n.type){case h:return n.isConnecting}return t},dt=(0,F.UY)({connectionStatus:q,connectionStatusIsFetching:et,siteIsRegistering:nt,userIsConnecting:ot,registrationError:st,authorizationUrl:ct,userConnectionData:it,connectedPlugins:tt,connectionErrors:rt,isOfflineMode:at});var ut=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),_t=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const lt={...{getAuthorizationUrl:{isFulfilled:(t,...n)=>{const _=!!t.authorizationUrl,K=(0,ut.Y)(j).hasFinishedResolution("getAuthorizationUrl",n);return _&&!K&&(0,_t.W)(j).finishResolution("getAuthorizationUrl",n),_},*fulfill(t){const n=yield B.fetchAuthorizationUrl(t);yield B.setAuthorizationUrl(n.authorizeUrl)}}}},Et={...{getConnectionStatus:t=>t.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:t=>t.siteIsRegistering||!1,getUserIsConnecting:t=>t.userIsConnecting||!1,getRegistrationError:t=>t.registrationError||!1,getAuthorizationUrl:t=>t.authorizationUrl||!1,getUserConnectionData:t=>t.userConnectionData||!1,getConnectedPlugins:t=>t.connectedPlugins||[],getConnectionErrors:t=>t.connectionErrors||[],getIsOfflineMode:t=>t.isOfflineMode||!1,getWpcomUser:t=>{var n,_;return(_=(n=t==null?void 0:t.userConnectionData)==null?void 0:n.currentUser)==null?void 0:_.wpcomUser},getBlogId:t=>{var n,_;return(_=(n=t==null?void 0:t.userConnectionData)==null?void 0:n.currentUser)==null?void 0:_.blogId}}};var pt=s("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const x=class{static mayBeInit(n,_){x.store===null&&(x.store=(0,pt.Z)(n,_),(0,F.z2)(x.store))}};let b=x;Z(b,"store",null);const Tt=b,H=window.JP_CONNECTION_INITIAL_STATE;H||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Tt.mayBeInit(j,{__experimentalUseThunks:!0,reducer:dt,actions:B,selectors:Et,resolvers:lt,controls:X,initialState:H||{}})},"../../packages/my-jetpack/_inc/hooks/use-analytics/index.js":(f,E,s)=>{s.d(E,{Z:()=>r});var u=s("../analytics/index.jsx"),T=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),d=s("../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.js");const r=()=>{var A;const{isUserConnected:C,connectedPlugins:R,userConnectionData:i={}}=(0,d.Z)(),{login:I,ID:e}=((A=i.currentUser)==null?void 0:A.wpcomUser)||{};(0,T.useEffect)(()=>{C&&e&&I&&u.Z.initialize(e,I)},[e,C,I]);const o=Object.keys(R||{}).sort().join(",").replaceAll("jetpack-",""),{clearedIdentity:c,ga:a,mc:l,pageView:S,purchase:g,setGoogleAnalyticsEnabled:h,setMcAnalyticsEnabled:P,setProperties:y,tracks:O}=u.Z,N=(0,T.useCallback)((w,U)=>{var k;O.recordEvent(w,{...U,version:(k=window==null?void 0:window.myJetpackInitialState)==null?void 0:k.myJetpackVersion,referring_plugins:o})},[]);return{clearedIdentity:c,ga:a,mc:l,pageView:S,purchase:g,recordEvent:N,setGoogleAnalyticsEnabled:h,setMcAnalyticsEnabled:P,setProperties:y,tracks:O}}},"../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.js":(f,E,s)=>{s.d(E,{Z:()=>T});var u=s("../connection/components/use-connection/index.jsx");function T(){const{apiRoot:d,apiNonce:p}=myJetpackRest,{topJetpackMenuItemUrl:r,blogID:C}=myJetpackInitialState,R=(0,u.Z)({apiRoot:d,apiNonce:p}),{registrationNonce:i}=JP_CONNECTION_INITIAL_STATE,I=R.isRegistered;return{apiNonce:p,apiRoot:d,blogID:C,registrationNonce:i,...R,isSiteConnected:I,topJetpackMenuItemUrl:r}}},"../../packages/my-jetpack/_inc/data/constants.ts":(f,E,s)=>{s.d(E,{Jk:()=>i,Kf:()=>y,LQ:()=>d,RQ:()=>O,Vu:()=>A,YF:()=>e,_H:()=>p,db:()=>S,h3:()=>w,hd:()=>r,iG:()=>a,n2:()=>I,q9:()=>c,yv:()=>l});const u="my-jetpack/v1",T="jetpack/v4/stats-app",d=`${u}/site/purchases`,p=`${u}/site/backup/undo-event`,r=`${u}/site/backup/count-items`,C=`${u}/chat/availability`,R=`${u}/chat/authentication`,i=`${u}/site/products`,I="videopress/v1/stats/featured",e=`${u}/site/dismiss-welcome-banner`,o=U=>`${T}/sites/${U}/stats/highlights`,c="product",a="activate product",l="install product",S="videopress stats",g="available licenses",h="chat availability",P="chat authentication",y="backup history",O="backup stats",N="stats counts",A="dismiss welcome banner",w="purchases"},"../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts":(f,E,s)=>{s.d(E,{o:()=>o});var u=s("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),T=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),d=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const p={message:"",options:{status:"",actions:{label:"",onClick:()=>{}}}},r=(0,T.createContext)({currentNotice:p,setNotice:null}),C=({children:c})=>{const[a,l]=(0,T.useState)(p),S=g=>{a.message||l(g)};return(0,d.jsx)(r.Provider,{value:{currentNotice:a,setNotice:S},children:c})};C.displayName="NoticeContextProvider";const R=null;try{noticeContext.displayName="noticeContext",noticeContext.__docgenInfo={description:"",displayName:"noticeContext",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"]={docgenInfo:noticeContext.__docgenInfo,name:"noticeContext",path:"../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"})}catch(c){}var i=s("../../packages/my-jetpack/_inc/data/constants.ts");const I=u.__,e=[i.h3,i.iG,i.yv],o=({infoName:c,isError:a,overrideMessage:l})=>{const{setNotice:S}=(0,T.useContext)(r),g=l!=null?l:(0,u.gB)(I("There was an error fetching your %s information. Check your site connectivity and try again.","jetpack-my-jetpack"),c);(0,T.useEffect)(()=>{a&&e.includes(c)&&S({message:g,options:{status:"error"}})},[g,S,a,c])}}}]);})();
