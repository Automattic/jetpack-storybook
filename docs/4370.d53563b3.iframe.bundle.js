"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[4370],{"../connection/components/use-connection/index.jsx":(de,W,i)=>{i.d(W,{Z:()=>y});var E=i("../api/index.jsx"),_=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),C=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),p=i("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),c=i("../connection/state/store.jsx");const l=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},y=function(){let{registrationNonce:k=l.registrationNonce,apiRoot:B=l.apiRoot,apiNonce:I=l.apiNonce,redirectUri:h,autoTrigger:A,from:H,skipUserConnection:N}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:$,connectUser:x,refreshConnectedPlugins:U}=(0,_.Z)(c.t),v=(0,C.Z)(S=>S(c.t).getRegistrationError()),{siteIsRegistering:F,userIsConnecting:L,userConnectionData:P,connectedPlugins:R,connectionErrors:m,isRegistered:G,isUserConnected:J,hasConnectedOwner:Y,isOfflineMode:Q}=(0,C.Z)(S=>({siteIsRegistering:S(c.t).getSiteIsRegistering(),userIsConnecting:S(c.t).getUserIsConnecting(),userConnectionData:S(c.t).getUserConnectionData(),connectedPlugins:S(c.t).getConnectedPlugins(),connectionErrors:S(c.t).getConnectionErrors(),isOfflineMode:S(c.t).getIsOfflineMode(),...S(c.t).getConnectionStatus()})),j=()=>{if(N){if(h)return window.location=h,Promise.resolve(h)}else return x({from:H,redirectUri:h});return Promise.resolve()},X=S=>(S&&S.preventDefault(),G?j():$({registrationNonce:k,redirectUri:h}).then(()=>j()));return(0,p.useEffect)(()=>{E.ZP.setApiRoot(B),E.ZP.setApiNonce(I)},[B,I]),(0,p.useEffect)(()=>{A&&!F&&!L&&X()},[]),{handleRegisterSite:X,handleConnectUser:j,refreshConnectedPlugins:U,isRegistered:G,isUserConnected:J,siteIsRegistering:F,userIsConnecting:L,registrationError:v,userConnectionData:P,hasConnectedOwner:Y,connectedPlugins:R,connectionErrors:m,isOfflineMode:Q}}},"../connection/state/store.jsx":(de,W,i)=>{i.d(W,{t:()=>D});var E=i("../api/index.jsx");const _="SET_CONNECTION_STATUS",C="SET_CONNECTION_STATUS_IS_FETCHING",p="FETCH_CONNECTION_STATUS",c="SET_SITE_IS_REGISTERING",l="SET_USER_IS_CONNECTING",y="SET_REGISTRATION_ERROR",k="CLEAR_REGISTRATION_ERROR",B="REGISTER_SITE",I="SET_AUTHORIZATION_URL",h="CONNECT_USER",A="DISCONNECT_USER_SUCCESS",H="FETCH_AUTHORIZATION_URL",N="SET_CONNECTED_PLUGINS",$="REFRESH_CONNECTED_PLUGINS",x="SET_CONNECTION_ERRORS",U="SET_IS_OFFLINE_MODE",v=n=>({type:_,connectionStatus:n}),F=n=>({type:C,isFetching:n}),L=()=>({type:p}),P=n=>({type:c,isRegistering:n}),R=n=>({type:l,isConnecting:n}),m=()=>({type:A}),G=n=>({type:y,registrationError:n}),J=()=>({type:k}),Y=n=>({type:I,authorizationUrl:n}),Q=n=>({type:H,redirectUri:n}),j=n=>({type:N,connectedPlugins:n}),X=n=>({type:x,connectionErrors:n}),S=n=>({type:U,isOfflineMode:n});function ge(){let{from:n,redirectFunc:o,redirectUri:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield R(!0),yield{type:h,from:n,redirectFunc:o,redirectUri:u}}()}function Ee(n){let{registrationNonce:o,redirectUri:u}=n;return function*(){yield J(),yield P(!0);try{const T=yield{type:B,registrationNonce:o,redirectUri:u};return yield v({isRegistered:!0}),yield Y(T.authorizeUrl),yield P(!1),Promise.resolve(T)}catch(T){return yield G(T),yield P(!1),Promise.reject(T)}}()}const se={setConnectionStatus:v,setConnectionStatusIsFetching:F,fetchConnectionStatus:L,fetchAuthorizationUrl:Q,setSiteIsRegistering:P,setUserIsConnecting:R,setRegistrationError:G,clearRegistrationError:J,setAuthorizationUrl:Y,registerSite:Ee,connectUser:ge,disconnectUserSuccess:m,setConnectedPlugins:j,refreshConnectedPlugins:()=>async n=>{let{dispatch:o}=n;return await new Promise(u=>E.ZP.fetchConnectedPlugins().then(T=>{o(j(T)),u(T)}))},setConnectionErrors:X,setIsOfflineMode:S};var _e=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const D="jetpack-connection",K=n=>{let{registrationNonce:o,redirectUri:u}=n;return E.ZP.registerSite(o,u)},me=(0,_e.R)(n=>{let{resolveSelect:o}=n;return function(){let{from:u,redirectFunc:T,redirectUri:M}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((oe,b)=>{o(D).getAuthorizationUrl(M).then(V=>{const ue=T||(Ge=>window.location.assign(Ge)),Ae=new URL(V);u&&Ae.searchParams.set("from",encodeURIComponent(u));const Pe=Ae.toString();ue(Pe),oe(Pe)}).catch(V=>{b(V)})})}}),pe={FETCH_AUTHORIZATION_URL:n=>{let{redirectUri:o}=n;return E.ZP.fetchAuthorizationUrl(o)},REGISTER_SITE:K,CONNECT_USER:me};var O=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ie=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case _:return{...n,...o.connectionStatus};case A:return{...n,isUserConnected:!1}}return n},ye=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case N:return o.connectedPlugins}return n},Ne=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case C:return o.isFetching}return n},Ue=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case c:return o.isRegistering}return n},ve=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case l:return o.isConnecting}return n},Fe=(n,o)=>{switch(o.type){case k:return!1;case y:return o.registrationError;default:return n}},Le=(n,o)=>{switch(o.type){case I:return o.authorizationUrl;default:return n}},je=(n,o)=>{switch(o.type){default:return n}},Se=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case x:return o.connectionErrors}return n},Te=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case U:return o.isConnecting}return n},ae=(0,O.UY)({connectionStatus:ie,connectionStatusIsFetching:Ne,siteIsRegistering:Ue,userIsConnecting:ve,registrationError:Fe,authorizationUrl:Le,userConnectionData:je,connectedPlugins:ye,connectionErrors:Se,isOfflineMode:Te});var he=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),fe=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const Ce={...{getAuthorizationUrl:{isFulfilled:function(n){const o=!!n.authorizationUrl;for(var u=arguments.length,T=new Array(u>1?u-1:0),M=1;M<u;M++)T[M-1]=arguments[M];const oe=(0,he.Y)(D).hasFinishedResolution("getAuthorizationUrl",T);return o&&!oe&&(0,fe.W)(D).finishResolution("getAuthorizationUrl",T),o},*fulfill(n){const o=yield se.fetchAuthorizationUrl(n);yield se.setAuthorizationUrl(o.authorizeUrl)}}}},Ie={...{getConnectionStatus:n=>n.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:n=>n.siteIsRegistering||!1,getUserIsConnecting:n=>n.userIsConnecting||!1,getRegistrationError:n=>n.registrationError||!1,getAuthorizationUrl:n=>n.authorizationUrl||!1,getUserConnectionData:n=>n.userConnectionData||!1,getConnectedPlugins:n=>n.connectedPlugins||[],getConnectionErrors:n=>n.connectionErrors||[],getIsOfflineMode:n=>n.isOfflineMode||!1,getWpcomUser:n=>{var o,u;return(u=(o=n==null?void 0:n.userConnectionData)==null?void 0:o.currentUser)==null?void 0:u.wpcomUser},getBlogId:n=>{var o,u;return(u=(o=n==null?void 0:n.userConnectionData)==null?void 0:o.currentUser)==null?void 0:u.blogId}}};var ne=i("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),re=i.n(ne),He=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class Z{static mayBeInit(o,u){Z.store===null&&(Z.store=(0,He.Z)(o,u),(0,O.z2)(Z.store))}}re()(Z,"store",null);const xe=Z,ce=window.JP_CONNECTION_INITIAL_STATE;ce||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),xe.mayBeInit(D,{__experimentalUseThunks:!0,reducer:ae,actions:se,selectors:Ie,resolvers:Ce,controls:pe,initialState:ce||{}})},"../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx":(de,W,i)=>{i.d(W,{N:()=>l,Z:()=>k});var E=i("../components/components/button/index.tsx"),_=i("../../../node_modules/.pnpm/@wordpress+i18n@4.34.0/node_modules/@wordpress/i18n/build-module/index.js"),C=i("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),p=i("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const c=_.__,l={ACTIVE:"active",INACTIVE:"inactive",ERROR:"error",ABSENT:"plugin_absent",ABSENT_WITH_PLAN:"plugin_absent_with_plan",NEEDS_PURCHASE:"needs_purchase",NEEDS_PURCHASE_OR_FREE:"needs_purchase_or_free"},y=B=>{let{status:I,admin:h,name:A,onActivate:H,onManage:N,onFixConnection:$,isFetching:x,isInstallingStandalone:U,isDeactivatingStandalone:v,isManageDisabled:F,className:L,onAdd:P}=B;if(!h)return(0,p.jsx)(E.Z,{...m,size:"small",variant:"link",weight:"regular",children:(0,_.gB)(c("Learn about %s","jetpack-my-jetpack"),A)});const R=x||U||v,m={variant:R?void 0:"primary",disabled:R,className:L};switch(I){case l.ABSENT:case l.ABSENT_WITH_PLAN:return(0,p.jsxs)(E.Z,{...m,size:"small",variant:"link",weight:"regular",children:[I===l.ABSENT&&(0,_.gB)(c("Get %s","jetpack-my-jetpack"),A),I===l.ABSENT_WITH_PLAN&&(0,_.gB)(c("Install %s","jetpack-my-jetpack"),A)]});case l.NEEDS_PURCHASE:return(0,p.jsx)(E.Z,{...m,size:"small",weight:"regular",onClick:P,children:c("Purchase","jetpack-my-jetpack")});case l.NEEDS_PURCHASE_OR_FREE:return(0,p.jsx)(E.Z,{...m,size:"small",weight:"regular",onClick:P,children:c("Start for free","jetpack-my-jetpack")});case l.ACTIVE:return(0,p.jsx)(E.Z,{...m,disabled:F||(m==null?void 0:m.disabled),size:"small",weight:"regular",variant:"secondary",onClick:N,children:c("Manage","jetpack-my-jetpack")});case l.ERROR:return(0,p.jsx)(E.Z,{...m,size:"small",weight:"regular",onClick:$,children:c("Fix connection","jetpack-my-jetpack")});case l.INACTIVE:return(0,p.jsx)(E.Z,{...m,size:"small",weight:"regular",variant:"secondary",onClick:H,children:c("Activate","jetpack-my-jetpack")});default:return null}};y.__docgenInfo={description:"",methods:[],displayName:"ActionButton"};const k=y},"../../packages/my-jetpack/_inc/state/store.js":(de,W,i)=>{i.d(W,{t:()=>Ze,N:()=>Je});var E=i("../connection/state/store.jsx"),_=i("../../../node_modules/.pnpm/@wordpress+api-fetch@6.31.0/node_modules/@wordpress/api-fetch/build-module/index.js"),C=i("../../../node_modules/.pnpm/@wordpress+i18n@4.34.0/node_modules/@wordpress/i18n/build-module/index.js");const p="my-jetpack/v1",c=`${p}/site/purchases`,l=`${p}/site/products`,y=`${p}/chat/availability`,k=["scan"],B="videopress",I="videopress/v1/stats/featured",h=C.__,A="SET_PURCHASES_IS_FETCHING",H="FETCH_PURCHASES",N="SET_PURCHASES",$="SET_AVAILABLE_LICENSES_IS_FETCHING",x="FETCH_AVAILABLE_LICENSES",U="SET_AVAILABLE_LICENSES",v="SET_IS_FETCHING_PRODUCT",F="SET_PRODUCT",L="SET_PRODUCT_REQUEST_ERROR",P="ACTIVATE_PRODUCT",R="SET_PRODUCT_STATUS",m="SET_CHAT_AVAILABILITY_IS_FETCHING",G="SET_CHAT_AVAILABILITY",J="SET_GLOBAL_NOTICE",Y="CLEAN_GLOBAL_NOTICE",Q="SET_PRODUCT_STATS",j="SET_IS_FETCHING_PRODUCT_STATS",X=e=>({type:A,isFetching:e}),S=e=>({type:m,isFetching:e}),ge=()=>({type:H}),Ee=e=>({type:N,purchases:e}),Re=e=>({type:G,chatAvailability:e}),se=e=>({type:$,isFetching:e}),_e=()=>({type:x}),Oe=e=>({type:U,availableLicenses:e}),D=e=>({type:F,product:e}),K=(e,t)=>({type:L,productId:e,error:t}),me=(e,t)=>({type:R,productId:e,status:t}),q=(e,t)=>({type:"SET_GLOBAL_NOTICE",message:e,options:t}),pe=()=>({type:"CLEAN_GLOBAL_NOTICE"});function O(e,t){return{type:v,productId:e,isFetching:t}}function ie(e,t,r){let{select:s,dispatch:a,registry:d}=r;return new Promise((w,z)=>{if(!s.isValidProduct(e)){const f=h("Invalid product name","jetpack-my-jetpack"),le=new Error(f);a(K(e,le)),a(q(f,{status:"error",isDismissible:!0})),z(le);return}const te=t.activate?"POST":"DELETE";return a(O(e,!0)),(0,_.Z)({path:`${l}/${e}`,method:te}).then(f=>{a(O(e,!1)),a(D(f)),d.dispatch(E.t).refreshConnectedPlugins(),w(f==null?void 0:f.status)}).catch(f=>{const{name:le}=s.getProduct(e),Ye=(0,C.gB)(h("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),le);a(O(e,!1)),a(K(e,f)),a(q(Ye,{status:"error",isDismissible:!0})),z(f)})})}const Se={setPurchasesIsFetching:X,setChatAvailabilityIsFetching:S,fetchPurchases:ge,setPurchases:Ee,setChatAvailability:Re,setAvailableLicensesIsFetching:se,fetchAvailableLicenses:_e,setAvailableLicenses:Oe,setProductStats:(e,t)=>({type:Q,productId:e,stats:t}),setIsFetchingProductStats:(e,t)=>({type:j,productId:e,isFetching:t}),...{setGlobalNotice:q,cleanGlobalNotice:pe},...{setProduct:D,activateProduct:e=>async t=>await ie(e,{activate:!0},t),deactivateStandalonePluginForProduct:e=>async t=>await ie(e,{activate:!1},t),installStandalonePluginForProduct:e=>async t=>{const{select:r,dispatch:s,registry:a}=t;return await new Promise((d,w)=>{if(!r.isValidProduct(e)){const g=h("Invalid product name","jetpack-my-jetpack"),te=new Error(g);s(K(e,te)),s(q(g,{status:"error",isDismissible:!0})),w(te);return}return s(O(e,!0)),(0,_.Z)({path:`${l}/${e}/install-standalone`,method:"POST"}).then(g=>{s(O(e,!1)),s(D(g)),a.dispatch(E.t).refreshConnectedPlugins(),d(g==null?void 0:g.standalone_plugin_info)}).catch(g=>{const{name:te}=r.getProduct(e),f=(0,C.gB)(h("Failed to install standalone plugin for %1$s: %2$s. Please try again","jetpack-my-jetpack"),te,g.message);s(O(e,!1)),s(K(e,g)),s(q(f,{status:"error",isDismissible:!0})),w(g)})})},setIsFetchingProduct:O,setRequestProductError:K,setProductStatus:me}};function Te(){return new Promise((e,t)=>{(0,_.Z)({path:c}).then(e).catch(t)})}const De={[H]:Te};var ae=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const he=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:{const{productId:r,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[r]:s},errors:{...e.errors,[r]:s?void 0:e.errors[r]}}}case R:{const{productId:r,status:s}=t;return{...e,items:{...e.items,[r]:{...e.items[r],status:s}}}}case F:{const{product:r}=t,{slug:s}=r;return{...e,items:{...e.items,[s]:r}}}case L:{const{productId:r,error:s}=t;return{...e,errors:{...e.errors,[r]:s}}}default:return e}},fe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{...e,isFetching:t.isFetching};case N:return{...e,items:(t==null?void 0:t.purchases)||[]};default:return e}},be=function(){var r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{isFetching:!1,isAvailable:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{...e,isFetching:t.isFetching};case G:return{...e,isAvailable:(r=t==null?void 0:t.chatAvailability)==null?void 0:r.is_available};default:return e}},Ce=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{...e,isFetching:t.isFetching};case U:return{...e,items:(t==null?void 0:t.availableLicenses)||[]};default:return e}},we=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{global:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:{const{message:r,options:s}=t;return{...e,global:{message:r,options:s}}}case Y:return{...e,global:{}};default:return e}},ke=function(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}},Be=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:{const{productId:r,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[r]:s}}}case Q:{const{productId:r,stats:s}=t;return{...e,items:{...e.items,[r]:s}}}default:return e}},Ie=(0,ae.UY)({products:he,purchases:fe,chatAvailability:be,availableLicenses:Ce,notices:we,plugins:ke,stats:Be});var ne=i("../api/index.jsx"),re=i("../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx");const Z=async()=>(0,_.Z)({path:I}),ce=async e=>e===B?Z():null,n=C.__,T={...{getProduct:{isFulfilled:(e,t)=>{var s;return(((s=e==null?void 0:e.products)==null?void 0:s.items)||{}).hasOwnProperty(t)&&!k.includes(t)},fulfill:e=>async t=>{let{dispatch:r}=t;try{r.setIsFetchingProduct(e,!0);const s=await(0,_.Z)({path:`${l}/${e}`});return r.setProduct(s),r.setIsFetchingProduct(e,!1),Promise.resolve()}catch(s){if(r.setIsFetchingProduct(e,!1),s!=null&&s.code&&(s!=null&&s.message))return r.setRequestProductError(e,s),Promise.reject(s);throw new Error(s)}}},getPurchases:()=>async e=>{let{dispatch:t}=e;t.setPurchasesIsFetching(!0);try{t.setPurchases(await(0,_.Z)({path:c})),t.setPurchasesIsFetching(!1)}catch(r){t.setPurchasesIsFetching(!1),r.code!=="not_connected"&&t.setGlobalNotice(n("There was an error fetching your purchases information. Check your site connectivity and try again.","jetpack-my-jetpack"),{status:"error"})}},getChatAvailability:()=>async e=>{let{dispatch:t}=e;t.setChatAvailabilityIsFetching(!0);try{t.setChatAvailability(await(0,_.Z)({path:y})),t.setChatAvailabilityIsFetching(!1)}catch(r){t.setChatAvailabilityIsFetching(!1)}},getAvailableLicenses:()=>async e=>{let{dispatch:t}=e;t.setAvailableLicensesIsFetching(!0);try{const{apiRoot:r,apiNonce:s}=(window==null?void 0:window.myJetpackRest)||{};ne.ZP.setApiRoot(r),ne.ZP.setApiNonce(s);const a=await ne.ZP.getUserLicenses();a&&a.items?t.setAvailableLicenses(a.items.filter(d=>{let{attached_at:w,revoked_at:z}=d;return w===null&&z===null})):t.setAvailableLicenses([])}catch(r){t.setAvailableLicenses([])}finally{t.setAvailableLicensesIsFetching(!1)}}},getProductStats:{isFulfilled:(e,t)=>{var r,s;return((s=(r=e.stats)==null?void 0:r.items)==null?void 0:s.hasOwnProperty(t))||!1},fulfill:e=>async t=>{let{dispatch:r,select:s}=t;const{status:a}=s.getProduct(e);if(a!==re.N.ACTIVE)return r.setProductStats(e,null),Promise.resolve();try{r.setIsFetchingProductStats(e,!0);const d=await ce(e);return r.setProductStats(e,d),r.setIsFetchingProductStats(e,!1),Promise.resolve()}catch(d){if(r.setProductStats(e,null),r.setIsFetchingProductStats(e,!1),d!=null&&d.code&&(d!=null&&d.message))return Promise.reject(d);throw new Error(d)}}}};function M(e){return e.replace(/([-_][a-z])/gi,t=>t.toUpperCase().replace("_",""))}function oe(e){return e.indexOf("_")!==-1}function b(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=Object.assign({},e);for(const s in r)r.hasOwnProperty(s)&&oe(s)&&(r[M(s)]=r[s],t&&delete r[s]);return r}const V=e=>{var t;return((t=e.products)==null?void 0:t.items)||{}},ue=e=>Object.keys(V(e)),Ve={...{getProducts:V,getProductNames:ue,getProduct:(e,t)=>{var a,d;const r=((a=V(e))==null?void 0:a[t])||{},s=b(r,!0);return s.standalonePluginInfo=b(s.standalonePluginInfo||{},!0),s.pricingForUi=b(s.pricingForUi||{},!0),s.pricingForUi.introductoryOffer=s.pricingForUi.isIntroductoryOffer?b(s.pricingForUi.introductoryOffer,!0):null,(d=s.pricingForUi)!=null&&d.tiers&&(s.pricingForUi.tiers=b(s.pricingForUi.tiers,!0),s.pricingForUi.tiers=Object.keys(s.pricingForUi.tiers).reduce((w,z)=>{const g=b(s.pricingForUi.tiers[z],!0)||{};return w[z]={...g,introductoryOffer:g!=null&&g.isIntroductoryOffer?b(g==null?void 0:g.introductoryOffer,!0):null},w},{})),s.features=s.features||[],s.supportedProducts=s.supportedProducts||[],s.pricingForUi.fullPricePerMonth=s.pricingForUi.productTerm==="year"?Math.ceil(s.pricingForUi.fullPrice/12*100)/100:s.pricingForUi.fullPrice,s.pricingForUi.discountPricePerMonth=s.pricingForUi.productTerm==="year"?Math.ceil(s.pricingForUi.discountPrice/12*100)/100:s.pricingForUi.discountPrice,s},isValidProduct:(e,t)=>ue(e).includes(t),isFetching:(e,t)=>{var r,s;return((s=(r=e.products)==null?void 0:r.isFetching)==null?void 0:s[t])||!1},getProductsThatRequiresUserConnection:e=>{const t=V(e);return Object.keys(t).reduce((r,s)=>{const a=t[s];return(a==null?void 0:a.requires_user_connection)&&((a==null?void 0:a.status)===re.N.ACTIVE||(a==null?void 0:a.status)===re.N.ERROR)&&r.push(a==null?void 0:a.name),r},[])}},...{getPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.items)||[]},isRequestingPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.isFetching)||!1}},...{getChatAvailability:e=>e.chatAvailability.isAvailable,isRequestingChatAvailability:e=>e.chatAvailability.isFetching},...{getAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.items)||[]},isFetchingAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.isFetching)||!1}},...{getGlobalNotice:e=>{var t;return(t=e.notices)==null?void 0:t.global}},...{hasStandalonePluginInstalled:e=>Object.values(e.plugins).filter(t=>["jetpack-backup","jetpack-boost","jetpack-protect","jetpack-search","jetpack-social","jetpack-videopress"].indexOf(t.TextDomain)>=0).length>0},...{getProductStats:(e,t)=>{var r,s;return(s=(r=e.stats)==null?void 0:r.items)==null?void 0:s[t]},isFetchingProductStats:(e,t)=>{var r,s;return((s=(r=e.stats)==null?void 0:r.isFetching)==null?void 0:s[t])||!1}}};var ze=i("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),We=i.n(ze),$e=i("../../../node_modules/.pnpm/@wordpress+data@9.4.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class ee{static mayBeInit(t,r){ee.store===null&&(ee.store=(0,$e.Z)(t,r),(0,ae.z2)(ee.store))}}We()(ee,"store",null);const Ke=ee,Ze="my-jetpack";function Je(){Ke.mayBeInit(Ze,{__experimentalUseThunks:!0,reducer:Ie,actions:Se,selectors:Ve,resolvers:T,controls:De,initialState:window.myJetpackInitialState||{}})}}}]);})();
