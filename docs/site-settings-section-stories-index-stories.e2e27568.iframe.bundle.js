"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[3556],{"../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js":(v,d,n)=>{n.d(d,{Z:()=>r});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/registry-provider/use-registry.js");const r=l=>{const{dispatch:s}=(0,a.Z)();return l===void 0?s:s(l)}},"../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js":(v,d,n)=>{n.d(d,{Y:()=>g});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/default-registry.js");function g(r){return a.Z.select(r)}},"../../packages/videopress/src/client/admin/components/site-settings-section/stories/index.stories.tsx":(v,d,n)=>{var y,j,R;n.r(d),n.d(d,{__namedExportsOrder:()=>h,_default:()=>_,default:()=>D});var a=n("../../../node_modules/.pnpm/@storybook+addon-actions@7.1.0_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),g=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),r=n("../components/components/layout/container/index.tsx"),l=n("../components/components/layout/col/index.tsx"),s=n("../components/components/text/index.tsx"),p=n("../../../node_modules/.pnpm/@wordpress+i18n@4.41.0/node_modules/@wordpress/i18n/build-module/index.js"),u=n("../../packages/videopress/src/client/admin/hooks/use-permission/index.ts"),C=n("../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts"),f=n("../../packages/videopress/src/client/admin/components/video-filter/index.tsx"),E=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts"),i=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const I=p.__,U=S=>{let{videoPressVideosPrivateForSite:P,siteIsPrivate:A,siteType:T,onPrivacyChange:O}=S;const{canPerformAction:c}=(0,u.g)(),G=A&&T===E.mP,z=!c||G,H=G?I("You cannot change this setting because your site is private. You can only choose the video privacy default on public sites.","jetpack-videopress-pkg"):null;return(0,i.jsxs)(r.Z,{horizontalSpacing:0,horizontalGap:0,children:[(0,i.jsx)(l.Z,{children:(0,i.jsx)(s.ZP,{variant:"headline-small",mb:1,children:I("Settings","jetpack-videopress-pkg")})}),(0,i.jsx)(l.Z,{sm:12,md:12,lg:12,children:(0,i.jsx)(f.JC,{for:"settings-site-privacy",label:I("Video Privacy: Restrict views to members of this site","jetpack-videopress-pkg"),onChange:O,checked:P,disabled:z,disabledReason:H})})]})};U.displayName="SiteSettingsSection";const x=()=>{const{settings:S,onUpdate:P}=(0,C.C)(),{videoPressVideosPrivateForSite:A,siteIsPrivate:T,siteType:O}=S;return(0,i.jsx)(U,{videoPressVideosPrivateForSite:A,siteIsPrivate:T,siteType:O,onPrivacyChange:c=>{P({videoPressVideosPrivateForSite:c})}})};x.displayName="ConnectSiteSettingsSection";const M=U;var F=`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';

export default {
	title: 'Packages/VideoPress/Site Settings',
	component: SettingsSection,
	argTypes: {},
};

const Template = args => <SettingsSection { ...args } />;

export const _default = Template.bind( {} );
_default.args = {
	onPrivacyChange: action( 'onPrivacyChange' ),
};
`,Z={_default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}};const D={parameters:{storySource:{source:`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';
export default {
  title: 'Packages/VideoPress/Site Settings',
  component: SettingsSection,
  argTypes: {}
};
const Template = args => <SettingsSection {...args} />;
export const _default = Template.bind({});
_default.args = {
  onPrivacyChange: action('onPrivacyChange')
};
_default.parameters = {
  ..._default.parameters,
  docs: {
    ..._default.parameters?.docs,
    source: {
      originalSource: "args => <SettingsSection {...args} />",
      ..._default.parameters?.docs?.source
    }
  }
};`,locationsMap:{default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}}}},title:"Packages/VideoPress/Site Settings",component:M,argTypes:{}},N=S=>(0,i.jsx)(M,{...S});N.displayName="Template";const _=N.bind({});_.args={onPrivacyChange:(0,a.aD)("onPrivacyChange")},_.parameters={..._.parameters,docs:{...(y=_.parameters)==null?void 0:y.docs,source:{originalSource:"args => <SettingsSection {...args} />",...(R=(j=_.parameters)==null?void 0:j.docs)==null?void 0:R.source}}};const h=["_default"]},"../connection/components/use-connection/index.jsx":(v,d,n)=>{n.d(d,{Z:()=>u});var a=n("../api/index.jsx"),g=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),r=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),l=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),s=n("../connection/state/store.jsx");const p=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},u=function(){let{registrationNonce:C=p.registrationNonce,apiRoot:f=p.apiRoot,apiNonce:E=p.apiNonce,redirectUri:i,autoTrigger:I,from:U,skipUserConnection:x}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:M,connectUser:F,refreshConnectedPlugins:Z}=(0,g.Z)(s.t),D=(0,r.Z)(c=>c(s.t).getRegistrationError()),{siteIsRegistering:N,userIsConnecting:_,userConnectionData:h,connectedPlugins:y,connectionErrors:j,isRegistered:R,isUserConnected:S,hasConnectedOwner:P,isOfflineMode:A}=(0,r.Z)(c=>({siteIsRegistering:c(s.t).getSiteIsRegistering(),userIsConnecting:c(s.t).getUserIsConnecting(),userConnectionData:c(s.t).getUserConnectionData(),connectedPlugins:c(s.t).getConnectedPlugins(),connectionErrors:c(s.t).getConnectionErrors(),isOfflineMode:c(s.t).getIsOfflineMode(),...c(s.t).getConnectionStatus()})),T=()=>{if(x){if(i)return window.location=i,Promise.resolve(i)}else return F({from:U,redirectUri:i});return Promise.resolve()},O=c=>(c&&c.preventDefault(),R?T():M({registrationNonce:C,redirectUri:i}).then(()=>T()));return(0,l.useEffect)(()=>{a.ZP.setApiRoot(f),a.ZP.setApiNonce(E)},[f,E]),(0,l.useEffect)(()=>{I&&!N&&!_&&O()},[]),{handleRegisterSite:O,handleConnectUser:T,refreshConnectedPlugins:Z,isRegistered:R,isUserConnected:S,siteIsRegistering:N,userIsConnecting:_,registrationError:D,userConnectionData:h,hasConnectedOwner:P,connectedPlugins:y,connectionErrors:j,isOfflineMode:A}}},"../connection/state/store.jsx":(v,d,n)=>{n.d(d,{t:()=>B});var a=n("../api/index.jsx");const g="SET_CONNECTION_STATUS",r="SET_CONNECTION_STATUS_IS_FETCHING",l="FETCH_CONNECTION_STATUS",s="SET_SITE_IS_REGISTERING",p="SET_USER_IS_CONNECTING",u="SET_REGISTRATION_ERROR",C="CLEAR_REGISTRATION_ERROR",f="REGISTER_SITE",E="SET_AUTHORIZATION_URL",i="CONNECT_USER",I="DISCONNECT_USER_SUCCESS",U="FETCH_AUTHORIZATION_URL",x="SET_CONNECTED_PLUGINS",M="REFRESH_CONNECTED_PLUGINS",F="SET_CONNECTION_ERRORS",Z="SET_IS_OFFLINE_MODE",D=e=>({type:g,connectionStatus:e}),N=e=>({type:r,isFetching:e}),_=()=>({type:l}),h=e=>({type:s,isRegistering:e}),y=e=>({type:p,isConnecting:e}),j=()=>({type:I}),R=e=>({type:u,registrationError:e}),S=()=>({type:C}),P=e=>({type:E,authorizationUrl:e}),A=e=>({type:U,redirectUri:e}),T=e=>({type:x,connectedPlugins:e}),O=e=>({type:F,connectionErrors:e}),c=e=>({type:Z,isOfflineMode:e});function G(){let{from:e,redirectFunc:t,redirectUri:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield y(!0),yield{type:i,from:e,redirectFunc:t,redirectUri:o}}()}function z(e){let{registrationNonce:t,redirectUri:o}=e;return function*(){yield S(),yield h(!0);try{const m=yield{type:f,registrationNonce:t,redirectUri:o};return yield D({isRegistered:!0}),yield P(m.authorizeUrl),yield h(!1),Promise.resolve(m)}catch(m){return yield R(m),yield h(!1),Promise.reject(m)}}()}const k={setConnectionStatus:D,setConnectionStatusIsFetching:N,fetchConnectionStatus:_,fetchAuthorizationUrl:A,setSiteIsRegistering:h,setUserIsConnecting:y,setRegistrationError:R,clearRegistrationError:S,setAuthorizationUrl:P,registerSite:z,connectUser:G,disconnectUserSuccess:j,setConnectedPlugins:T,refreshConnectedPlugins:()=>async e=>{let{dispatch:t}=e;return await new Promise(o=>a.ZP.fetchConnectedPlugins().then(m=>{t(T(m)),o(m)}))},setConnectionErrors:O,setIsOfflineMode:c};var X=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const B="jetpack-connection",Q=e=>{let{registrationNonce:t,redirectUri:o}=e;return a.ZP.registerSite(t,o)},$=(0,X.R)(e=>{let{resolveSelect:t}=e;return function(){let{from:o,redirectFunc:m,redirectUri:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((b,Ce)=>{t(B).getAuthorizationUrl(L).then(W=>{const fe=m||(Ie=>window.location.assign(Ie)),Y=new URL(W);o&&Y.searchParams.set("from",encodeURIComponent(o));const J=Y.toString();fe(J),b(J)}).catch(W=>{Ce(W)})})}}),q={FETCH_AUTHORIZATION_URL:e=>{let{redirectUri:t}=e;return a.ZP.fetchAuthorizationUrl(t)},REGISTER_SITE:Q,CONNECT_USER:$};var K=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{...e,...t.connectionStatus};case I:return{...e,isUserConnected:!1}}return e},te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.connectedPlugins}return e},ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return t.isFetching}return e},se=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return t.isRegistering}return e},oe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.isConnecting}return e},re=(e,t)=>{switch(t.type){case C:return!1;case u:return t.registrationError;default:return e}},ie=(e,t)=>{switch(t.type){case E:return t.authorizationUrl;default:return e}},ae=(e,t)=>{switch(t.type){default:return e}},ce=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.connectionErrors}return e},de=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return t.isConnecting}return e},ue=(0,K.UY)({connectionStatus:ee,connectionStatusIsFetching:ne,siteIsRegistering:se,userIsConnecting:oe,registrationError:re,authorizationUrl:ie,userConnectionData:ae,connectedPlugins:te,connectionErrors:ce,isOfflineMode:de});var le=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),me=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const ge={...{getAuthorizationUrl:{isFulfilled:function(e){const t=!!e.authorizationUrl;for(var o=arguments.length,m=new Array(o>1?o-1:0),L=1;L<o;L++)m[L-1]=arguments[L];const b=(0,le.Y)(B).hasFinishedResolution("getAuthorizationUrl",m);return t&&!b&&(0,me.W)(B).finishResolution("getAuthorizationUrl",m),t},*fulfill(e){const t=yield k.fetchAuthorizationUrl(e);yield k.setAuthorizationUrl(t.authorizeUrl)}}}},pe={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>{var t,o;return(o=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:o.wpcomUser},getBlogId:e=>{var t,o;return(o=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:o.blogId}}};var _e=n("../../../node_modules/.pnpm/@babel+runtime@7.22.11/node_modules/@babel/runtime/helpers/defineProperty.js"),Ee=n.n(_e),Se=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class w{static mayBeInit(t,o){w.store===null&&(w.store=(0,Se.Z)(t,o),(0,K.z2)(w.store))}}Ee()(w,"store",null);const Te=w,V=window.JP_CONNECTION_INITIAL_STATE;V||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Te.mayBeInit(B,{__experimentalUseThunks:!0,reducer:ue,actions:k,selectors:pe,resolvers:ge,controls:q,initialState:V||{}})},"../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts":(v,d,n)=>{n.d(d,{RB:()=>r,mP:()=>a});const a="atomic",g="simple",r="jetpack"},"../../packages/videopress/src/client/admin/hooks/use-permission/index.ts":(v,d,n)=>{n.d(d,{g:()=>g});var a=n("../connection/components/use-connection/index.jsx");const g=()=>{const{isRegistered:r,hasConnectedOwner:l,isUserConnected:s}=(0,a.Z)();return{isRegistered:r,hasConnectedOwner:l,isUserConnected:s,canPerformAction:r&&l&&s}}},"../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts":(v,d,n)=>{n.d(d,{C:()=>s});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),g=n("../../../node_modules/.pnpm/@wordpress+data@9.11.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),r=n("../../packages/videopress/src/client/state/index.js"),l=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts");const s=()=>{var C,f,E;const p=(0,a.Z)(r.tT),u=(0,g.Z)(i=>i(r.tT).getVideoPressSettings(),[]);return{settings:{videoPressVideosPrivateForSite:(C=u==null?void 0:u.videoPressVideosPrivateForSite)!=null?C:!1,siteIsPrivate:(f=u==null?void 0:u.siteIsPrivate)!=null?f:!1,siteType:(E=u==null?void 0:u.siteType)!=null?E:l.RB},onUpdate:i=>p.updateVideoPressSettings(i)}}}}]);})();
