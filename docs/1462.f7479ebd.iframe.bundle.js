"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[1462],{"../analytics/index.jsx":(x,U,c)=>{c.d(U,{Z:()=>T});var C=c("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),E=c.n(C);const a=E()("dops:analytics");let f,l;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;function o(t,s){let r="";if(typeof t=="object"){for(const d in t)r+="&x_"+encodeURIComponent(d)+"="+encodeURIComponent(t[d]);a("Bumping stats %o",t)}else r="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(s),a('Bumping stat "%s" in group "%s"',s,t);return r}function R(t,s){let r="";if(typeof t=="object"){for(const d in t)r+="&"+encodeURIComponent(d)+"="+encodeURIComponent(t[d]);a("Built stats %o",t)}else r="&"+encodeURIComponent(t)+"="+encodeURIComponent(s),a('Built stat "%s" in group "%s"',s,t);return r}const u={initialize:function(t,s,r){u.setUser(t,s),u.setSuperProps(r),u.identifyUser()},setGoogleAnalyticsEnabled:function(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.googleAnalyticsEnabled=t,this.googleAnalyticsKey=s},setMcAnalyticsEnabled:function(t){this.mcAnalyticsEnabled=t},setUser:function(t,s){l={ID:t,username:s}},setSuperProps:function(t){f=t},assignSuperProps:function(t){f=Object.assign(f||{},t)},mc:{bumpStat:function(t,s){const r=o(t,s);u.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+r+"&t="+Math.random())},bumpStatWithPageView:function(t,s){const r=R(t,s);u.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+r+"&t="+Math.random())}},pageView:{record:function(t,s){u.tracks.recordPageView(t),u.ga.recordPageView(t,s)}},purchase:{record:function(t,s,r,d,_,O,i){u.ga.recordPurchase(t,s,r,d,_,O,i)}},tracks:{recordEvent:function(t,s){if(s=s||{},t.indexOf("akismet_")!==0&&t.indexOf("jetpack_")!==0){a('- Event name must be prefixed by "akismet_" or "jetpack_"');return}f&&(a("- Super Props: %o",f),s=Object.assign(s,f)),a('Record event "%s" called with props %s',t,JSON.stringify(s)),window._tkq.push(["recordEvent",t,s])},recordJetpackClick:function(t){const s=typeof t=="object"?t:{target:t};u.tracks.recordEvent("jetpack_wpa_click",s)},recordPageView:function(t){u.tracks.recordEvent("akismet_page_view",{path:t})},setOptOut:function(t){a("Pushing setOptOut: %o",t),window._tkq.push(["setOptOut",t])}},ga:{initialized:!1,initialize:function(){let t={};u.ga.initialized||(l&&(t={userId:"u-"+l.ID}),window.ga("create",this.googleAnalyticsKey,"auto",t),u.ga.initialized=!0)},recordPageView:function(t,s){u.ga.initialize(),a("Recording Page View ~ [URL: "+t+"] [Title: "+s+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",t),window.ga("send",{hitType:"pageview",page:t,title:s}))},recordEvent:function(t,s,r,d){u.ga.initialize();let _="Recording Event ~ [Category: "+t+"] [Action: "+s+"]";typeof r!="undefined"&&(_+=" [Option Label: "+r+"]"),typeof d!="undefined"&&(_+=" [Option Value: "+d+"]"),a(_),this.googleAnalyticsEnabled&&window.ga("send","event",t,s,r,d)},recordPurchase:function(t,s,r,d,_,O,i){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:t,revenue:d,currency:i}),window.ga("ecommerce:addItem",{id:t,name:s,sku:r,price:_,quantity:O}),window.ga("ecommerce:send")}},identifyUser:function(){l&&window._tkq.push(["identifyUser",l.ID,l.username])},setProperties:function(t){window._tkq.push(["setProperties",t])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},T=u},"../connection/components/use-connection/index.jsx":(x,U,c)=>{c.d(U,{Z:()=>R});var C=c("../api/index.jsx"),E=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),a=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),f=c("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),l=c("../connection/state/store.jsx");const o=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},R=function(){let{registrationNonce:u=o.registrationNonce,apiRoot:T=o.apiRoot,apiNonce:t=o.apiNonce,redirectUri:s,autoTrigger:r,from:d,skipUserConnection:_}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:O,connectUser:i,refreshConnectedPlugins:m}=(0,E.Z)(l.t),j=(0,a.Z)(h=>h(l.t).getRegistrationError()),{siteIsRegistering:N,userIsConnecting:S,userConnectionData:w,connectedPlugins:I,connectionErrors:y,isRegistered:v,isUserConnected:M,hasConnectedOwner:F}=(0,a.Z)(h=>({siteIsRegistering:h(l.t).getSiteIsRegistering(),userIsConnecting:h(l.t).getUserIsConnecting(),userConnectionData:h(l.t).getUserConnectionData(),connectedPlugins:h(l.t).getConnectedPlugins(),connectionErrors:h(l.t).getConnectionErrors(),...h(l.t).getConnectionStatus()})),P=()=>{if(_){if(s)return window.location=s,Promise.resolve(s)}else return i({from:d,redirectUri:s});return Promise.resolve()},b=h=>(h&&h.preventDefault(),v?P():O({registrationNonce:u,redirectUri:s}).then(()=>P()));return(0,f.useEffect)(()=>{C.ZP.setApiRoot(T),C.ZP.setApiNonce(t)},[T,t]),(0,f.useEffect)(()=>{r&&!N&&!S&&b()},[]),{handleRegisterSite:b,handleConnectUser:P,refreshConnectedPlugins:m,isRegistered:v,isUserConnected:M,siteIsRegistering:N,userIsConnecting:S,registrationError:j,userConnectionData:w,hasConnectedOwner:F,connectedPlugins:I,connectionErrors:y}}},"../connection/state/store.jsx":(x,U,c)=>{c.d(U,{t:()=>k});var C=c("../api/index.jsx");const E="SET_CONNECTION_STATUS",a="SET_CONNECTION_STATUS_IS_FETCHING",f="FETCH_CONNECTION_STATUS",l="SET_SITE_IS_REGISTERING",o="SET_USER_IS_CONNECTING",R="SET_REGISTRATION_ERROR",u="CLEAR_REGISTRATION_ERROR",T="REGISTER_SITE",t="SET_AUTHORIZATION_URL",s="CONNECT_USER",r="DISCONNECT_USER_SUCCESS",d="FETCH_AUTHORIZATION_URL",_="SET_CONNECTED_PLUGINS",O="REFRESH_CONNECTED_PLUGINS",i="SET_CONNECTION_ERRORS",m=e=>({type:E,connectionStatus:e}),j=e=>({type:a,isFetching:e}),N=()=>({type:f}),S=e=>({type:l,isRegistering:e}),w=e=>({type:o,isConnecting:e}),I=()=>({type:r}),y=e=>({type:R,registrationError:e}),v=()=>({type:u}),M=e=>({type:t,authorizationUrl:e}),F=e=>({type:d,redirectUri:e}),P=e=>({type:_,connectedPlugins:e}),b=e=>({type:i,connectionErrors:e});function h(){let{from:e,redirectFunc:n,redirectUri:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield w(!0),yield{type:s,from:e,redirectFunc:n,redirectUri:g}}()}function H(e){let{registrationNonce:n,redirectUri:g}=e;return function*(){yield v(),yield S(!0);try{const p=yield{type:T,registrationNonce:n,redirectUri:g};return yield m({isRegistered:!0}),yield M(p.authorizeUrl),yield S(!1),Promise.resolve(p)}catch(p){return yield y(p),yield S(!1),Promise.reject(p)}}()}const z={setConnectionStatus:m,setConnectionStatusIsFetching:j,fetchConnectionStatus:N,fetchAuthorizationUrl:F,setSiteIsRegistering:S,setUserIsConnecting:w,setRegistrationError:y,clearRegistrationError:v,setAuthorizationUrl:M,registerSite:H,connectUser:h,disconnectUserSuccess:I,setConnectedPlugins:P,refreshConnectedPlugins:()=>async e=>{let{dispatch:n}=e;return await new Promise(g=>C.ZP.fetchConnectedPlugins().then(p=>{n(P(p)),g(p)}))},setConnectionErrors:b};var V=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const k="jetpack-connection",J=e=>{let{registrationNonce:n,redirectUri:g}=e;return C.ZP.registerSite(n,g)},X=(0,V.R)(e=>{let{resolveSelect:n}=e;return function(){let{from:g,redirectFunc:p,redirectUri:D}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((B,_e)=>{n(k).getAuthorizationUrl(D).then(Z=>{const me=p||(Ee=>window.location.assign(Ee)),W=new URL(Z);g&&W.searchParams.set("from",encodeURIComponent(g));const K=W.toString();me(K),B(K)}).catch(Z=>{_e(Z)})})}}),$={FETCH_AUTHORIZATION_URL:e=>{let{redirectUri:n}=e;return C.ZP.fetchAuthorizationUrl(n)},REGISTER_SITE:J,CONNECT_USER:X};var L=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const Q=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case E:return{...e,...n.connectionStatus};case r:return{...e,isUserConnected:!1}}return e},Y=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _:return n.connectedPlugins}return e},q=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a:return n.isFetching}return e},ee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case l:return n.isRegistering}return e},te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case o:return n.isConnecting}return e},ne=(e,n)=>{switch(n.type){case u:return!1;case R:return n.registrationError;default:return e}},se=(e,n)=>{switch(n.type){case t:return n.authorizationUrl;default:return e}},oe=(e,n)=>{switch(n.type){default:return e}},re=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case i:return n.connectionErrors}return e},ie=(0,L.UY)({connectionStatus:Q,connectionStatusIsFetching:q,siteIsRegistering:ee,userIsConnecting:te,registrationError:ne,authorizationUrl:se,userConnectionData:oe,connectedPlugins:Y,connectionErrors:re}),ce={...{getAuthorizationUrl:{isFulfilled:function(e){const n=!!e.authorizationUrl;for(var g=arguments.length,p=new Array(g>1?g-1:0),D=1;D<g;D++)p[D-1]=arguments[D];const B=(0,L.Ys)(k).hasFinishedResolution("getAuthorizationUrl",p);return n&&!B&&(0,L.WI)(k).finishResolution("getAuthorizationUrl",p),n},*fulfill(e){const n=yield z.fetchAuthorizationUrl(e);yield z.setAuthorizationUrl(n.authorizeUrl)}}}},ae={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getWpcomUser:e=>{var n,g;return(g=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:g.wpcomUser},getBlogId:e=>{var n,g;return(g=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:g.blogId}}};var ue=c("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),de=c.n(ue),le=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class A{static mayBeInit(n,g){A.store===null&&(A.store=(0,le.Z)(n,g),(0,L.z2)(A.store))}}de()(A,"store",null);const ge=A,G=window.JP_CONNECTION_INITIAL_STATE;G||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),ge.mayBeInit(k,{__experimentalUseThunks:!0,reducer:ie,actions:z,selectors:ae,resolvers:ce,controls:$,initialState:G||{}})},"../../plugins/protect/src/js/hooks/use-analytics-tracks/index.js":(x,U,c)=>{c.d(U,{Z:()=>l});var C=c("../analytics/index.jsx"),E=c("../connection/components/use-connection/index.jsx"),a=c("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const l=function(){var S;let{pageViewEventName:o,pageViewNamespace:R="jetpack",pageViewSuffix:u="page_view",pageViewEventProperties:T={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{isUserConnected:t,isRegistered:s,userConnectionData:r}=(0,E.Z)(),{login:d,ID:_}=((S=r.currentUser)==null?void 0:S.wpcomUser)||{},{tracks:O}=C.Z,{recordEvent:i}=O,m=(0,a.useCallback)(async(w,I)=>{i(w,I)},[i]),j=(0,a.useCallback)(function(w,I){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>{};return y=typeof I=="function"?I:y,I=typeof I=="function"?{}:I,()=>m(w,I).then(y)},[m]);(0,a.useEffect)(()=>{t&&_&&d&&C.Z.initialize(_,d)},[t,_,d]);const N=o?`${R}_${o}_${u}`:null;return(0,a.useEffect)(()=>{s&&N&&i(N,T)},[]),{recordEvent:m,recordEventHandler:j}}},"../../plugins/protect/src/js/hooks/use-protect-data/index.js":(x,U,c)=>{c.d(U,{Z:()=>f});var C=c("../../../node_modules/.pnpm/@wordpress+data@9.0.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),E=c("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),a=c("../../plugins/protect/src/js/state/store.js");function f(){const{statusIsFetching:l,status:o,jetpackScan:R,hasRequiredPlan:u}=(0,C.Z)(i=>({statusIsFetching:i(a.t).getStatusIsFetching(),status:i(a.t).getStatus(),jetpackScan:i(a.t).getJetpackScan(),hasRequiredPlan:i(a.t).hasRequiredPlan()}));let T="error";l===!0?T="loading":o.status&&(T=o.status);const t=(0,E.useMemo)(()=>{var i,m;return((m=(i=o.core)==null?void 0:i.threats)==null?void 0:m.length)||0},[o.core]),s=(0,E.useMemo)(()=>(o.plugins||[]).reduce((i,m)=>i+m.threats.length,0),[o.plugins]),r=(0,E.useMemo)(()=>(o.themes||[]).reduce((i,m)=>i+m.threats.length,0),[o.themes]),d=(0,E.useMemo)(()=>{var i;return((i=o.files)==null?void 0:i.length)||0},[o.files]),_=(0,E.useMemo)(()=>{var i;return((i=o.database)==null?void 0:i.length)||0},[o.database]);return{numThreats:t+s+r+d+_,numCoreThreats:t,numPluginsThreats:s,numThemesThreats:r,numFilesThreats:d,numDatabaseThreats:_,lastChecked:o.lastChecked||null,errorCode:o.errorCode||null,errorMessage:o.errorMessage||null,core:o.core||{},plugins:o.plugins||[],themes:o.themes||[],files:{threats:o.files||[]},database:{threats:o.database||[]},currentStatus:T,hasUncheckedItems:o.hasUncheckedItems,jetpackScan:R,hasRequiredPlan:u}}}}]);})();
