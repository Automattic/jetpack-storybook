"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[2920],{"../../packages/videopress/src/client/admin/components/global-notice/stories/index.stories.tsx":(k,f,t)=>{var O,r,H;t.r(f),t.d(f,{__namedExportsOrder:()=>T,_default:()=>u,default:()=>B});var l=t("../../../node_modules/.pnpm/@storybook+addon-actions@7.0.5_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),R=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),p=t("../connection/components/use-connection/index.jsx"),E=t("../../../node_modules/.pnpm/@wordpress+components@25.2.0_@types+react-dom@18.2.6_@types+react@18.2.14_react-dom@18.2.0_react@18.2.0/node_modules/@wordpress/components/build-module/notice/index.js"),o=t("../../../node_modules/.pnpm/@wordpress+i18n@4.36.0/node_modules/@wordpress/i18n/build-module/index.js"),a=t("../../../node_modules/.pnpm/@wordpress+icons@9.27.0/node_modules/@wordpress/icons/build-module/library/warning.js"),y=t("../../../node_modules/.pnpm/@wordpress+icons@9.27.0/node_modules/@wordpress/icons/build-module/library/info.js"),v=t("../../../node_modules/.pnpm/@wordpress+icons@9.27.0/node_modules/@wordpress/icons/build-module/library/check.js"),j=t("../../../node_modules/.pnpm/@wordpress+icons@9.27.0/node_modules/@wordpress/icons/build-module/icon/index.js"),I=t("../../../node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),_=t.n(I),P=t("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),M=t.n(P),C=t("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.21_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.43.3_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/videopress/src/client/admin/components/global-notice/styles.module.scss"),b={};b.insert="head",b.singleton=!1;var z=M()(C.Z,b);const g=C.Z.locals||{};var d=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const S=o.__,A=m=>{switch(m){case"error":return a.Z;case"warning":return a.Z;case"info":return y.Z;case"success":return v.Z;default:return a.Z}};function c(m){let{status:D="error",isDismissible:N=!1,className:F,children:X,actions:h,onRemove:W}=m;const V=_()(F,g.notice,g[`is-${D}`]);return(0,d.jsxs)(E.Z,{status:D,isDismissible:N,onRemove:W,className:V,actions:h,children:[(0,d.jsx)(j.Z,{icon:A(D),className:g.icon}),(0,d.jsx)("div",{className:g.message,children:X})]})}c.displayName="GlobalNotice";const w=()=>{const{adminUri:m,registrationNonce:D}=window.jetpackVideoPressInitialState,{hasConnectedOwner:N,handleRegisterSite:F}=(0,p.Z)({redirectUri:m,from:"jetpack-videopress",registrationNonce:D});return N?null:(0,d.jsx)(c,{addConnectUserLink:!0,actions:[{label:S("Connect your user account to fix this","jetpack-videopress-pkg"),onClick:F,variant:"link",noDefaultClasses:!0}],children:S("Some actions need a user connection to WordPress.com to be able to work","jetpack-videopress-pkg")})};w.displayName="NeedUserConnectionGlobalNotice";try{globalnotice.displayName="globalnotice",globalnotice.__docgenInfo={description:"VideoPress Logo component",displayName:"globalnotice",props:{status:{defaultValue:{value:"error"},description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"info"'},{value:'"warning"'},{value:'"success"'}]}},isDismissible:{defaultValue:{value:"false"},description:"",name:"isDismissible",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"{ label: string; onClick: () => void; variant: string; noDefaultClasses: boolean; }[]"}},addConnectUserLink:{defaultValue:null,description:"",name:"addConnectUserLink",required:!1,type:{name:"string | boolean"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["../../packages/videopress/src/client/admin/components/global-notice/index.tsx#globalnotice"]={docgenInfo:globalnotice.__docgenInfo,name:"globalnotice",path:"../../packages/videopress/src/client/admin/components/global-notice/index.tsx#globalnotice"})}catch(m){}var Z=`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
import GlobalNotice from '..';

export default {
	title: 'Packages/VideoPress/GlobalNotice',
	component: GlobalNotice,
	argTypes: {
		status: {
			control: {
				type: 'select',
			},
			options: [ 'success', 'info', 'warning', 'error' ],
		},
	},
};

const Template = args => <GlobalNotice { ...args } />;

export const _default = Template.bind( {} );
_default.args = {
	children: 'Typical error message',
	isDismissible: true,
	status: 'error',

	onRemove: action( 'onRemove' ),
};
`,x={_default:{startLoc:{col:17,line:19},endLoc:{col:51,line:19},startBody:{col:17,line:19},endBody:{col:51,line:19}}};const B={parameters:{storySource:{source:`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
import GlobalNotice from '..';
export default {
  title: 'Packages/VideoPress/GlobalNotice',
  component: GlobalNotice,
  argTypes: {
    status: {
      control: {
        type: 'select'
      },
      options: ['success', 'info', 'warning', 'error']
    }
  }
};
const Template = args => <GlobalNotice {...args} />;
export const _default = Template.bind({});
_default.args = {
  children: 'Typical error message',
  isDismissible: true,
  status: 'error',
  onRemove: action('onRemove')
};
_default.parameters = {
  ..._default.parameters,
  docs: {
    ..._default.parameters?.docs,
    source: {
      originalSource: "args => <GlobalNotice {...args} />",
      ..._default.parameters?.docs?.source
    }
  }
};`,locationsMap:{default:{startLoc:{col:17,line:19},endLoc:{col:51,line:19},startBody:{col:17,line:19},endBody:{col:51,line:19}}}}},title:"Packages/VideoPress/GlobalNotice",component:c,argTypes:{status:{control:{type:"select"},options:["success","info","warning","error"]}}},U=m=>(0,d.jsx)(c,{...m});U.displayName="Template";const u=U.bind({});u.args={children:"Typical error message",isDismissible:!0,status:"error",onRemove:(0,l.aD)("onRemove")},u.parameters={...u.parameters,docs:{...(O=u.parameters)==null?void 0:O.docs,source:{originalSource:"args => <GlobalNotice {...args} />",...(H=(r=u.parameters)==null?void 0:r.docs)==null?void 0:H.source}}};const T=["_default"]},"../connection/components/use-connection/index.jsx":(k,f,t)=>{t.d(f,{Z:()=>y});var l=t("../api/index.jsx"),R=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),p=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),E=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),o=t("../connection/state/store.jsx");const a=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},y=function(){let{registrationNonce:v=a.registrationNonce,apiRoot:j=a.apiRoot,apiNonce:I=a.apiNonce,redirectUri:_,autoTrigger:P,from:M,skipUserConnection:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:b,connectUser:z,refreshConnectedPlugins:g}=(0,R.Z)(o.t),d=(0,p.Z)(r=>r(o.t).getRegistrationError()),{siteIsRegistering:S,userIsConnecting:A,userConnectionData:c,connectedPlugins:w,connectionErrors:Z,isRegistered:x,isUserConnected:B,hasConnectedOwner:U,isOfflineMode:u}=(0,p.Z)(r=>({siteIsRegistering:r(o.t).getSiteIsRegistering(),userIsConnecting:r(o.t).getUserIsConnecting(),userConnectionData:r(o.t).getUserConnectionData(),connectedPlugins:r(o.t).getConnectedPlugins(),connectionErrors:r(o.t).getConnectionErrors(),isOfflineMode:r(o.t).getIsOfflineMode(),...r(o.t).getConnectionStatus()})),T=()=>{if(C){if(_)return window.location=_,Promise.resolve(_)}else return z({from:M,redirectUri:_});return Promise.resolve()},O=r=>(r&&r.preventDefault(),x?T():b({registrationNonce:v,redirectUri:_}).then(()=>T()));return(0,E.useEffect)(()=>{l.ZP.setApiRoot(j),l.ZP.setApiNonce(I)},[j,I]),(0,E.useEffect)(()=>{P&&!S&&!A&&O()},[]),{handleRegisterSite:O,handleConnectUser:T,refreshConnectedPlugins:g,isRegistered:x,isUserConnected:B,siteIsRegistering:S,userIsConnecting:A,registrationError:d,userConnectionData:c,hasConnectedOwner:U,connectedPlugins:w,connectionErrors:Z,isOfflineMode:u}}},"../connection/state/store.jsx":(k,f,t)=>{t.d(f,{t:()=>h});var l=t("../api/index.jsx");const R="SET_CONNECTION_STATUS",p="SET_CONNECTION_STATUS_IS_FETCHING",E="FETCH_CONNECTION_STATUS",o="SET_SITE_IS_REGISTERING",a="SET_USER_IS_CONNECTING",y="SET_REGISTRATION_ERROR",v="CLEAR_REGISTRATION_ERROR",j="REGISTER_SITE",I="SET_AUTHORIZATION_URL",_="CONNECT_USER",P="DISCONNECT_USER_SUCCESS",M="FETCH_AUTHORIZATION_URL",C="SET_CONNECTED_PLUGINS",b="REFRESH_CONNECTED_PLUGINS",z="SET_CONNECTION_ERRORS",g="SET_IS_OFFLINE_MODE",d=e=>({type:R,connectionStatus:e}),S=e=>({type:p,isFetching:e}),A=()=>({type:E}),c=e=>({type:o,isRegistering:e}),w=e=>({type:a,isConnecting:e}),Z=()=>({type:P}),x=e=>({type:y,registrationError:e}),B=()=>({type:v}),U=e=>({type:I,authorizationUrl:e}),u=e=>({type:M,redirectUri:e}),T=e=>({type:C,connectedPlugins:e}),O=e=>({type:z,connectionErrors:e}),r=e=>({type:g,isOfflineMode:e});function H(){let{from:e,redirectFunc:n,redirectUri:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield w(!0),yield{type:_,from:e,redirectFunc:n,redirectUri:s}}()}function m(e){let{registrationNonce:n,redirectUri:s}=e;return function*(){yield B(),yield c(!0);try{const i=yield{type:j,registrationNonce:n,redirectUri:s};return yield d({isRegistered:!0}),yield U(i.authorizeUrl),yield c(!1),Promise.resolve(i)}catch(i){return yield x(i),yield c(!1),Promise.reject(i)}}()}const N={setConnectionStatus:d,setConnectionStatusIsFetching:S,fetchConnectionStatus:A,fetchAuthorizationUrl:u,setSiteIsRegistering:c,setUserIsConnecting:w,setRegistrationError:x,clearRegistrationError:B,setAuthorizationUrl:U,registerSite:m,connectUser:H,disconnectUserSuccess:Z,setConnectedPlugins:T,refreshConnectedPlugins:()=>async e=>{let{dispatch:n}=e;return await new Promise(s=>l.ZP.fetchConnectedPlugins().then(i=>{n(T(i)),s(i)}))},setConnectionErrors:O,setIsOfflineMode:r};var F=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const h="jetpack-connection",W=e=>{let{registrationNonce:n,redirectUri:s}=e;return l.ZP.registerSite(n,s)},V=(0,F.R)(e=>{let{resolveSelect:n}=e;return function(){let{from:s,redirectFunc:i,redirectUri:G}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((K,Ie)=>{n(h).getAuthorizationUrl(G).then(Y=>{const Ce=i||(Se=>window.location.assign(Se)),$=new URL(Y);s&&$.searchParams.set("from",encodeURIComponent(s));const q=$.toString();Ce(q),K(q)}).catch(Y=>{Ie(Y)})})}}),ee={FETCH_AUTHORIZATION_URL:e=>{let{redirectUri:n}=e;return l.ZP.fetchAuthorizationUrl(n)},REGISTER_SITE:W,CONNECT_USER:V};var J=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case R:return{...e,...n.connectionStatus};case P:return{...e,isUserConnected:!1}}return e},te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case C:return n.connectedPlugins}return e},se=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case p:return n.isFetching}return e},oe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case o:return n.isRegistering}return e},re=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a:return n.isConnecting}return e},ie=(e,n)=>{switch(n.type){case v:return!1;case y:return n.registrationError;default:return e}},ae=(e,n)=>{switch(n.type){case I:return n.authorizationUrl;default:return e}},ce=(e,n)=>{switch(n.type){default:return e}},le=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case z:return n.connectionErrors}return e},de=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g:return n.isConnecting}return e},ue=(0,J.UY)({connectionStatus:ne,connectionStatusIsFetching:se,siteIsRegistering:oe,userIsConnecting:re,registrationError:ie,authorizationUrl:ae,userConnectionData:ce,connectedPlugins:te,connectionErrors:le,isOfflineMode:de});var me=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),pe=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const _e={...{getAuthorizationUrl:{isFulfilled:function(e){const n=!!e.authorizationUrl;for(var s=arguments.length,i=new Array(s>1?s-1:0),G=1;G<s;G++)i[G-1]=arguments[G];const K=(0,me.Y)(h).hasFinishedResolution("getAuthorizationUrl",i);return n&&!K&&(0,pe.W)(h).finishResolution("getAuthorizationUrl",i),n},*fulfill(e){const n=yield N.fetchAuthorizationUrl(e);yield N.setAuthorizationUrl(n.authorizeUrl)}}}},ge={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>{var n,s;return(s=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:s.wpcomUser},getBlogId:e=>{var n,s;return(s=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:s.blogId}}};var fe=t("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),Ee=t.n(fe),Te=t("../../../node_modules/.pnpm/@wordpress+data@9.6.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class L{static mayBeInit(n,s){L.store===null&&(L.store=(0,Te.Z)(n,s),(0,J.z2)(L.store))}}Ee()(L,"store",null);const Re=L,Q=window.JP_CONNECTION_INITIAL_STATE;Q||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Re.mayBeInit(h,{__experimentalUseThunks:!0,reducer:ue,actions:N,selectors:ge,resolvers:_e,controls:ee,initialState:Q||{}})},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.21_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.43.3_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/videopress/src/client/admin/components/global-notice/styles.module.scss":(k,f,t)=>{t.d(f,{Z:()=>a});var l=t("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/noSourceMaps.js"),R=t.n(l),p=t("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/api.js"),E=t.n(p),o=E()(R());o.push([k.id,".O4U2IigRCTI0aU8BhBRn{margin:0;font-size:16px}.O4U2IigRCTI0aU8BhBRn.is-error{background-color:var(--jp-red-0)}.O4U2IigRCTI0aU8BhBRn .components-notice__content{display:flex;align-items:center;margin:0;padding:12px 4px}.O4U2IigRCTI0aU8BhBRn .components-notice__content>svg{fill:var(--jp-red-60)}.O4U2IigRCTI0aU8BhBRn .is-link{color:var(--jp-black);font-size:16px;font-weight:600}.O4U2IigRCTI0aU8BhBRn .components-notice__dismiss{align-self:center}.O4U2IigRCTI0aU8BhBRn.p3PMX1cbVKnzwQByPs8r{color:var(--jp-yellow-40)}.O4U2IigRCTI0aU8BhBRn.p3PMX1cbVKnzwQByPs8r .MWYzw6ab74IUviPtFAyo{fill:var(--jp-yellow-40)}.O4U2IigRCTI0aU8BhBRn.SG0xptj_jnXuWDvY2RTG{color:var(--jp-blue-40)}.O4U2IigRCTI0aU8BhBRn.SG0xptj_jnXuWDvY2RTG .MWYzw6ab74IUviPtFAyo{fill:var(--jp-blue-40)}.O4U2IigRCTI0aU8BhBRn.Y8HEO3rLiVzm8xR41_yH{color:var(--jp-green)}.O4U2IigRCTI0aU8BhBRn.Y8HEO3rLiVzm8xR41_yH .MWYzw6ab74IUviPtFAyo{fill:var(--jp-green)}.O4U2IigRCTI0aU8BhBRn .kpYmL80bVc4zklSKLsBq{margin-left:8px}",""]),o.locals={notice:"O4U2IigRCTI0aU8BhBRn","is-warning":"p3PMX1cbVKnzwQByPs8r",icon:"MWYzw6ab74IUviPtFAyo","is-info":"SG0xptj_jnXuWDvY2RTG","is-success":"Y8HEO3rLiVzm8xR41_yH",message:"kpYmL80bVc4zklSKLsBq"};const a=o}}]);})();
