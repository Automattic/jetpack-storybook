"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[1119],{"../../packages/videopress/src/client/admin/components/video-storage-meter/stories/index.stories.tsx":(j,p,e)=>{var _,r,v;e.r(p),e.d(p,{__namedExportsOrder:()=>c,_default:()=>s,default:()=>o});var d=e("../../packages/videopress/src/client/admin/components/video-storage-meter/index.tsx"),l=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const o={title:"Packages/VideoPress/Video Storage Meter",component:d.Z},s=(y=>(0,l.jsx)(d.Z,{...y})).bind({});s.args={total:1024*1024*1024*1024,used:1024*1024*1024*1024/2},s.parameters={...s.parameters,docs:{...(_=s.parameters)==null?void 0:_.docs,source:{originalSource:"args => <VideoStorageMeter {...args} />",...(v=(r=s.parameters)==null?void 0:r.docs)==null?void 0:v.source}}};const c=["_default"]},"../../packages/videopress/src/client/admin/hooks/use-videos/index.js":(j,p,e)=>{e.d(p,{ZP:()=>a});var d=e("../../../node_modules/.pnpm/@wordpress+data@9.23.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),l=e("../../../node_modules/.pnpm/@wordpress+data@9.23.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js"),o=e("../../packages/videopress/src/client/state/constants.js");function a(){const _=(0,d.Z)(t=>t(o.tT).getVideos()),r=(0,d.Z)(t=>t(o.tT).getUploadingVideos()),v=r.length>0,y="",u=(0,d.Z)(t=>t(o.tT).getUploadedVideoCount()),n=(0,d.Z)(t=>t(o.tT).getIsFetching()),m=(0,d.Z)(t=>t(o.tT).getIsFetchingUploadedVideoCount()),i=(0,d.Z)(t=>t(o.tT).getFirstUploadedVideoId()),S=(0,d.Z)(t=>t(o.tT).getFirstVideoProcessed()),h=(0,d.Z)(t=>t(o.tT).getDismissedFirstVideoPopover()),P=(0,d.Z)(t=>t(o.tT).getVideosQuery()||{}),b=(0,d.Z)(t=>t(o.tT).getPagination()),g=(0,d.Z)(t=>t(o.tT).getStorageUsed(),[]),E=(0,d.Z)(t=>t(o.tT).getVideosFilter());return{items:_,uploading:r,isUploading:v,search:y,filter:E,uploadedVideoCount:u,isFetching:n,isFetchingUploadedVideoCount:m,firstUploadedVideoId:i,firstVideoProcessed:S,dismissedFirstVideoPopover:h,...P,...b,...g,setPage:t=>(0,l.W)(o.tT).setVideosQuery({page:t}),setSearch:t=>(0,l.W)(o.tT).setVideosQuery({search:t}),setFilter:(0,l.W)(o.tT).setVideosFilter}}const s=()=>{const _=useSelect(n=>n(STORE_ID).getLocalVideos()),r=useSelect(n=>n(STORE_ID).getUploadedLocalVideoCount()),v=useSelect(n=>n(STORE_ID).getIsFetchingLocalVideos()),y=useSelect(n=>n(STORE_ID).getLocalVideosQuery()||{}),u=useSelect(n=>n(STORE_ID).getLocalPagination());return{items:_,uploadedLocalVideoCount:r,isFetching:v,...y,...u,setPage:n=>dispatch(STORE_ID).setLocalVideosQuery({page:n})}},c=()=>useSelect(r=>r(STORE_ID).getVideosQuery()||{})},"../components/components/progress-bar/index.tsx":(j,p,e)=>{e.d(p,{Z:()=>u});var d=e("../../../node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),l=e.n(d),o=e("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=e.n(o),s=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../components/components/progress-bar/style.module.scss"),c={};c.insert="head",c.singleton=!1;var _=a()(s.Z,c);const r=s.Z.locals||{};var v=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const u=({className:n,progressClassName:m,progress:i,size:S="normal"})=>{if(i==null)return null;const P={width:`${Math.max(Math.min(i,1),0)*100}%`};return(0,v.jsx)("div",{className:l()(n,r.wrapper,{[r.small]:S==="small"}),children:(0,v.jsx)("div",{className:l()(m,r.progress),style:P})})}},"../../packages/videopress/src/client/admin/components/video-storage-meter/index.tsx":(j,p,e)=>{e.d(p,{Z:()=>t});var d=e("../components/components/text/index.tsx"),l=e("../components/components/progress-bar/index.tsx"),o=e("../../../node_modules/.pnpm/@wordpress+i18n@4.53.0/node_modules/@wordpress/i18n/build-module/index.js"),a=e("../../../node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),s=e.n(a),c=e("../../../node_modules/.pnpm/filesize@8.0.6/node_modules/filesize/lib/filesize.min.js"),_=e.n(c),r=e("../../packages/videopress/src/client/admin/hooks/use-plan/index.ts"),v=e("../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts"),y=e("../../packages/videopress/src/client/admin/hooks/use-videos/index.js"),u=e("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=e.n(u),m=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/videopress/src/client/admin/components/video-storage-meter/style.module.scss"),i={};i.insert="head",i.singleton=!1;var S=n()(m.Z,i);const h=m.Z.locals||{};var P=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const b=o.__,g=({className:f,progressBarClassName:x,total:O,used:T})=>{if(!O||T==null)return null;const C=T/O,k=`${(C*100).toFixed()}%`,V=_()(O,{base:10});return(0,P.jsxs)("div",{className:s()(f),children:[(0,P.jsx)(d.ZP,{className:s()(h["percentage-description"]),children:(0,o.gB)(b("%1$s of %2$s of cloud video storage","jetpack-videopress-pkg"),k,V)}),(0,P.jsx)(l.Z,{className:s()(h["progress-bar"],x),progress:C})]})},E=f=>{const{storageUsed:x,uploadedVideoCount:O}=useVideos(),{features:T}=usePlan(),{settings:C}=useVideoPressSettings(),{siteType:k}=C,V=1e3*1e3*1e3*1e3;return k===SITE_TYPE_ATOMIC||T!=null&&T.isVideoPressUnlimitedSupported||!O?null:x?_jsx(g,{...f,used:x,total:V}):_jsx(g,{...f,used:0,total:1})},t=g;try{E.displayName="ConnectVideoStorageMeter",E.__docgenInfo={description:"",displayName:"ConnectVideoStorageMeter",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["../../packages/videopress/src/client/admin/components/video-storage-meter/index.tsx#ConnectVideoStorageMeter"]={docgenInfo:E.__docgenInfo,name:"ConnectVideoStorageMeter",path:"../../packages/videopress/src/client/admin/components/video-storage-meter/index.tsx#ConnectVideoStorageMeter"})}catch(f){}},"../../packages/videopress/src/client/admin/hooks/use-plan/index.ts":(j,p,e)=>{e.d(p,{g:()=>y});var d=e("../../../node_modules/.pnpm/@wordpress+data@9.23.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),l=e("../../packages/videopress/src/client/state/index.js");function o(u){return u.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace("_",""))}function a(u){return u.indexOf("_")!==-1}function s(u,n=!1){const m=Object.assign({},u);for(const i in m)m.hasOwnProperty(i)&&a(i)&&(m[o(i)]=m[i],n&&delete m[i]);return m}const{paidFeatures:c={},siteProductData:_={},productData:r={},productPrice:v={}}=window&&window.jetpackVideoPressInitialState?window.jetpackVideoPressInitialState:{},y=()=>{const u=s(_.pricing_for_ui,!0),n=s(r.introductory_offer,!0),m={...s(r,!0),introductoryOffer:n},{purchases:i,isFetchingPurchases:S}=(0,d.Z)(g=>({purchases:g(l.tT).getPurchases(),isFetchingPurchases:g(l.tT).isFetchingPurchases()}),[]),h=i.map(g=>s(g,!0));function P(g){return h.some(E=>E.productSlug===g)}const b=["jetpack_videopress_bi_yearly","jetpack_videopress","jetpack_videopress_monthly","jetpack_complete_bi_yearly","jetpack_complete","jetpack_complete_monthly","jetpack_business","jetpack_business_monthly","jetpack_personal","jetpack_personal_monthly","jetpack_premium","jetpack_premium_monthly","videopress","videopress-pro","wp_p2_plus_monthly","bundle_pro","value_bundle","value_bundle_monthly","value_bundle-2y","value_bundle-3y","pro-plan","pro-plan-monthly","pro-plan-2y","business-bundle","business-bundle-monthly","business-bundle-2y","business-bundle-3y","wp_com_hundred_year_bundle_centennially","wp_bundle_migration_trial_monthly","wp_bundle_hosting_trial_monthly","ecommerce-bundle","ecommerce-bundle-monthly","ecommerce-bundle-2y","ecommerce-bundle-3y","ecommerce-trial-bundle-monthly","wooexpress-small-bundle-yearly","wooexpress-small-bundle-monthly","wooexpress-medium-bundle-yearly","wooexpress-medium-bundle-monthly"].some(g=>P(g));return{features:c,siteProduct:{...s({..._},!0),pricingForUi:u},product:m,productPrice:v,purchases:h,hasVideoPressPurchase:b,isFetchingPurchases:S}}},"../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts":(j,p,e)=>{var d=e("../../packages/videopress/src/client/state/index.js");const l=()=>{var s,c,_;const o=useDispatch(STORE_ID),a=useSelect(r=>r(STORE_ID).getVideoPressSettings(),[]);return{settings:{videoPressVideosPrivateForSite:(s=a==null?void 0:a.videoPressVideosPrivateForSite)!=null?s:!1,siteIsPrivate:(c=a==null?void 0:a.siteIsPrivate)!=null?c:!1,siteType:(_=a==null?void 0:a.siteType)!=null?_:SITE_TYPE_JETPACK},onUpdate:r=>o.updateVideoPressSettings(r)}}},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../components/components/progress-bar/style.module.scss":(j,p,e)=>{e.d(p,{Z:()=>c});var d=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=e.n(d),o=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/api.js"),a=e.n(o),s=a()(l());s.push([j.id,".W4NUeZAGw0aXojyLmjzP{width:100%;height:12px;background-color:var(--jp-gray-5);border-radius:calc(var(--spacing-base)*3);overflow:hidden}.W4NUeZAGw0aXojyLmjzP.aCtQACi6JDw6tIP5cLu1{height:3px}.W4NUeZAGw0aXojyLmjzP .kaV9vllufIW5_MQslIfu{height:100%;border-radius:calc(var(--spacing-base)*3);background-color:var(--jp-black);min-width:12px}",""]),s.locals={wrapper:"W4NUeZAGw0aXojyLmjzP",small:"aCtQACi6JDw6tIP5cLu1",progress:"kaV9vllufIW5_MQslIfu"};const c=s},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/videopress/src/client/admin/components/video-storage-meter/style.module.scss":(j,p,e)=>{e.d(p,{Z:()=>c});var d=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=e.n(d),o=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/api.js"),a=e.n(o),s=a()(l());s.push([j.id,".J0cboZTh2LMTitQ_wbbw{color:var(--jp-gray-80);margin-bottom:calc(var(--spacing-base)*2)}.uC0NRkCYRpEEddC3UOuf{margin-top:calc(var(--spacing-base)*2)}",""]),s.locals={"percentage-description":"J0cboZTh2LMTitQ_wbbw","progress-bar":"uC0NRkCYRpEEddC3UOuf"};const c=s}}]);})();
