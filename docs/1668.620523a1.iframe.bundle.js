"use strict";(()=>{var pt=Object.defineProperty;var Et=(N,E,r)=>E in N?pt(N,E,{enumerable:!0,configurable:!0,writable:!0,value:r}):N[E]=r;var Me=(N,E,r)=>(Et(N,typeof E!="symbol"?E+"":E,r),r);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[1668],{"../connection/components/use-connection/index.jsx":(N,E,r)=>{r.d(E,{Z:()=>v});var S=r("../api/index.jsx"),l=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),u=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),g=r("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=r("../connection/state/store.jsx");const C=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},v=({registrationNonce:j=C.registrationNonce,apiRoot:I=C.apiRoot,apiNonce:U=C.apiNonce,redirectUri:_,autoTrigger:p,from:P,skipUserConnection:A}={})=>{const{registerSite:q,connectUser:D,refreshConnectedPlugins:x}=(0,l.Z)(i.t),B=(0,u.Z)(m=>m(i.t).getRegistrationError()),{siteIsRegistering:M,userIsConnecting:R,userConnectionData:k,connectedPlugins:f,connectionErrors:H,isRegistered:L,isUserConnected:Z,hasConnectedOwner:ee,isOfflineMode:J}=(0,u.Z)(m=>({siteIsRegistering:m(i.t).getSiteIsRegistering(),userIsConnecting:m(i.t).getUserIsConnecting(),userConnectionData:m(i.t).getUserConnectionData(),connectedPlugins:m(i.t).getConnectedPlugins(),connectionErrors:m(i.t).getConnectionErrors(),isOfflineMode:m(i.t).getIsOfflineMode(),...m(i.t).getConnectionStatus()})),w=()=>{if(A){if(_)return window.location=_,Promise.resolve(_)}else return D({from:P,redirectUri:_});return Promise.resolve()},b=m=>(m&&m.preventDefault(),L?w():q({registrationNonce:j,redirectUri:_}).then(()=>w()));return(0,g.useEffect)(()=>{S.ZP.setApiRoot(I),S.ZP.setApiNonce(U)},[I,U]),(0,g.useEffect)(()=>{p&&!M&&!R&&b()},[]),{handleRegisterSite:b,handleConnectUser:w,refreshConnectedPlugins:x,isRegistered:L,isUserConnected:Z,siteIsRegistering:M,userIsConnecting:R,registrationError:B,userConnectionData:k,hasConnectedOwner:ee,connectedPlugins:f,connectionErrors:H,isOfflineMode:J}}},"../connection/state/store.jsx":(N,E,r)=>{r.d(E,{t:()=>O});var S=r("../api/index.jsx");const l="SET_CONNECTION_STATUS",u="SET_CONNECTION_STATUS_IS_FETCHING",g="FETCH_CONNECTION_STATUS",i="SET_SITE_IS_REGISTERING",C="SET_USER_IS_CONNECTING",v="SET_REGISTRATION_ERROR",j="CLEAR_REGISTRATION_ERROR",I="REGISTER_SITE",U="SET_AUTHORIZATION_URL",_="CONNECT_USER",p="DISCONNECT_USER_SUCCESS",P="FETCH_AUTHORIZATION_URL",A="SET_CONNECTED_PLUGINS",q="REFRESH_CONNECTED_PLUGINS",D="SET_CONNECTION_ERRORS",x="SET_IS_OFFLINE_MODE",B=n=>({type:l,connectionStatus:n}),M=n=>({type:u,isFetching:n}),R=()=>({type:g}),k=n=>({type:i,isRegistering:n}),f=n=>({type:C,isConnecting:n}),H=()=>({type:p}),L=n=>({type:v,registrationError:n}),Z=()=>({type:j}),ee=n=>({type:U,authorizationUrl:n}),J=n=>({type:P,redirectUri:n}),w=n=>({type:A,connectedPlugins:n}),b=n=>({type:D,connectionErrors:n}),m=n=>({type:x,isOfflineMode:n});function*Y({from:n,redirectFunc:c,redirectUri:d}={}){yield f(!0),yield{type:_,from:n,redirectFunc:c,redirectUri:d}}function*te({registrationNonce:n,redirectUri:c}){yield Z(),yield k(!0);try{const d=yield{type:I,registrationNonce:n,redirectUri:c};return yield B({isRegistered:!0}),yield ee(d.authorizeUrl),yield k(!1),Promise.resolve(d)}catch(d){return yield L(d),yield k(!1),Promise.reject(d)}}const G={setConnectionStatus:B,setConnectionStatusIsFetching:M,fetchConnectionStatus:R,fetchAuthorizationUrl:J,setSiteIsRegistering:k,setUserIsConnecting:f,setRegistrationError:L,clearRegistrationError:Z,setAuthorizationUrl:ee,registerSite:te,connectUser:Y,disconnectUserSuccess:H,setConnectedPlugins:w,refreshConnectedPlugins:()=>async({dispatch:n})=>await new Promise(c=>S.ZP.fetchConnectedPlugins().then(d=>{n(w(d)),c(d)})),setConnectionErrors:b,setIsOfflineMode:m};var ae=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const O="jetpack-connection",ie=({registrationNonce:n,redirectUri:c})=>S.ZP.registerSite(n,c),ne=(0,ae.R)(({resolveSelect:n})=>({from:c,redirectFunc:d,redirectUri:he}={})=>new Promise((je,De)=>{n(O).getAuthorizationUrl(he).then(de=>{const ke=d||(Le=>window.location.assign(Le)),Ae=new URL(de);c&&Ae.searchParams.set("from",encodeURIComponent(c));const Pe=Ae.toString();ke(Pe),je(Pe)}).catch(de=>{De(de)})})),h={FETCH_AUTHORIZATION_URL:({redirectUri:n})=>S.ZP.fetchAuthorizationUrl(n),REGISTER_SITE:ie,CONNECT_USER:ne};var V=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const oe=(n={},c)=>{switch(c.type){case l:return{...n,...c.connectionStatus};case p:return{...n,isUserConnected:!1}}return n},Ee=(n={},c)=>{switch(c.type){case A:return c.connectedPlugins}return n},ge=(n=!1,c)=>{switch(c.type){case u:return c.isFetching}return n},F=(n=!1,c)=>{switch(c.type){case i:return c.isRegistering}return n},re=(n=!1,c)=>{switch(c.type){case C:return c.isConnecting}return n},Q=(n,c)=>{switch(c.type){case j:return!1;case v:return c.registrationError;default:return n}},Te=(n,c)=>{switch(c.type){case U:return c.authorizationUrl;default:return n}},Ne=(n,c)=>{switch(c.type){default:return n}},Oe=(n={},c)=>{switch(c.type){case D:return c.connectionErrors}return n},ve=(n=!1,c)=>{switch(c.type){case x:return c.isConnecting}return n},Ue=(0,V.UY)({connectionStatus:oe,connectionStatusIsFetching:ge,siteIsRegistering:F,userIsConnecting:re,registrationError:Q,authorizationUrl:Te,userConnectionData:Ne,connectedPlugins:Ee,connectionErrors:Oe,isOfflineMode:ve});var me=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),we=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const be={...{getAuthorizationUrl:{isFulfilled:(n,...c)=>{const d=!!n.authorizationUrl,he=(0,me.Y)(O).hasFinishedResolution("getAuthorizationUrl",c);return d&&!he&&(0,we.W)(O).finishResolution("getAuthorizationUrl",c),d},*fulfill(n){const c=yield G.fetchAuthorizationUrl(n);yield G.setAuthorizationUrl(c.authorizeUrl)}}}},z={...{getConnectionStatus:n=>n.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:n=>n.siteIsRegistering||!1,getUserIsConnecting:n=>n.userIsConnecting||!1,getRegistrationError:n=>n.registrationError||!1,getAuthorizationUrl:n=>n.authorizationUrl||!1,getUserConnectionData:n=>n.userConnectionData||!1,getConnectedPlugins:n=>n.connectedPlugins||[],getConnectionErrors:n=>n.connectionErrors||[],getIsOfflineMode:n=>n.isOfflineMode||!1,getWpcomUser:n=>{var c,d;return(d=(c=n==null?void 0:n.userConnectionData)==null?void 0:c.currentUser)==null?void 0:d.wpcomUser},getBlogId:n=>{var c,d;return(d=(c=n==null?void 0:n.userConnectionData)==null?void 0:c.currentUser)==null?void 0:d.blogId}}};var Ie=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const ue=class{static mayBeInit(c,d){ue.store===null&&(ue.store=(0,Ie.Z)(c,d),(0,V.z2)(ue.store))}};let Se=ue;Me(Se,"store",null);const Ke=Se,Fe=window.JP_CONNECTION_INITIAL_STATE;Fe||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Ke.mayBeInit(O,{__experimentalUseThunks:!0,reducer:Ue,actions:G,selectors:z,resolvers:be,controls:h,initialState:Fe||{}})},"../../packages/my-jetpack/_inc/components/product-card/action-button.jsx":(N,E,r)=>{r.d(E,{N:()=>A,Z:()=>D});var S=r("../components/components/button/index.tsx"),l=r("../../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js"),u=r("../../../node_modules/.pnpm/@wordpress+icons@9.36.0_react@18.2.0/node_modules/@wordpress/icons/build-module/icon/index.js"),g=r("../../../node_modules/.pnpm/@wordpress+icons@9.36.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/external.js"),i=r("../../../node_modules/.pnpm/@wordpress+icons@9.36.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/check.js"),C=r("../../../node_modules/.pnpm/@wordpress+icons@9.36.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/chevron-down.js"),v=r("../../../node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),j=r.n(v),I=r("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),U=r("../../packages/my-jetpack/_inc/hooks/use-product/index.js"),_=r("../../packages/my-jetpack/_inc/components/product-card/style.module.scss"),p=r("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const P=l.__,A={ACTIVE:"active",INACTIVE:"inactive",ERROR:"error",ABSENT:"plugin_absent",ABSENT_WITH_PLAN:"plugin_absent_with_plan",NEEDS_PURCHASE:"needs_purchase",NEEDS_PURCHASE_OR_FREE:"needs_purchase_or_free",CAN_UPGRADE:"can_upgrade"},q=({status:x,admin:B,name:M,slug:R,onActivate:k,additionalActions:f,onManage:H,onFixConnection:L,isFetching:Z,isInstallingStandalone:ee,isDeactivatingStandalone:J,className:w,onAdd:b,upgradeInInterstitial:m})=>{const[Y,te]=(0,I.useState)(!1),[W,G]=(0,I.useState)({}),{detail:ae}=(0,U.i)(R),{manageUrl:se,purchaseUrl:O}=ae,ie=!se,ne=Z||ee||J,K=(f==null?void 0:f.length)>0,h=(0,I.useMemo)(()=>({variant:ne?void 0:"primary",disabled:ne,className:w}),[ne,w]),V=(0,I.useCallback)(()=>{switch(x){case A.ABSENT:case A.ABSENT_WITH_PLAN:{const F=P("Learn more","jetpack-my-jetpack");return{...h,href:`#/add-${R}`,size:"small",variant:"primary",weight:"regular",label:F,onClick:null}}case A.NEEDS_PURCHASE:return{...h,href:O||`#/add-${R}`,size:"small",variant:"primary",weight:"regular",label:P("Purchase","jetpack-my-jetpack"),onClick:b};case A.CAN_UPGRADE:{const F=P("Upgrade","jetpack-my-jetpack"),re=P("Purchase","jetpack-my-jetpack"),Q=O||m?F:re;return{...h,href:O||`#/add-${R}`,size:"small",variant:"primary",weight:"regular",label:Q,onClick:b}}case A.NEEDS_PURCHASE_OR_FREE:return{...h,href:`#/add-${R}`,size:"small",variant:"primary",weight:"regular",label:P("Start for free","jetpack-my-jetpack"),onClick:b};case A.ACTIVE:{const F=P("View","jetpack-my-jetpack");return{...h,disabled:ie||(h==null?void 0:h.disabled),href:se,size:"small",variant:"secondary",weight:"regular",label:F,onClick:H}}case A.ERROR:return{...h,href:"#/connection",size:"small",variant:"primary",weight:"regular",label:P("Fix connection","jetpack-my-jetpack"),onClick:L};case A.INACTIVE:return{...h,href:"",size:"small",variant:"secondary",weight:"regular",label:P("Activate","jetpack-my-jetpack"),onClick:k};default:return null}},[h,ie,se,k,b,L,H,O,R,x,m]),oe=(0,I.useMemo)(()=>K?[...f,V()]:[V()],[f,V,K]),Ee=(0,I.useCallback)(()=>{te(!Y)},[Y]);if((0,I.useEffect)(()=>{G(oe[0])},[oe]),!B)return(0,p.jsx)(S.Z,{...h,size:"small",variant:"link",weight:"regular",children:(0,l.gB)(P("Learn about %s","jetpack-my-jetpack"),M)});const ge=K&&(0,p.jsx)("div",{className:_.Z["action-button-dropdown"],children:(0,p.jsx)("ul",{className:_.Z["dropdown-menu"],children:[...f,V()].map(({label:F,isExternalLink:re},Q)=>{const Te=()=>{G(oe[Q]),te(!1)};return(0,p.jsx)("li",{children:(0,p.jsxs)("button",{onClick:Te,className:_.Z["dropdown-item"],children:[(0,p.jsxs)("div",{className:_.Z["dropdown-item-label"],children:[F,re&&(0,p.jsx)(u.Z,{icon:g.Z,size:16})]}),F===W.label&&(0,p.jsx)("div",{className:_.Z["active-action-checkmark"],children:(0,p.jsx)(u.Z,{icon:i.Z,size:24,fill:"white"})})]})},Q)})})});return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:j()(_.Z["action-button"],K?_.Z["has-additional-actions"]:null),children:[(0,p.jsx)(S.Z,{...h,...W,children:W.label}),K&&(0,p.jsx)("button",{className:j()(_.Z["dropdown-chevron"],W.variant==="primary"?_.Z.primary:_.Z.secondary),onClick:Ee,children:(0,p.jsx)(u.Z,{icon:C.Z,size:24,fill:W.variant==="primary"?"white":"black"})}),Y&&ge]})})};q.__docgenInfo={description:"",methods:[],displayName:"ActionButton"};const D=q},"../../packages/my-jetpack/_inc/hooks/use-product/index.js":(N,E,r)=>{r.d(E,{i:()=>g});var S=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),l=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),u=r("../../packages/my-jetpack/_inc/state/store.js");function g(i){const{activateProduct:C,deactivateProduct:v,installStandalonePluginForProduct:j,deactivateStandalonePluginForProduct:I}=(0,S.Z)(u.t),U=(0,l.Z)(_=>_(u.t).getProduct(i));return{activate:()=>C(i),deactivate:()=>v(i),deactivateStandalonePlugin:()=>I(i),installStandalonePlugin:()=>j(i),productsList:(0,l.Z)(_=>_(u.t).getProducts()),detail:U,isActive:U.status==="active",isFetching:(0,l.Z)(_=>_(u.t).isFetching(i)),stats:(0,l.Z)(_=>_(u.t).getProductStats(i))}}},"../../packages/my-jetpack/_inc/state/store.js":(N,E,r)=>{r.d(E,{t:()=>ze,N:()=>ut});var S=r("../connection/state/store.jsx"),l=r("../../../node_modules/.pnpm/@wordpress+api-fetch@6.42.0/node_modules/@wordpress/api-fetch/build-module/index.js"),u=r("../../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js");const g="my-jetpack/v1",i="jetpack/v4/stats-app",C=`${g}/site/purchases`,v=`${g}/site/products`,j=`${g}/site/backup/undo-event`,I=`${g}/site/backup/count-items`,U=`${g}/chat/availability`,_=`${g}/chat/authentication`,p=["scan"],P="videopress",A="videopress/v1/stats/featured",q=e=>`${i}/sites/${e}/stats/highlights`,D=u.__,x="SET_PURCHASES_IS_FETCHING",B="FETCH_PURCHASES",M="SET_PURCHASES",R="SET_AVAILABLE_LICENSES_IS_FETCHING",k="FETCH_AVAILABLE_LICENSES",f="SET_AVAILABLE_LICENSES",H="SET_IS_FETCHING_PRODUCT",L="SET_PRODUCT",Z="SET_PRODUCT_REQUEST_ERROR",ee="ACTIVATE_PRODUCT",J="SET_PRODUCT_STATUS",w="SET_CHAT_AVAILABILITY_IS_FETCHING",b="SET_CHAT_AVAILABILITY",m="SET_CHAT_AUTHENTICATION_IS_FETCHING",Y="SET_CHAT_AUTHENTICATION",te="SET_STATS_COUNTS_IS_FETCHING",W="SET_STATS_COUNTS",G="SET_BACKUP_REWINDABLE_EVENTS_IS_FETCHING",ae="SET_BACKUP_REWINDABLE_EVENTS",se="SET_COUNT_BACKUP_ITEMS",O="SET_COUNT_BACKUP_ITEMS_IS_FETCHING",ie="SET_GLOBAL_NOTICE",ne="CLEAN_GLOBAL_NOTICE",K="SET_PRODUCT_STATS",h="SET_IS_FETCHING_PRODUCT_STATS",V=e=>({type:x,isFetching:e}),oe=e=>({type:w,isFetching:e}),Ee=e=>({type:m,isFetching:e}),ge=e=>({type:G,isFetching:e}),F=e=>({type:O,isFetching:e}),re=e=>({type:te,isFetching:e}),Q=()=>({type:B}),Te=e=>({type:M,purchases:e}),Ne=e=>({type:b,chatAvailability:e}),Oe=e=>({type:Y,chatAuthentication:e}),ve=e=>({type:R,isFetching:e}),He=()=>({type:k}),Ue=e=>({type:f,availableLicenses:e}),me=e=>({type:L,product:e}),we=e=>({type:ae,rewindableEvents:e}),Ze=e=>({type:se,backupItems:e}),be=e=>({type:W,statsCounts:e}),le=(e,t)=>({type:Z,productId:e,error:t}),We=(e,t)=>({type:J,productId:e,status:t}),_e=(e,t)=>({type:"SET_GLOBAL_NOTICE",message:e,options:t}),Ge=()=>({type:"CLEAN_GLOBAL_NOTICE"});function z(e,t){return{type:H,productId:e,isFetching:t}}function Ie(e,t,{select:o,dispatch:s,registry:a}){return new Promise((X,$)=>{if(!o.isValidProduct(e)){const y=D("Invalid product name","jetpack-my-jetpack"),pe=new Error(y);s(le(e,pe)),s(_e(y,{status:"error",isDismissible:!0})),$(pe);return}const T=t.activate?"POST":"DELETE";return s(z(e,!0)),(0,l.Z)({path:`${v}/${e}`,method:T}).then(y=>{s(z(e,!1)),s(me(y)),a.dispatch(S.t).refreshConnectedPlugins(),X(y==null?void 0:y.status)}).catch(y=>{const{name:pe}=o.getProduct(e),dt=(0,u.gB)(D("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),pe);s(z(e,!1)),s(le(e,y)),s(_e(dt,{status:"error",isDismissible:!0})),$(y)})})}const he={setPurchasesIsFetching:V,setChatAvailabilityIsFetching:oe,setChatAuthenticationIsFetching:Ee,fetchPurchases:Q,setPurchases:Te,setChatAvailability:Ne,setChatAuthentication:Oe,setAvailableLicensesIsFetching:ve,fetchAvailableLicenses:He,setAvailableLicenses:Ue,setProductStats:(e,t)=>({type:K,productId:e,stats:t}),setIsFetchingProductStats:(e,t)=>({type:h,productId:e,isFetching:t}),setBackupRewindableEvents:we,setBackupRewindableEventsIsFetching:ge,setCountBackupItems:Ze,setCountBackupItemsIsFetching:F,setStatsCounts:be,setStatsCountsIsFetching:re,...{setGlobalNotice:_e,cleanGlobalNotice:Ge},...{setProduct:me,activateProduct:e=>async t=>await Ie(e,{activate:!0},t),deactivateStandalonePluginForProduct:e=>async t=>await Ie(e,{activate:!1},t),installStandalonePluginForProduct:e=>async t=>{const{select:o,dispatch:s,registry:a}=t;return await new Promise((X,$)=>{if(!o.isValidProduct(e)){const T=D("Invalid product name","jetpack-my-jetpack"),y=new Error(T);s(le(e,y)),s(_e(T,{status:"error",isDismissible:!0})),$(y);return}return s(z(e,!0)),(0,l.Z)({path:`${v}/${e}/install-standalone`,method:"POST"}).then(T=>{s(z(e,!1)),s(me(T)),a.dispatch(S.t).refreshConnectedPlugins(),X(T==null?void 0:T.standalone_plugin_info)}).catch(T=>{const{name:y}=o.getProduct(e),pe=(0,u.gB)(D("Failed to install standalone plugin for %1$s: %2$s. Please try again","jetpack-my-jetpack"),y,T.message);s(z(e,!1)),s(le(e,T)),s(_e(pe,{status:"error",isDismissible:!0})),$(T)})})},setIsFetchingProduct:z,setRequestProductError:le,setProductStatus:We}};function je(){return new Promise((e,t)=>{(0,l.Z)({path:C}).then(e).catch(t)})}const De={[B]:je};var de=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ke=(e={},t)=>{switch(t.type){case H:{const{productId:o,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[o]:s},errors:{...e.errors,[o]:s?void 0:e.errors[o]}}}case J:{const{productId:o,status:s}=t;return{...e,items:{...e.items,[o]:{...e.items[o],status:s}}}}case L:{const{product:o}=t,{slug:s}=o;return{...e,items:{...e.items,[s]:o}}}case Z:{const{productId:o,error:s}=t;return{...e,errors:{...e.errors,[o]:s}}}default:return e}},Ae=(e={},t)=>{switch(t.type){case G:return{...e,isFetching:t.isFetching};case ae:return{...e,items:(t==null?void 0:t.rewindableEvents)||{}};default:return e}},Pe=(e={},t)=>{switch(t.type){case O:return{...e,isFetching:t.isFetching};case se:return{...e,items:(t==null?void 0:t.backupItems)||{}};default:return e}},Le=(e={},t)=>{switch(t.type){case x:return{...e,isFetching:t.isFetching};case M:return{...e,items:(t==null?void 0:t.purchases)||[]};default:return e}},Xe=(e={isFetching:!1,isAvailable:!1},t)=>{var o;switch(t.type){case w:return{...e,isFetching:t.isFetching};case b:return{...e,isAvailable:(o=t==null?void 0:t.chatAvailability)==null?void 0:o.is_available};default:return e}},Je=(e={isFetching:!1,jwt:!1},t)=>{var o,s;switch(t.type){case m:return{...e,isFetching:t.isFetching};case Y:return{...e,jwt:(s=(o=t==null?void 0:t.chatAuthentication)==null?void 0:o.user)==null?void 0:s.jwt};default:return e}},Ye=(e={},t)=>{switch(t.type){case R:return{...e,isFetching:t.isFetching};case f:return{...e,items:(t==null?void 0:t.availableLicenses)||[]};default:return e}},Qe=(e={global:{}},t)=>{switch(t.type){case ie:{const{message:o,options:s}=t;return{...e,global:{message:o,options:s}}}case ne:return{...e,global:{}};default:return e}},$e=(e={})=>e,qe=(e={},t)=>{switch(t.type){case h:{const{productId:o,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[o]:s}}}case K:{const{productId:o,stats:s}=t;return{...e,items:{...e.items,[o]:s}}}default:return e}},et=(e={},t)=>{switch(t.type){case te:return{...e,isFetching:t.isFetching};case W:return{...e,data:(t==null?void 0:t.statsCounts)||{}};default:return e}},tt=(0,de.UY)({products:ke,backupRewindableEvents:Ae,countBackupItems:Pe,purchases:Le,chatAvailability:Xe,chatAuthentication:Je,availableLicenses:Ye,notices:Qe,plugins:$e,stats:qe,statsCounts:et});var xe=r("../api/index.jsx"),Be=r("../../packages/my-jetpack/_inc/components/product-card/action-button.jsx");const st=async()=>(0,l.Z)({path:A}),nt=async e=>e===P?st():null,ot=u.__,rt={...{getProduct:{isFulfilled:(e,t)=>{var s;return(((s=e==null?void 0:e.products)==null?void 0:s.items)||{}).hasOwnProperty(t)&&!p.includes(t)},fulfill:e=>async({dispatch:t})=>{try{t.setIsFetchingProduct(e,!0);const o=await(0,l.Z)({path:`${v}/${e}`});return t.setProduct(o),t.setIsFetchingProduct(e,!1),Promise.resolve()}catch(o){if(t.setIsFetchingProduct(e,!1),o!=null&&o.code&&(o!=null&&o.message))return t.setRequestProductError(e,o),Promise.reject(o);throw new Error(o)}}},getPurchases:()=>async({dispatch:e})=>{e.setPurchasesIsFetching(!0);try{e.setPurchases(await(0,l.Z)({path:C})),e.setPurchasesIsFetching(!1)}catch(t){e.setPurchasesIsFetching(!1),t.code!=="not_connected"&&e.setGlobalNotice(ot("There was an error fetching your purchases information. Check your site connectivity and try again.","jetpack-my-jetpack"),{status:"error"})}},getChatAvailability:()=>async({dispatch:e})=>{e.setChatAvailabilityIsFetching(!0);try{e.setChatAvailability(await(0,l.Z)({path:U})),e.setChatAvailabilityIsFetching(!1)}catch(t){e.setChatAvailabilityIsFetching(!1)}},getChatAuthentication:()=>async({dispatch:e})=>{e.setChatAuthenticationIsFetching(!0);try{e.setChatAuthentication(await(0,l.Z)({path:_})),e.setChatAuthenticationIsFetching(!1)}catch(t){e.setChatAuthenticationIsFetching(!1)}},getAvailableLicenses:()=>async({dispatch:e})=>{e.setAvailableLicensesIsFetching(!0);try{const{apiRoot:t,apiNonce:o}=(window==null?void 0:window.myJetpackRest)||{};xe.ZP.setApiRoot(t),xe.ZP.setApiNonce(o);const s=await xe.ZP.getUserLicenses();s&&s.items?e.setAvailableLicenses(s.items.filter(({attached_at:a,revoked_at:X})=>a===null&&X===null)):e.setAvailableLicenses([])}catch(t){e.setAvailableLicenses([])}finally{e.setAvailableLicensesIsFetching(!1)}},getBackupRewindableEvents:()=>async({dispatch:e})=>{e.setBackupRewindableEventsIsFetching(!0);try{e.setBackupRewindableEvents(await(0,l.Z)({path:j})),e.setBackupRewindableEventsIsFetching(!1)}catch(t){e.setBackupRewindableEventsIsFetching(!1)}},getCountBackupItems:()=>async({dispatch:e})=>{e.setCountBackupItemsIsFetching(!0);try{e.setCountBackupItems(await(0,l.Z)({path:I})),e.setCountBackupItemsIsFetching(!1)}catch(t){e.setCountBackupItemsIsFetching(!1)}},getStatsCounts:()=>async e=>{const{dispatch:t,registry:o}=e;t.setStatsCountsIsFetching(!0);const s=o.select(S.t).getBlogId();try{t.setStatsCounts(await(0,l.Z)({path:q(s)})),t.setStatsCountsIsFetching(!1)}catch(a){t.setStatsCountsIsFetching(!1)}}},getProductStats:{isFulfilled:(e,t)=>{var o,s;return((s=(o=e.stats)==null?void 0:o.items)==null?void 0:s.hasOwnProperty(t))||!1},fulfill:e=>async({dispatch:t,select:o})=>{const{status:s}=o.getProduct(e);if(s!==Be.N.ACTIVE)return t.setProductStats(e,null),Promise.resolve();try{t.setIsFetchingProductStats(e,!0);const a=await nt(e);return t.setProductStats(e,a),t.setIsFetchingProductStats(e,!1),Promise.resolve()}catch(a){if(t.setProductStats(e,null),t.setIsFetchingProductStats(e,!1),a!=null&&a.code&&(a!=null&&a.message))return Promise.reject(a);throw new Error(a)}}}};function ct(e){return e.replace(/([-_][a-z])/gi,t=>t.toUpperCase().replace("_",""))}function at(e){return e.indexOf("_")!==-1}function ce(e={},t=!1){const o=Object.assign({},e);for(const s in o)o.hasOwnProperty(s)&&at(s)&&(o[ct(s)]=o[s],t&&delete o[s]);return o}const ye=e=>{var t;return((t=e.products)==null?void 0:t.items)||{}},Ve=e=>Object.keys(ye(e)),it={...{getProducts:ye,getProductNames:Ve,getProduct:(e,t)=>{var a,X;const o=((a=ye(e))==null?void 0:a[t])||{},s=ce(o,!0);return s.standalonePluginInfo=ce(s.standalonePluginInfo||{},!0),s.pricingForUi=ce(s.pricingForUi||{},!0),s.pricingForUi.introductoryOffer=s.pricingForUi.isIntroductoryOffer?ce(s.pricingForUi.introductoryOffer,!0):null,(X=s.pricingForUi)!=null&&X.tiers&&(s.pricingForUi.tiers=ce(s.pricingForUi.tiers,!0),s.pricingForUi.tiers=Object.keys(s.pricingForUi.tiers).reduce(($,fe)=>{const T=ce(s.pricingForUi.tiers[fe],!0)||{};return $[fe]={...T,introductoryOffer:T!=null&&T.isIntroductoryOffer?ce(T==null?void 0:T.introductoryOffer,!0):null},$},{})),s.features=s.features||[],s.supportedProducts=s.supportedProducts||[],s.pricingForUi.fullPricePerMonth=s.pricingForUi.productTerm==="year"?Math.ceil(s.pricingForUi.fullPrice/12*100)/100:s.pricingForUi.fullPrice,s.pricingForUi.discountPricePerMonth=s.pricingForUi.productTerm==="year"?Math.ceil(s.pricingForUi.discountPrice/12*100)/100:s.pricingForUi.discountPrice,s},isValidProduct:(e,t)=>Ve(e).includes(t),isFetching:(e,t)=>{var o,s;return((s=(o=e.products)==null?void 0:o.isFetching)==null?void 0:s[t])||!1},getProductsThatRequiresUserConnection:e=>{const t=ye(e);return Object.keys(t).reduce((o,s)=>{const a=t[s];return(a==null?void 0:a.requires_user_connection)&&((a==null?void 0:a.status)===Be.N.ACTIVE||(a==null?void 0:a.status)===Be.N.ERROR)&&o.push(a==null?void 0:a.name),o},[])}},...{getPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.items)||[]},isRequestingPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.isFetching)||!1}},...{getChatAvailability:e=>e.chatAvailability.isAvailable,isRequestingChatAvailability:e=>e.chatAvailability.isFetching},...{getChatAuthentication:e=>e.chatAuthentication.jwt,isRequestingChatAuthentication:e=>e.chatAuthentication.isFetching},...{getAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.items)||[]},isFetchingAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.isFetching)||!1}},...{getGlobalNotice:e=>{var t;return(t=e.notices)==null?void 0:t.global}},...{hasStandalonePluginInstalled:e=>Object.values(e.plugins).filter(t=>["jetpack-backup","jetpack-boost","jetpack-protect","jetpack-search","jetpack-social","jetpack-videopress"].indexOf(t.TextDomain)>=0).length>0},...{getProductStats:(e,t)=>{var o,s;return(s=(o=e.stats)==null?void 0:o.items)==null?void 0:s[t]},isFetchingProductStats:(e,t)=>{var o,s;return((s=(o=e.stats)==null?void 0:o.isFetching)==null?void 0:s[t])||!1}},...{getBackupRewindableEvents:e=>{var t;return((t=e.backupRewindableEvents)==null?void 0:t.items)||{}},isFetchingBackupRewindableEvents:e=>{var t;return((t=e.backupRewindableEvents)==null?void 0:t.isFetching)||!1}},...{getCountBackupItems:e=>{var t;return((t=e.countBackupItems)==null?void 0:t.items)||{}},isFetchingCountBackupItems:e=>e.countBackupItems.isFetching||!1},...{getStatsCounts:e=>{var t;return(t=e.statsCounts)==null?void 0:t.data},isFetchingStatsCounts:e=>{var t;return((t=e.statsCounts)==null?void 0:t.isFetching)||!1}}};var lt=r("../../../node_modules/.pnpm/@wordpress+data@9.15.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const Ce=class{static mayBeInit(t,o){Ce.store===null&&(Ce.store=(0,lt.Z)(t,o),(0,de.z2)(Ce.store))}};let Re=Ce;Me(Re,"store",null);const _t=Re,ze="my-jetpack";function ut(){_t.mayBeInit(ze,{__experimentalUseThunks:!0,reducer:tt,actions:he,selectors:it,resolvers:rt,controls:De,initialState:window.myJetpackInitialState||{}})}},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/my-jetpack/_inc/components/product-card/style.module.scss":(N,E,r)=>{r.d(E,{Z:()=>C});var S=r("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=r.n(S),u=r("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/api.js"),g=r.n(u),i=g()(l());i.push([N.id,'.GTxJkEnk1nQQsd85aJFX{min-height:200px}.rR6wNk2afMMgoAM48xwu{flex-grow:1}.vC9WtlYfTZJ3PQ2_WJbi{display:flex;align-items:center;justify-content:space-between;width:100%;margin-top:calc(var(--spacing-base)*3);min-height:28px;flex-wrap:wrap}.HMaSD8wdv3EFkpx0cFj6{width:100%;display:flex;gap:var(--spacing-base);align-items:center;justify-content:space-between;margin-bottom:calc(var(--spacing-base)*.5)}.HMaSD8wdv3EFkpx0cFj6 h3{font-weight:700;line-height:28px}.nvijzcm26PCXyNqOKt0x{position:relative;display:flex}.nvijzcm26PCXyNqOKt0x .RciGXG52PWP5wKTnL50p{display:flex;align-items:center;justify-content:center;border:.5px solid var(--jp-black);box-shadow:inset 0 0 0 1px var(--jp-black);border-top-right-radius:var(--jp-border-radius);border-bottom-right-radius:var(--jp-border-radius);cursor:pointer;padding:0}.nvijzcm26PCXyNqOKt0x .pOY9wXeTZXdEQKZILl6e{background-color:var(--jp-black);margin-left:.5px}.nvijzcm26PCXyNqOKt0x .AVZwaNLSRgcRMqKc48hG{background-color:var(--jp-white);border-left-width:0;margin-left:-0.5px}.DQJc9sMD_g3e_epwJHbg{position:absolute;top:calc(100% + var(--spacing-base));left:0;background:var(--jp-white);border-radius:calc(var(--jp-border-radius)/2);box-shadow:0px 1px 1px 0px rgba(0,0,0,.1),0px 1px 1.5px 0px rgba(0,0,0,.1),0px 2px 3px -0.5px rgba(0,0,0,.1);padding:var(--spacing-base)}.DQJc9sMD_g3e_epwJHbg .kZWhJcVFuDAKb3RT9PqL{display:flex;align-items:center;gap:calc(var(--spacing-base)*7);background-color:var(--jp-white);border:none;padding:var(--spacing-base);cursor:pointer;width:100%}.DQJc9sMD_g3e_epwJHbg .kZWhJcVFuDAKb3RT9PqL:hover{background-color:var(--jp-gray-0)}.DQJc9sMD_g3e_epwJHbg .AGNnRRrn8UoGCE9P37gA{display:flex;align-items:center;gap:calc(var(--spacing-base)*.5);font-size:var(--font-label)}.DQJc9sMD_g3e_epwJHbg .EPJdlXOWx5xJVl6EUL5_{background-color:var(--jp-green-50);height:25px;width:25px}.jjq8f4lZIJErfvIJMKfD a,.jjq8f4lZIJErfvIJMKfD button{border-top-right-radius:0;border-bottom-right-radius:0}.XFWD3H3YkLwFqcqU4N3y{white-space:nowrap;height:28px;display:flex;align-items:center}.XFWD3H3YkLwFqcqU4N3y:before{content:"";display:inline-block;width:8px;height:8px;margin-right:var(--spacing-base);border-radius:50%}.XFWD3H3YkLwFqcqU4N3y.gVfztnQIATbFCK7hegRQ{color:var(--jp-green-50)}.XFWD3H3YkLwFqcqU4N3y.gVfztnQIATbFCK7hegRQ:before{background:var(--jp-green-50)}.XFWD3H3YkLwFqcqU4N3y.kDLAyzB7otBfcFxesPp8{color:var(--jp-gray-50)}.XFWD3H3YkLwFqcqU4N3y.kDLAyzB7otBfcFxesPp8:before{background:var(--jp-gray-50)}.XFWD3H3YkLwFqcqU4N3y.PmWCTVHy7wtXBeSTBh7i{color:var(--jp-red-60)}.XFWD3H3YkLwFqcqU4N3y.PmWCTVHy7wtXBeSTBh7i:before{background:var(--jp-red-60)}.XFWD3H3YkLwFqcqU4N3y.XX9rtInwXjlRjEHx007w:before{animation:x8UXNnDUSdNvlwC_6g2z .5s linear infinite}@keyframes x8UXNnDUSdNvlwC_6g2z{0%{opacity:0}50%{opacity:.5}100%{opacity:0}}',""]),i.locals={container:"GTxJkEnk1nQQsd85aJFX",description:"rR6wNk2afMMgoAM48xwu",actions:"vC9WtlYfTZJ3PQ2_WJbi",title:"HMaSD8wdv3EFkpx0cFj6","action-button":"nvijzcm26PCXyNqOKt0x","dropdown-chevron":"RciGXG52PWP5wKTnL50p",primary:"pOY9wXeTZXdEQKZILl6e",secondary:"AVZwaNLSRgcRMqKc48hG","action-button-dropdown":"DQJc9sMD_g3e_epwJHbg","dropdown-item":"kZWhJcVFuDAKb3RT9PqL","dropdown-item-label":"AGNnRRrn8UoGCE9P37gA","active-action-checkmark":"EPJdlXOWx5xJVl6EUL5_","has-additional-actions":"jjq8f4lZIJErfvIJMKfD",status:"XFWD3H3YkLwFqcqU4N3y",active:"gVfztnQIATbFCK7hegRQ",inactive:"kDLAyzB7otBfcFxesPp8",error:"PmWCTVHy7wtXBeSTBh7i","is-fetching":"XX9rtInwXjlRjEHx007w","blink-animation":"x8UXNnDUSdNvlwC_6g2z"};const C=i},"../../packages/my-jetpack/_inc/components/product-card/style.module.scss":(N,E,r)=>{r.d(E,{Z:()=>C});var S=r("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),l=r.n(S),u=r("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../../packages/my-jetpack/_inc/components/product-card/style.module.scss"),g={};g.insert="head",g.singleton=!1;var i=l()(u.Z,g);const C=u.Z.locals||{}}}]);})();
