"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[5863],{"../../../node_modules/.pnpm/@storybook+blocks@8.1.6_@types+react-dom@18.3.0_@types+react@18.3.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@storybook/blocks/dist/Color-PRSJMWNM.mjs":(de,O,h)=>{h.r(O),h.d(O,{ColorControl:()=>S,default:()=>oe});var L=h("../../../node_modules/.pnpm/@storybook+blocks@8.1.6_@types+react-dom@18.3.0_@types+react@18.3.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@storybook/blocks/dist/chunk-GWAJ4KRU.mjs"),r=h("../../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),$=h("../../../node_modules/.pnpm/react-colorful@5.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-colorful/dist/index.mjs"),I=h("../../../node_modules/.pnpm/color-convert@2.0.1/node_modules/color-convert/index.js"),m=h.n(I),B=h("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js"),T=h.n(B),g=h("../../../node_modules/.pnpm/@storybook+theming@8.1.6_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@storybook/theming/dist/index.mjs"),x=h("../../../node_modules/.pnpm/@storybook+components@8.1.6_@types+react-dom@18.3.0_@types+react@18.3.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@storybook/components/dist/index.mjs"),j=h("../../../node_modules/.pnpm/@storybook+icons@1.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@storybook/icons/dist/index.mjs"),z=g.zo.div({position:"relative",maxWidth:250,'&[aria-readonly="true"]':{opacity:.5}}),A=(0,g.zo)(x.WithTooltip)({position:"absolute",zIndex:1,top:4,left:4,"[aria-readonly=true] &":{cursor:"not-allowed"}}),K=g.zo.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),U=(0,g.zo)(x.TooltipNote)(({theme:e})=>({fontFamily:e.typography.fonts.base})),G=g.zo.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),H=g.zo.div(({theme:e,active:t})=>({width:16,height:16,boxShadow:t?`${e.appBorderColor} 0 0 0 1px inset, ${e.textMutedColor}50 0 0 0 4px`:`${e.appBorderColor} 0 0 0 1px inset`,borderRadius:e.appBorderRadius})),X=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,R=({value:e,style:t,...a})=>{let n=`linear-gradient(${e}, ${e}), ${X}, linear-gradient(#fff, #fff)`;return r.createElement(H,{...a,style:{...t,backgroundImage:n}})},V=(0,g.zo)(x.Form.Input)(({theme:e,readOnly:t})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:e.typography.fonts.base})),F=(0,g.zo)(j.MarkupIcon)(({theme:e})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:e.input.color})),M=(e=>(e.RGB="rgb",e.HSL="hsl",e.HEX="hex",e))(M||{}),f=Object.values(M),N=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,J=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Q=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,P=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,Y=/^\s*#?([0-9a-f]{3})\s*$/i,Z={hex:$.gW,rgb:$.ef,hsl:$.W3},k={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},w=e=>{let t=e==null?void 0:e.match(N);if(!t)return[0,0,0,1];let[,a,n,s,d=1]=t;return[a,n,s,d].map(Number)},y=e=>{if(!e)return;let t=!0;if(J.test(e)){let[i,o,_,b]=w(e),[p,c,l]=m().rgb.hsl([i,o,_])||[0,0,0];return{valid:t,value:e,keyword:m().rgb.keyword([i,o,_]),colorSpace:"rgb",rgb:e,hsl:`hsla(${p}, ${c}%, ${l}%, ${b})`,hex:`#${m().rgb.hex([i,o,_]).toLowerCase()}`}}if(Q.test(e)){let[i,o,_,b]=w(e),[p,c,l]=m().hsl.rgb([i,o,_])||[0,0,0];return{valid:t,value:e,keyword:m().hsl.keyword([i,o,_]),colorSpace:"hsl",rgb:`rgba(${p}, ${c}, ${l}, ${b})`,hsl:e,hex:`#${m().hsl.hex([i,o,_]).toLowerCase()}`}}let a=e.replace("#",""),n=m().keyword.rgb(a)||m().hex.rgb(a),s=m().rgb.hsl(n),d=e;if(/[^#a-f0-9]/i.test(e)?d=a:P.test(e)&&(d=`#${a}`),d.startsWith("#"))t=P.test(d);else try{m().keyword.hex(d)}catch(i){t=!1}return{valid:t,value:d,keyword:m().rgb.keyword(n),colorSpace:"hex",rgb:`rgba(${n[0]}, ${n[1]}, ${n[2]}, 1)`,hsl:`hsla(${s[0]}, ${s[1]}%, ${s[2]}%, 1)`,hex:d}},q=(e,t,a)=>{if(!e||!(t!=null&&t.valid))return k[a];if(a!=="hex")return(t==null?void 0:t[a])||k[a];if(!t.hex.startsWith("#"))try{return`#${m().keyword.hex(t.hex)}`}catch(o){return k.hex}let n=t.hex.match(Y);if(!n)return P.test(t.hex)?t.hex:k.hex;let[s,d,i]=n[1].split("");return`#${s}${s}${d}${d}${i}${i}`},ee=(e,t)=>{let[a,n]=(0,r.useState)(e||""),[s,d]=(0,r.useState)(()=>y(a)),[i,o]=(0,r.useState)((s==null?void 0:s.colorSpace)||"hex");(0,r.useEffect)(()=>{let c=e||"",l=y(c);n(c),d(l),o((l==null?void 0:l.colorSpace)||"hex")},[e]);let _=(0,r.useMemo)(()=>q(a,s,i).toLowerCase(),[a,s,i]),b=(0,r.useCallback)(c=>{let l=y(c),E=(l==null?void 0:l.value)||c||"";n(E),E===""&&(d(void 0),t(void 0)),l&&(d(l),o(l.colorSpace),t(l.value))},[t]),p=(0,r.useCallback)(()=>{let c=f.indexOf(i)+1;c>=f.length&&(c=0),o(f[c]);let l=(s==null?void 0:s[f[c]])||"";n(l),t(l)},[s,i,t]);return{value:a,realValue:_,updateValue:b,color:s,colorSpace:i,cycleColorSpace:p}},C=e=>e.replace(/\s*/,"").toLowerCase(),te=(e,t,a)=>{let[n,s]=(0,r.useState)(t!=null&&t.valid?[t]:[]);(0,r.useEffect)(()=>{t===void 0&&s([])},[t]);let d=(0,r.useMemo)(()=>(e||[]).map(o=>typeof o=="string"?y(o):o.title?{...y(o.color),keyword:o.title}:y(o.color)).concat(n).filter(Boolean).slice(-27),[e,n]),i=(0,r.useCallback)(o=>{o!=null&&o.valid&&(d.some(_=>C(_[a])===C(o[a]))||s(_=>_.concat(o)))},[a,d]);return{presets:d,addPreset:i}},S=({name:e,value:t,onChange:a,onFocus:n,onBlur:s,presetColors:d,startOpen:i=!1,argType:o})=>{var D;let _=(0,r.useCallback)(T()(a,200),[a]),{value:b,realValue:p,updateValue:c,color:l,colorSpace:E,cycleColorSpace:ae}=ee(t,_),{presets:W,addPreset:re}=te(d,l,E),se=Z[E],v=!!((D=o==null?void 0:o.table)!=null&&D.readonly);return r.createElement(z,{"aria-readonly":v},r.createElement(A,{startOpen:i,trigger:v?[null]:void 0,closeOnOutsideClick:!0,onVisibleChange:()=>re(l),tooltip:r.createElement(K,null,r.createElement(se,{color:p==="transparent"?"#000000":p,onChange:c,onFocus:n,onBlur:s}),W.length>0&&r.createElement(G,null,W.map((u,le)=>r.createElement(x.WithTooltip,{key:`${u.value}-${le}`,hasChrome:!1,tooltip:r.createElement(U,{note:u.keyword||u.value})},r.createElement(R,{value:u[E],active:l&&C(u[E])===C(l[E]),onClick:()=>c(u.value)})))))},r.createElement(R,{value:p,style:{margin:4}})),r.createElement(V,{id:(0,L.d)(e),value:b,onChange:u=>c(u.target.value),onFocus:u=>u.target.select(),readOnly:v,placeholder:"Choose color..."}),b?r.createElement(F,{onClick:ae}):null)},oe=S}}]);})();
