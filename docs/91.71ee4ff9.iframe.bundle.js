"use strict";(()=>{var Re=Object.defineProperty;var Se=(R,_,s)=>_ in R?Re(R,_,{enumerable:!0,configurable:!0,writable:!0,value:s}):R[_]=s;var K=(R,_,s)=>(Se(R,typeof _!="symbol"?_+"":_,s),s);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[91],{"../analytics/index.jsx":(R,_,s)=>{s.d(_,{Z:()=>O});var f=s("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),S=s.n(f);const a=S()("dops:analytics");let p,d;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;function I(t,o){let r="";if(typeof t=="object"){for(const u in t)r+="&x_"+encodeURIComponent(u)+"="+encodeURIComponent(t[u]);a("Bumping stats %o",t)}else r="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(o),a('Bumping stat "%s" in group "%s"',o,t);return r}function m(t,o){let r="";if(typeof t=="object"){for(const u in t)r+="&"+encodeURIComponent(u)+"="+encodeURIComponent(t[u]);a("Built stats %o",t)}else r="&"+encodeURIComponent(t)+"="+encodeURIComponent(o),a('Built stat "%s" in group "%s"',o,t);return r}const c={initialize:function(t,o,r){c.setUser(t,o),c.setSuperProps(r),c.identifyUser()},setGoogleAnalyticsEnabled:function(t,o=null){this.googleAnalyticsEnabled=t,this.googleAnalyticsKey=o},setMcAnalyticsEnabled:function(t){this.mcAnalyticsEnabled=t},setUser:function(t,o){d={ID:t,username:o}},setSuperProps:function(t){p=t},assignSuperProps:function(t){p=Object.assign(p||{},t)},mc:{bumpStat:function(t,o){const r=I(t,o);c.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+r+"&t="+Math.random())},bumpStatWithPageView:function(t,o){const r=m(t,o);c.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+r+"&t="+Math.random())}},pageView:{record:function(t,o){c.tracks.recordPageView(t),c.ga.recordPageView(t,o)}},purchase:{record:function(t,o,r,u,l,U,C){c.ga.recordPurchase(t,o,r,u,l,U,C)}},tracks:{recordEvent:function(t,o){if(o=o||{},t.indexOf("akismet_")!==0&&t.indexOf("jetpack_")!==0){a('- Event name must be prefixed by "akismet_" or "jetpack_"');return}p&&(a("- Super Props: %o",p),o=Object.assign(o,p)),a('Record event "%s" called with props %s',t,JSON.stringify(o)),window._tkq.push(["recordEvent",t,o])},recordJetpackClick:function(t){const o=typeof t=="object"?t:{target:t};c.tracks.recordEvent("jetpack_wpa_click",o)},recordPageView:function(t){c.tracks.recordEvent("akismet_page_view",{path:t})},setOptOut:function(t){a("Pushing setOptOut: %o",t),window._tkq.push(["setOptOut",t])}},ga:{initialized:!1,initialize:function(){let t={};c.ga.initialized||(d&&(t={userId:"u-"+d.ID}),window.ga("create",this.googleAnalyticsKey,"auto",t),c.ga.initialized=!0)},recordPageView:function(t,o){c.ga.initialize(),a("Recording Page View ~ [URL: "+t+"] [Title: "+o+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",t),window.ga("send",{hitType:"pageview",page:t,title:o}))},recordEvent:function(t,o,r,u){c.ga.initialize();let l="Recording Event ~ [Category: "+t+"] [Action: "+o+"]";typeof r!="undefined"&&(l+=" [Option Label: "+r+"]"),typeof u!="undefined"&&(l+=" [Option Value: "+u+"]"),a(l),this.googleAnalyticsEnabled&&window.ga("send","event",t,o,r,u)},recordPurchase:function(t,o,r,u,l,U,C){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:t,revenue:u,currency:C}),window.ga("ecommerce:addItem",{id:t,name:o,sku:r,price:l,quantity:U}),window.ga("ecommerce:send")}},identifyUser:function(){d&&window._tkq.push(["identifyUser",d.ID,d.username])},setProperties:function(t){window._tkq.push(["setProperties",t])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},O=c},"../connection/components/use-connection/index.jsx":(R,_,s)=>{s.d(_,{Z:()=>m});var f=s("../api/index.jsx"),S=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),a=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),p=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),d=s("../connection/state/store.jsx");const I=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},m=({registrationNonce:c=I.registrationNonce,apiRoot:O=I.apiRoot,apiNonce:t=I.apiNonce,redirectUri:o,autoTrigger:r,from:u,skipUserConnection:l}={})=>{const{registerSite:U,connectUser:C,refreshConnectedPlugins:w}=(0,S.Z)(d.t),A=(0,a.Z)(E=>E(d.t).getRegistrationError()),{siteIsRegistering:h,userIsConnecting:y,userConnectionData:T,connectedPlugins:g,connectionErrors:N,isRegistered:D,isUserConnected:v,hasConnectedOwner:L,isOfflineMode:b}=(0,a.Z)(E=>({siteIsRegistering:E(d.t).getSiteIsRegistering(),userIsConnecting:E(d.t).getUserIsConnecting(),userConnectionData:E(d.t).getUserConnectionData(),connectedPlugins:E(d.t).getConnectedPlugins(),connectionErrors:E(d.t).getConnectionErrors(),isOfflineMode:E(d.t).getIsOfflineMode(),...E(d.t).getConnectionStatus()})),P=()=>{if(l){if(o)return window.location=o,Promise.resolve(o)}else return C({from:u,redirectUri:o});return Promise.resolve()},x=E=>(E&&E.preventDefault(),D?P():U({registrationNonce:c,redirectUri:o}).then(()=>P()));return(0,p.useEffect)(()=>{f.ZP.setApiRoot(O),f.ZP.setApiNonce(t)},[O,t]),(0,p.useEffect)(()=>{r&&!h&&!y&&x()},[]),{handleRegisterSite:x,handleConnectUser:P,refreshConnectedPlugins:w,isRegistered:D,isUserConnected:v,siteIsRegistering:h,userIsConnecting:y,registrationError:A,userConnectionData:T,hasConnectedOwner:L,connectedPlugins:g,connectionErrors:N,isOfflineMode:b}}},"../connection/state/store.jsx":(R,_,s)=>{s.d(_,{t:()=>j});var f=s("../api/index.jsx");const S="SET_CONNECTION_STATUS",a="SET_CONNECTION_STATUS_IS_FETCHING",p="FETCH_CONNECTION_STATUS",d="SET_SITE_IS_REGISTERING",I="SET_USER_IS_CONNECTING",m="SET_REGISTRATION_ERROR",c="CLEAR_REGISTRATION_ERROR",O="REGISTER_SITE",t="SET_AUTHORIZATION_URL",o="CONNECT_USER",r="DISCONNECT_USER_SUCCESS",u="FETCH_AUTHORIZATION_URL",l="SET_CONNECTED_PLUGINS",U="REFRESH_CONNECTED_PLUGINS",C="SET_CONNECTION_ERRORS",w="SET_IS_OFFLINE_MODE",A=e=>({type:S,connectionStatus:e}),h=e=>({type:a,isFetching:e}),y=()=>({type:p}),T=e=>({type:d,isRegistering:e}),g=e=>({type:I,isConnecting:e}),N=()=>({type:r}),D=e=>({type:m,registrationError:e}),v=()=>({type:c}),L=e=>({type:t,authorizationUrl:e}),b=e=>({type:u,redirectUri:e}),P=e=>({type:l,connectedPlugins:e}),x=e=>({type:C,connectionErrors:e}),E=e=>({type:w,isOfflineMode:e});function*V({from:e,redirectFunc:n,redirectUri:i}={}){yield g(!0),yield{type:o,from:e,redirectFunc:n,redirectUri:i}}function*J({registrationNonce:e,redirectUri:n}){yield v(),yield T(!0);try{const i=yield{type:O,registrationNonce:e,redirectUri:n};return yield A({isRegistered:!0}),yield L(i.authorizeUrl),yield T(!1),Promise.resolve(i)}catch(i){return yield D(i),yield T(!1),Promise.reject(i)}}const z={setConnectionStatus:A,setConnectionStatusIsFetching:h,fetchConnectionStatus:y,fetchAuthorizationUrl:b,setSiteIsRegistering:T,setUserIsConnecting:g,setRegistrationError:D,clearRegistrationError:v,setAuthorizationUrl:L,registerSite:J,connectUser:V,disconnectUserSuccess:N,setConnectedPlugins:P,refreshConnectedPlugins:()=>async({dispatch:e})=>await new Promise(n=>f.ZP.fetchConnectedPlugins().then(i=>{e(P(i)),n(i)})),setConnectionErrors:x,setIsOfflineMode:E};var X=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const j="jetpack-connection",$=({registrationNonce:e,redirectUri:n})=>f.ZP.registerSite(e,n),Q=(0,X.R)(({resolveSelect:e})=>({from:n,redirectFunc:i,redirectUri:F}={})=>new Promise((Ce,fe)=>{e(j).getAuthorizationUrl(F).then(B=>{const Ie=i||(Te=>window.location.assign(Te)),H=new URL(B);n&&H.searchParams.set("from",encodeURIComponent(n));const W=H.toString();Ie(W),Ce(W)}).catch(B=>{fe(B)})})),Y={FETCH_AUTHORIZATION_URL:({redirectUri:e})=>f.ZP.fetchAuthorizationUrl(e),REGISTER_SITE:$,CONNECT_USER:Q};var Z=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const q=(e={},n)=>{switch(n.type){case S:return{...e,...n.connectionStatus};case r:return{...e,isUserConnected:!1}}return e},ee=(e={},n)=>{switch(n.type){case l:return n.connectedPlugins}return e},te=(e=!1,n)=>{switch(n.type){case a:return n.isFetching}return e},ne=(e=!1,n)=>{switch(n.type){case d:return n.isRegistering}return e},oe=(e=!1,n)=>{switch(n.type){case I:return n.isConnecting}return e},se=(e,n)=>{switch(n.type){case c:return!1;case m:return n.registrationError;default:return e}},re=(e,n)=>{switch(n.type){case t:return n.authorizationUrl;default:return e}},ie=(e,n)=>{switch(n.type){default:return e}},ce=(e={},n)=>{switch(n.type){case C:return n.connectionErrors}return e},ae=(e=!1,n)=>{switch(n.type){case w:return n.isConnecting}return e},de=(0,Z.UY)({connectionStatus:q,connectionStatusIsFetching:te,siteIsRegistering:ne,userIsConnecting:oe,registrationError:se,authorizationUrl:re,userConnectionData:ie,connectedPlugins:ee,connectionErrors:ce,isOfflineMode:ae});var ue=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),le=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const _e={...{getAuthorizationUrl:{isFulfilled:(e,...n)=>{const i=!!e.authorizationUrl,F=(0,ue.Y)(j).hasFinishedResolution("getAuthorizationUrl",n);return i&&!F&&(0,le.W)(j).finishResolution("getAuthorizationUrl",n),i},*fulfill(e){const n=yield z.fetchAuthorizationUrl(e);yield z.setAuthorizationUrl(n.authorizeUrl)}}}},Ee={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>{var n,i;return(i=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:i.wpcomUser},getBlogId:e=>{var n,i;return(i=(n=e==null?void 0:e.userConnectionData)==null?void 0:n.currentUser)==null?void 0:i.blogId}}};var ge=s("../../../node_modules/.pnpm/@wordpress+data@9.17.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const k=class{static mayBeInit(n,i){k.store===null&&(k.store=(0,ge.Z)(n,i),(0,Z.z2)(k.store))}};let M=k;K(M,"store",null);const pe=M,G=window.JP_CONNECTION_INITIAL_STATE;G||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),pe.mayBeInit(j,{__experimentalUseThunks:!0,reducer:de,actions:z,selectors:Ee,resolvers:_e,controls:Y,initialState:G||{}})},"../../plugins/protect/src/js/hooks/use-analytics-tracks/index.js":(R,_,s)=>{s.d(_,{Z:()=>d});var f=s("../analytics/index.jsx"),S=s("../connection/components/use-connection/index.jsx"),a=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const d=({pageViewEventName:I,pageViewNamespace:m="jetpack",pageViewSuffix:c="page_view",pageViewEventProperties:O={}}={})=>{var y;const{isUserConnected:t,isRegistered:o,userConnectionData:r}=(0,S.Z)(),{login:u,ID:l}=((y=r.currentUser)==null?void 0:y.wpcomUser)||{},{tracks:U}=f.Z,{recordEvent:C}=U,w=(0,a.useCallback)(async(T,g)=>{C(T,g)},[C]),A=(0,a.useCallback)((T,g,N=()=>{})=>(N=typeof g=="function"?g:N,g=typeof g=="function"?{}:g,()=>w(T,g).then(N)),[w]);(0,a.useEffect)(()=>{t&&l&&u&&f.Z.initialize(l,u)},[t,l,u]);const h=I?`${m}_${I}_${c}`:null;return(0,a.useEffect)(()=>{o&&h&&C(h,O)},[]),{recordEvent:w,recordEventHandler:A}}}}]);})();
