"use strict";(()=>{var pt=Object.defineProperty;var mt=(i,s,t)=>s in i?pt(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var dt=(i,s,t)=>(mt(i,typeof s!="symbol"?s+"":s,t),t),Q=(i,s,t)=>{if(!s.has(i))throw TypeError("Cannot "+t)};var o=(i,s,t)=>(Q(i,s,"read from private field"),t?t.call(i):s.get(i)),w=(i,s,t)=>{if(s.has(i))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(i):s.set(i,t)},N=(i,s,t,u)=>(Q(i,s,"write to private field"),u?u.call(i,t):s.set(i,t),t);var b=(i,s,t)=>(Q(i,s,"access private method"),t);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[5462],{"../../packages/my-jetpack/_inc/components/connected-product-card/stories/index.stories.jsx":(i,s,t)=>{var h,U,L;t.r(s),t.d(s,{Default:()=>d,__namedExportsOrder:()=>x,default:()=>m});var u=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=t("../../../node_modules/.pnpm/react-router-dom@6.6.2_react-dom@18.2.0_react@18.2.0/node_modules/react-router-dom/dist/index.js"),f=t("../../../node_modules/.pnpm/react-router@6.6.2_react@18.2.0/node_modules/react-router/dist/index.js"),l=t("../../packages/my-jetpack/_inc/components/connected-product-card/index.jsx"),C=t("../../packages/my-jetpack/_inc/state/store.js"),k=t("../../packages/my-jetpack/_inc/components/product-card/action-button.jsx"),j=t("../../packages/my-jetpack/_inc/components/product-detail-card/stories/utils.js"),v=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),I=`/* eslint-disable react/react-in-jsx-scope */

import React from 'react';
import { HashRouter, Routes, Route } from 'react-router-dom';
import ConnectedProductCard from '../';
import { initStore } from '../../../state/store';
import { PRODUCT_STATUSES } from '../../product-card';
import { getAllMockData, getProductSlugs } from '../../product-detail-card/stories/utils.js';

// Set myJetpackRest global var.
window.myJetpackRest = {};

const mockData = getAllMockData();

initStore();

export default {
	title: 'Packages/My Jetpack/Connected Product Card',
	component: ConnectedProductCard,
	argTypes: {
		slug: {
			options: getProductSlugs(),
			control: { type: 'select' },
		},
		status: {
			options: Object.values( PRODUCT_STATUSES ),
			control: { type: 'select' },
		},
	},
};

const Template = args => (
	<HashRouter>
		<Routes>
			<Route path="/" element={ <ConnectedProductCard { ...args } /> } />
		</Routes>
	</HashRouter>
);

export const Default = Template.bind( {} );
Default.parameters = { mockData };
Default.args = {
	admin: false,
	slug: 'backup',
};
`,S={Default:{startLoc:{col:17,line:32},endLoc:{col:1,line:38},startBody:{col:17,line:32},endBody:{col:1,line:38}}};window.myJetpackRest={};const A=(0,j.As)();(0,C.N)();const m={parameters:{storySource:{source:`

import React from 'react';
import { HashRouter, Routes, Route } from 'react-router-dom';
import ConnectedProductCard from '../';
import { initStore } from '../../../state/store';
import { PRODUCT_STATUSES } from '../../product-card';
import { getAllMockData, getProductSlugs } from '../../product-detail-card/stories/utils.js';

// Set myJetpackRest global var.
window.myJetpackRest = {};

const mockData = getAllMockData();

initStore();

export default {
	title: 'Packages/My Jetpack/Connected Product Card',
	component: ConnectedProductCard,
	argTypes: {
		slug: {
			options: getProductSlugs(),
			control: { type: 'select' },
		},
		status: {
			options: Object.values( PRODUCT_STATUSES ),
			control: { type: 'select' },
		},
	},
};

const Template = args => (
	<HashRouter>
		<Routes>
			<Route path="/" element={ <ConnectedProductCard { ...args } /> } />
		</Routes>
	</HashRouter>
);

export const Default = Template.bind( {} );
Default.parameters = { mockData };
Default.args = {
	admin: false,
	slug: 'backup',
};
`,locationsMap:{default:{startLoc:{col:17,line:32},endLoc:{col:1,line:38},startBody:{col:17,line:32},endBody:{col:1,line:38}}}}},title:"Packages/My Jetpack/Connected Product Card",component:l.Z,argTypes:{slug:{options:(0,j.h7)(),control:{type:"select"}},status:{options:Object.values(k.N),control:{type:"select"}}}},E=p=>(0,v.jsx)(_.UT,{children:(0,v.jsx)(f.Z5,{children:(0,v.jsx)(f.AW,{path:"/",element:(0,v.jsx)(l.Z,{...p})})})});E.displayName="Template";const d=E.bind({});d.parameters={mockData:A},d.args={admin:!1,slug:"backup"},d.parameters={...d.parameters,docs:{...(h=d.parameters)==null?void 0:h.docs,source:{originalSource:`args => <HashRouter>
        <Routes>
            <Route path="/" element={<ConnectedProductCard {...args} />} />
        </Routes>
    </HashRouter>`,...(L=(U=d.parameters)==null?void 0:U.docs)==null?void 0:L.source}}};const x=["Default"]},"../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useMutation.js":(i,s,t)=>{var m,E,d,x,h,Z,L,p,P,y,O,B,Y,J,q,G;t.d(s,{D:()=>S});var u=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=(L=class extends null{constructor(e){super();w(this,h);w(this,m,void 0);w(this,E,void 0);w(this,d,void 0);w(this,x,void 0);this.mutationId=e.mutationId,N(this,E,e.defaultOptions),N(this,d,e.mutationCache),N(this,m,[]),this.state=e.state||f(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...o(this,E),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){o(this,m).includes(e)||(o(this,m).push(e),this.clearGcTimeout(),o(this,d).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,m,o(this,m).filter(c=>c!==e)),this.scheduleGc(),o(this,d).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){o(this,m).length||(this.state.status==="pending"?this.scheduleGc():o(this,d).remove(this))}continue(){var e,c;return(c=(e=o(this,x))==null?void 0:e.continue())!=null?c:this.execute(this.state.variables)}async execute(e){var g,W,T,F,R,r,n,M,H,$,V,et,st,nt,ot,at,rt,it,ct,ut;const c=()=>{var D;return N(this,x,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(z,lt)=>{b(this,h,Z).call(this,{type:"failed",failureCount:z,error:lt})},onPause:()=>{b(this,h,Z).call(this,{type:"pause"})},onContinue:()=>{b(this,h,Z).call(this,{type:"continue"})},retry:(D=this.options.retry)!=null?D:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),o(this,x).promise},a=this.state.status==="pending";try{if(!a){b(this,h,Z).call(this,{type:"pending",variables:e}),await((W=(g=o(this,d).config).onMutate)==null?void 0:W.call(g,e,this));const z=await((F=(T=this.options).onMutate)==null?void 0:F.call(T,e));z!==this.state.context&&b(this,h,Z).call(this,{type:"pending",context:z,variables:e})}const D=await c();return await((r=(R=o(this,d).config).onSuccess)==null?void 0:r.call(R,D,e,this.state.context,this)),await((M=(n=this.options).onSuccess)==null?void 0:M.call(n,D,e,this.state.context)),await(($=(H=o(this,d).config).onSettled)==null?void 0:$.call(H,D,null,this.state.variables,this.state.context,this)),await((et=(V=this.options).onSettled)==null?void 0:et.call(V,D,null,e,this.state.context)),b(this,h,Z).call(this,{type:"success",data:D}),D}catch(D){try{throw await((nt=(st=o(this,d).config).onError)==null?void 0:nt.call(st,D,e,this.state.context,this)),await((at=(ot=this.options).onError)==null?void 0:at.call(ot,D,e,this.state.context)),await((it=(rt=o(this,d).config).onSettled)==null?void 0:it.call(rt,void 0,D,this.state.variables,this.state.context,this)),await((ut=(ct=this.options).onSettled)==null?void 0:ut.call(ct,void 0,D,e,this.state.context)),D}finally{b(this,h,Z).call(this,{type:"error",error:D})}}}},m=new WeakMap,E=new WeakMap,d=new WeakMap,x=new WeakMap,h=new WeakSet,Z=function(e){const c=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=c(this.state),notifyManager.batch(()=>{o(this,m).forEach(a=>{a.onMutationUpdate(e)}),o(this,d).notify({mutation:this,type:"updated",action:e})})},L);function f(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var l=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/notifyManager.js"),C=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/subscribable.js"),k=t("../../../node_modules/.pnpm/@tanstack+query-core@5.20.5/node_modules/@tanstack/query-core/build/modern/utils.js"),j=(G=class extends C.l{constructor(e,c){super();w(this,B);w(this,J);w(this,p,void 0);w(this,P,void 0);w(this,y,void 0);w(this,O,void 0);N(this,p,e),this.setOptions(c),this.bindMethods(),b(this,B,Y).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var a;const c=this.options;this.options=o(this,p).defaultMutationOptions(e),(0,k.VS)(c,this.options)||o(this,p).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,y),observer:this}),c!=null&&c.mutationKey&&this.options.mutationKey&&(0,k.Ym)(c.mutationKey)!==(0,k.Ym)(this.options.mutationKey)?this.reset():(a=o(this,y))==null||a.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=o(this,y))==null||e.removeObserver(this)}onMutationUpdate(e){b(this,B,Y).call(this),b(this,J,q).call(this,e)}getCurrentResult(){return o(this,P)}reset(){var e;(e=o(this,y))==null||e.removeObserver(this),N(this,y,void 0),b(this,B,Y).call(this),b(this,J,q).call(this)}mutate(e,c){var a;return N(this,O,c),(a=o(this,y))==null||a.removeObserver(this),N(this,y,o(this,p).getMutationCache().build(o(this,p),this.options)),o(this,y).addObserver(this),o(this,y).execute(e)}},p=new WeakMap,P=new WeakMap,y=new WeakMap,O=new WeakMap,B=new WeakSet,Y=function(){var c,a;const e=(a=(c=o(this,y))==null?void 0:c.state)!=null?a:f();N(this,P,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},J=new WeakSet,q=function(e){l.V.batch(()=>{var c,a,g,W,T,F,R,r;if(o(this,O)&&this.hasListeners()){const n=o(this,P).variables,M=o(this,P).context;(e==null?void 0:e.type)==="success"?((a=(c=o(this,O)).onSuccess)==null||a.call(c,e.data,n,M),(W=(g=o(this,O)).onSettled)==null||W.call(g,e.data,null,n,M)):(e==null?void 0:e.type)==="error"&&((F=(T=o(this,O)).onError)==null||F.call(T,e.error,n,M),(r=(R=o(this,O)).onSettled)==null||r.call(R,void 0,e.error,n,M))}this.listeners.forEach(n=>{n(o(this,P))})})},G),v=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),I=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/utils.js");function S(K,e){const c=(0,v.NL)(e),[a]=u.useState(()=>new j(c,K));u.useEffect(()=>{a.setOptions(K)},[a,K]);const g=u.useSyncExternalStore(u.useCallback(T=>a.subscribe(l.V.batchCalls(T)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),W=u.useCallback((T,F)=>{a.mutate(T,F).catch(A)},[a]);if(g.error&&(0,I.L)(a.options.throwOnError,[g.error]))throw g.error;return{...g,mutate:W,mutateAsync:g.mutate}}function A(){}},"../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/check.js":(i,s,t)=>{t.d(s,{Z:()=>l});var u=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=t("../../../node_modules/.pnpm/@wordpress+primitives@3.50.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const l=(0,u.createElement)(_.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(_.y$,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}))},"../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/chevron-down.js":(i,s,t)=>{t.d(s,{Z:()=>l});var u=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=t("../../../node_modules/.pnpm/@wordpress+primitives@3.50.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const l=(0,u.createElement)(_.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,u.createElement)(_.y$,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))},"../../packages/my-jetpack/_inc/components/connected-product-card/index.jsx":(i,s,t)=>{t.d(s,{Z:()=>L});var u=t("../components/components/text/index.tsx"),_=t("../connection/components/use-connection/index.jsx"),f=t("../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js"),l=t.n(f),C=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),k=t("../../packages/my-jetpack/_inc/data/products/use-activate.ts"),j=t("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),v=t("../../packages/my-jetpack/_inc/data/constants.ts"),I=t("../../packages/my-jetpack/_inc/data/use-simple-mutation.ts"),S=t("../../packages/my-jetpack/_inc/data/products/use-product.ts");const A=j.__,E=p=>{const{detail:P,refetch:y}=(0,S.Z)(p),{mutate:O,isPending:B}=(0,I.Z)("installPlugin",{path:`${v.Jk}/${p}/install-standalone`,method:"POST"},{onSuccess:y},null,(0,j.gB)(A("Failed to install standalone plugin for %1$s. Please try again","jetpack-my-jetpack"),P.name));return{install:O,isPending:B}};var d=t("../../packages/my-jetpack/_inc/hooks/use-my-jetpack-navigate/index.js"),x=t("../../packages/my-jetpack/_inc/components/product-card/index.jsx"),h=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const U=({admin:p,slug:P,children:y,isDataLoading:O,Description:B=null,additionalActions:X=null,secondaryAction:J=null,upgradeInInterstitial:tt=!1,primaryActionOverride:G})=>{const{isRegistered:K,isUserConnected:e}=(0,_.Z)(),{install:c,isPending:a}=E(P),{activate:g,isPending:W}=(0,k.Z)(P),{detail:T}=(0,S.Z)(P),{name:F,description:R,requiresUserConnection:r,status:n}=T,M=(0,d.Z)("/connection"),H=(0,C.useCallback)(()=>{if((!K||!e)&&r){M();return}g()},[g,K,e,r,M]),$=()=>{const V=R.replace(/\s(?=[^\s]*$)/,"\xA0");return(0,h.jsx)(u.ZP,{variant:"body-small",style:{flexGrow:1},children:V})};return(0,h.jsx)(x.ZP,{name:F,Description:B||$,status:n,admin:p,isFetching:W||a,isDataLoading:O,isInstallingStandalone:a,additionalActions:X,primaryActionOverride:G,secondaryAction:J,slug:P,onActivate:H,onInstallStandalone:c,onActivateStandalone:c,upgradeInInterstitial:tt,children:y})};U.displayName="ConnectedProductCard",U.propTypes={children:l().node,admin:l().bool.isRequired,slug:l().string.isRequired,isDataLoading:l().bool,additionalActions:l().array,primaryActionOverride:l().object,secondaryAction:l().object};const L=U;U.__docgenInfo={description:"",methods:[],displayName:"ConnectedProductCard",props:{Description:{defaultValue:{value:"null",computed:!1},required:!1},additionalActions:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"array"},required:!1},secondaryAction:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"object"},required:!1},upgradeInInterstitial:{defaultValue:{value:"false",computed:!1},required:!1},children:{description:"",type:{name:"node"},required:!1},admin:{description:"",type:{name:"bool"},required:!0},slug:{description:"",type:{name:"string"},required:!0},isDataLoading:{description:"",type:{name:"bool"},required:!1},primaryActionOverride:{description:"",type:{name:"object"},required:!1}}}},"../../packages/my-jetpack/_inc/components/product-detail-card/stories/utils.js":(i,s,t)=>{t.d(s,{As:()=>m,TN:()=>A,h7:()=>E});const S={"anti-spam":{slug:"anti-spam",name:"Anti-Spam",title:"Jepack Anti-Spam",description:"Stop comment and form spam",is_upgradable_by_bundle:["security"],long_description:"Save time and get better responses by automatically blocking spam from your comments and forms.",status:"active",features:["Comment and form spam protection","Powered by Akismet","Block spam without CAPTCHAs","Advanced stats"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},backup:{slug:"backup",name:"Backup",title:"Jepack Backup",description:"Save every change",is_upgradable_by_bundle:["security"],long_description:"Never lose a word, image, page, or time worrying about your site with automated backups & one-click restores.",status:"active",features:["Real-time cloud backups","10GB of backup storage","30-day archive & activity log","One-click restores"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},boost:{slug:"boost",name:"Boost",title:"Jepack Boost",description:"Instant speed and SEO",long_description:"Jetpack Boost gives your site the same performance advantages as the world\u2019s leading websites, no developer required.",status:"inactive",features:["Check your site performance","Enable improvements in one click","Standalone free plugin for those focused on speed"],pricingForUi:{available:!0,is_free:!0}},crm:{slug:"crm",name:"CRM",title:"Jetpack CRM",description:"Connect with your people",long_description:"All of your contacts in one place. Build better relationships with your customers and clients.",status:"inactive",features:["Manage unlimited contacts","Manage billing and create invoices","Fully integrated with WordPress & WooCommerce","Infinitely customizable with integrations and extensions"],pricingForUi:{available:!0,is_free:!0}},extras:{slug:"extras",name:"Extras",title:"Jetpack Extras",description:"Basic tools for a successful site",long_description:"Secure and speed up your site for free with Jetpack's powerful WordPress tools.",status:"active",features:["Measure your impact with beautiful stats","Speed up your site with optimized images","Protect your site against bot attacks","Get notifications if your site goes offline","Enhance your site with dozens of other features"],pricingForUi:{available:!0,is_free:!0}},scan:{slug:"scan",name:"Scan",title:"Jepack Scan",description:"Stay one step ahead of threats",is_upgradable_by_bundle:["security"],long_description:"Automatic scanning and one-click fixes keep your site one step ahead of security threats and malware.",status:"inactive",features:["Automated daily scanning","One-click fixes for most issues","Instant email notifications","Access to latest Firewall rules"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}},search:{slug:"search",name:"Search",title:"Jetpack Search",description:"Help them find what they need",long_description:"Help your site visitors find answers instantly so they keep reading and buying. Great for sites with a lot of content.",status:"inactive",features:["Instant search and indexing","Powerful filtering","Supports 38 languages","Spelling correction"],pricingForUi:{currency_code:"USD",full_price:59.95,discount_price:29.975,coupon_discount:50}},security:{slug:"security",name:"Security",title:"Security",description:"Comprehensive site security, including Backup, Scan, and Anti-spam.",long_description:"Comprehensive site security, including Backup, Scan, and Anti-spam.",status:"inactive",is_bundle:!0,supportedProducts:["backup","scan","anti-spam"],features:["Real-time cloud backups with 10GB storage","Automated real-time malware scan","One-click fixes for most threats","Comment & form spam protection"],pricingForUi:{currency_code:"USD",full_price:299,discount_price:149}},videopress:{slug:"videopress",name:"VideoPress",title:"Jetpack Site VideoPress",description:"High quality, ad-free video",long_description:"High-quality, ad-free video built specifically for WordPress.",status:"inactive",features:["1TB of storage","Built into WordPress editor","Ad-free and customizable player","Unlimited users"],pricingForUi:{currency_code:"USD",full_price:119,discount_price:59}}};function A(d){const h=d.constructor===Array?d:[d],U=h.map(p=>({url:`my-jetpack/v1/site/products/${p}?_locale=user`,method:"GET",status:200,response:S[p]})),L=h.map(p=>({url:`my-jetpack/v1/site/products/${p}?_locale=user`,method:"POST",status:200,response:{...S[p],status:S[p].status==="active"?"inactive":"active"}}));return[...U,...L]}function m(){return A([...Object.keys(S)])}function E(){return["anti-spam","backup","boost","crm","extras","scan","search","videopress"]}},"../../packages/my-jetpack/_inc/hooks/use-my-jetpack-navigate/index.js":(i,s,t)=>{t.d(s,{Z:()=>f});var u=t("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=t("../../../node_modules/.pnpm/react-router@6.6.2_react@18.2.0/node_modules/react-router/dist/index.js");function f(l){const C=(0,_.s0)();return(0,u.useCallback)(()=>C(l),[C,l])}},"../../packages/my-jetpack/_inc/state/store.js":(i,s,t)=>{t.d(s,{t:()=>T,N:()=>F});var u=t("../../../node_modules/.pnpm/@wordpress+api-fetch@6.49.0/node_modules/@wordpress/api-fetch/build-module/index.js");const _="my-jetpack/v1",f="jetpack/v4/stats-app",l=`${_}/site/dismiss-welcome-banner`,C=r=>`${f}/sites/${r}/stats/highlights`,k="SET_STATS_COUNTS_IS_FETCHING",j="SET_STATS_COUNTS",v="SET_DISMISSED_WELCOME_BANNER_IS_FETCHING",I="SET_DISMISSED_WELCOME_BANNER",S=r=>({type:k,isFetching:r}),A=r=>({type:j,statsCounts:r}),m=r=>({type:v,isFetching:r}),E=r=>({type:I,hasBeenDismissed:r}),x={setStatsCounts:A,setStatsCountsIsFetching:S,dismissWelcomeBanner:()=>async r=>{const{dispatch:n}=r;return n(m(!0)),(0,u.Z)({path:l,method:"POST"}).then(()=>{n(E(!0))}).finally(()=>{n(m(!1))})}};var h=t("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const U=(r={})=>r,L=(r={},n)=>{switch(n.type){case k:return{...r,isFetching:n.isFetching};case j:return{...r,data:(n==null?void 0:n.statsCounts)||{}};default:return r}},p=(r={},n)=>{switch(n.type){case v:return{...r,isFetching:n.isFetching};case I:return{...r,hasBeenDismissed:n.hasBeenDismissed};default:return r}},y=(0,h.UY)({plugins:U,statsCounts:L,welcomeBanner:p});var O=t("../connection/state/store.jsx");const X={...{getStatsCounts:()=>async r=>{const{dispatch:n,registry:M}=r;n.setStatsCountsIsFetching(!0);const H=M.select(O.t).getBlogId();try{n.setStatsCounts(await(0,u.Z)({path:C(H)})),n.setStatsCountsIsFetching(!1)}catch($){n.setStatsCountsIsFetching(!1)}}}},c={...{getStatsCounts:r=>{var n;return(n=r.statsCounts)==null?void 0:n.data},isFetchingStatsCounts:r=>{var n;return((n=r.statsCounts)==null?void 0:n.isFetching)||!1}},getWelcomeBannerHasBeenDismissed:r=>{var n;return(n=r.welcomeBanner)==null?void 0:n.hasBeenDismissed}};var a=t("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const R=class{static mayBeInit(n,M){R.store===null&&(R.store=(0,a.Z)(n,M),(0,h.z2)(R.store))}};let g=R;dt(g,"store",null);const W=g,T="my-jetpack";function F(){W.mayBeInit(T,{__experimentalUseThunks:!0,reducer:y,actions:x,selectors:c,resolvers:X,initialState:window.myJetpackInitialState||{}})}},"../../packages/my-jetpack/_inc/data/products/use-activate.ts":(i,s,t)=>{t.d(s,{Z:()=>j});var u=t("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),_=t("../../packages/my-jetpack/_inc/data/constants.ts"),f=t("../../packages/my-jetpack/_inc/data/use-simple-mutation.ts"),l=t("../../packages/my-jetpack/_inc/data/products/use-product.ts");const C=u.__,j=v=>{const{detail:I,refetch:S}=(0,l.Z)(v),{mutate:A,isPending:m}=(0,f.Z)("activateProduct",{path:`${_.Jk}/${v}`,method:"POST"},{onSuccess:S},null,(0,u.gB)(C("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),I.name));return{activate:A,isPending:m}}},"../../packages/my-jetpack/_inc/data/use-simple-mutation.ts":(i,s,t)=>{t.d(s,{Z:()=>C});var u=t("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useMutation.js"),_=t("../../../node_modules/.pnpm/@wordpress+api-fetch@6.49.0/node_modules/@wordpress/api-fetch/build-module/index.js"),f=t("../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts");const C=(k,j,v,I,S)=>{const A=(0,u.D)({mutationKey:[k,I],mutationFn:()=>(0,_.Z)(j),...v}),{isError:m,isPending:E}=A;return(0,f.o)({infoName:k,isError:!E&&m,overrideMessage:S}),A}}}]);})();
