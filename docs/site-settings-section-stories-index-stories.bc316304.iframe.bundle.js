"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[3556],{"../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js":(A,l,n)=>{n.d(l,{Z:()=>c});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/registry-provider/use-registry.js");const c=u=>{const{dispatch:s}=(0,a.Z)();return u===void 0?s:s(u)}},"../../packages/videopress/src/client/admin/components/site-settings-section/stories/index.stories.tsx":(A,l,n)=>{var N,j,R;n.r(l),n.d(l,{__namedExportsOrder:()=>h,_default:()=>_,default:()=>D});var a=n("../../../node_modules/.pnpm/@storybook+addon-actions@7.0.5_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),m=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),c=n("../components/components/layout/container/index.tsx"),u=n("../components/components/layout/col/index.tsx"),s=n("../components/components/text/index.tsx"),p=n("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js"),d=n("../../packages/videopress/src/client/admin/hooks/use-permission/index.ts"),C=n("../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts"),f=n("../../packages/videopress/src/client/admin/components/video-filter/index.tsx"),E=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts"),r=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const I=p.__,v=S=>{let{videoPressVideosPrivateForSite:P,siteIsPrivate:y,siteType:T,onPrivacyChange:O}=S;const{canPerformAction:i}=(0,d.g)(),G=y&&T===E.mP,z=!i||G,K=G?I("You cannot change this setting because your site is private. You can only choose the video privacy default on public sites.","jetpack-videopress-pkg"):null;return(0,r.jsxs)(c.Z,{horizontalSpacing:0,horizontalGap:0,children:[(0,r.jsx)(u.Z,{children:(0,r.jsx)(s.ZP,{variant:"headline-small",mb:1,children:I("Settings","jetpack-videopress-pkg")})}),(0,r.jsx)(u.Z,{sm:12,md:12,lg:12,children:(0,r.jsx)(f.JC,{for:"settings-site-privacy",label:I("Video Privacy: Restrict views to members of this site","jetpack-videopress-pkg"),onChange:O,checked:P,disabled:z,disabledReason:K})})]})};v.displayName="SiteSettingsSection";const x=()=>{const{settings:S,onUpdate:P}=(0,C.C)(),{videoPressVideosPrivateForSite:y,siteIsPrivate:T,siteType:O}=S;return(0,r.jsx)(v,{videoPressVideosPrivateForSite:y,siteIsPrivate:T,siteType:O,onPrivacyChange:i=>{P({videoPressVideosPrivateForSite:i})}})};x.displayName="ConnectSiteSettingsSection";const w=v;var F=`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';

export default {
	title: 'Packages/VideoPress/Site Settings',
	component: SettingsSection,
	argTypes: {},
};

const Template = args => <SettingsSection { ...args } />;

export const _default = Template.bind( {} );
_default.args = {
	onPrivacyChange: action( 'onPrivacyChange' ),
};
`,Z={_default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}};const D={parameters:{storySource:{source:`/**
 * External dependencies
 */
import { action } from '@storybook/addon-actions';
import React from 'react';
/**
 * Internal dependencies
 */
import SettingsSection from '..';
export default {
  title: 'Packages/VideoPress/Site Settings',
  component: SettingsSection,
  argTypes: {}
};
const Template = args => <SettingsSection {...args} />;
export const _default = Template.bind({});
_default.args = {
  onPrivacyChange: action('onPrivacyChange')
};
_default.parameters = {
  ..._default.parameters,
  docs: {
    ..._default.parameters?.docs,
    source: {
      originalSource: "args => <SettingsSection {...args} />",
      ..._default.parameters?.docs?.source
    }
  }
};`,locationsMap:{default:{startLoc:{col:17,line:15},endLoc:{col:54,line:15},startBody:{col:17,line:15},endBody:{col:54,line:15}}}}},title:"Packages/VideoPress/Site Settings",component:w,argTypes:{}},U=S=>(0,r.jsx)(w,{...S});U.displayName="Template";const _=U.bind({});_.args={onPrivacyChange:(0,a.aD)("onPrivacyChange")},_.parameters={..._.parameters,docs:{...(N=_.parameters)==null?void 0:N.docs,source:{originalSource:"args => <SettingsSection {...args} />",...(R=(j=_.parameters)==null?void 0:j.docs)==null?void 0:R.source}}};const h=["_default"]},"../connection/components/use-connection/index.jsx":(A,l,n)=>{n.d(l,{Z:()=>d});var a=n("../api/index.jsx"),m=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),c=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),u=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),s=n("../connection/state/store.jsx");const p=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},d=function(){let{registrationNonce:C=p.registrationNonce,apiRoot:f=p.apiRoot,apiNonce:E=p.apiNonce,redirectUri:r,autoTrigger:I,from:v,skipUserConnection:x}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:w,connectUser:F,refreshConnectedPlugins:Z}=(0,m.Z)(s.t),D=(0,c.Z)(i=>i(s.t).getRegistrationError()),{siteIsRegistering:U,userIsConnecting:_,userConnectionData:h,connectedPlugins:N,connectionErrors:j,isRegistered:R,isUserConnected:S,hasConnectedOwner:P,isOfflineMode:y}=(0,c.Z)(i=>({siteIsRegistering:i(s.t).getSiteIsRegistering(),userIsConnecting:i(s.t).getUserIsConnecting(),userConnectionData:i(s.t).getUserConnectionData(),connectedPlugins:i(s.t).getConnectedPlugins(),connectionErrors:i(s.t).getConnectionErrors(),isOfflineMode:i(s.t).getIsOfflineMode(),...i(s.t).getConnectionStatus()})),T=()=>{if(x){if(r)return window.location=r,Promise.resolve(r)}else return F({from:v,redirectUri:r});return Promise.resolve()},O=i=>(i&&i.preventDefault(),R?T():w({registrationNonce:C,redirectUri:r}).then(()=>T()));return(0,u.useEffect)(()=>{a.ZP.setApiRoot(f),a.ZP.setApiNonce(E)},[f,E]),(0,u.useEffect)(()=>{I&&!U&&!_&&O()},[]),{handleRegisterSite:O,handleConnectUser:T,refreshConnectedPlugins:Z,isRegistered:R,isUserConnected:S,siteIsRegistering:U,userIsConnecting:_,registrationError:D,userConnectionData:h,hasConnectedOwner:P,connectedPlugins:N,connectionErrors:j,isOfflineMode:y}}},"../connection/state/store.jsx":(A,l,n)=>{n.d(l,{t:()=>B});var a=n("../api/index.jsx");const m="SET_CONNECTION_STATUS",c="SET_CONNECTION_STATUS_IS_FETCHING",u="FETCH_CONNECTION_STATUS",s="SET_SITE_IS_REGISTERING",p="SET_USER_IS_CONNECTING",d="SET_REGISTRATION_ERROR",C="CLEAR_REGISTRATION_ERROR",f="REGISTER_SITE",E="SET_AUTHORIZATION_URL",r="CONNECT_USER",I="DISCONNECT_USER_SUCCESS",v="FETCH_AUTHORIZATION_URL",x="SET_CONNECTED_PLUGINS",w="REFRESH_CONNECTED_PLUGINS",F="SET_CONNECTION_ERRORS",Z="SET_IS_OFFLINE_MODE",D=e=>({type:m,connectionStatus:e}),U=e=>({type:c,isFetching:e}),_=()=>({type:u}),h=e=>({type:s,isRegistering:e}),N=e=>({type:p,isConnecting:e}),j=()=>({type:I}),R=e=>({type:d,registrationError:e}),S=()=>({type:C}),P=e=>({type:E,authorizationUrl:e}),y=e=>({type:v,redirectUri:e}),T=e=>({type:x,connectedPlugins:e}),O=e=>({type:F,connectionErrors:e}),i=e=>({type:Z,isOfflineMode:e});function G(){let{from:e,redirectFunc:t,redirectUri:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield N(!0),yield{type:r,from:e,redirectFunc:t,redirectUri:o}}()}function z(e){let{registrationNonce:t,redirectUri:o}=e;return function*(){yield S(),yield h(!0);try{const g=yield{type:f,registrationNonce:t,redirectUri:o};return yield D({isRegistered:!0}),yield P(g.authorizeUrl),yield h(!1),Promise.resolve(g)}catch(g){return yield R(g),yield h(!1),Promise.reject(g)}}()}const H={setConnectionStatus:D,setConnectionStatusIsFetching:U,fetchConnectionStatus:_,fetchAuthorizationUrl:y,setSiteIsRegistering:h,setUserIsConnecting:N,setRegistrationError:R,clearRegistrationError:S,setAuthorizationUrl:P,registerSite:z,connectUser:G,disconnectUserSuccess:j,setConnectedPlugins:T,refreshConnectedPlugins:()=>async e=>{let{dispatch:t}=e;return await new Promise(o=>a.ZP.fetchConnectedPlugins().then(g=>{t(T(g)),o(g)}))},setConnectionErrors:O,setIsOfflineMode:i};var X=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const B="jetpack-connection",Q=e=>{let{registrationNonce:t,redirectUri:o}=e;return a.ZP.registerSite(t,o)},$=(0,X.R)(e=>{let{resolveSelect:t}=e;return function(){let{from:o,redirectFunc:g,redirectUri:M}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((W,Se)=>{t(B).getAuthorizationUrl(M).then(b=>{const Te=g||(Ce=>window.location.assign(Ce)),Y=new URL(b);o&&Y.searchParams.set("from",encodeURIComponent(o));const J=Y.toString();Te(J),W(J)}).catch(b=>{Se(b)})})}}),q={FETCH_AUTHORIZATION_URL:e=>{let{redirectUri:t}=e;return a.ZP.fetchAuthorizationUrl(t)},REGISTER_SITE:Q,CONNECT_USER:$};var k=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{...e,...t.connectionStatus};case I:return{...e,isUserConnected:!1}}return e},te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.connectedPlugins}return e},ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return t.isFetching}return e},se=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return t.isRegistering}return e},oe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.isConnecting}return e},re=(e,t)=>{switch(t.type){case C:return!1;case d:return t.registrationError;default:return e}},ie=(e,t)=>{switch(t.type){case E:return t.authorizationUrl;default:return e}},ce=(e,t)=>{switch(t.type){default:return e}},ae=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.connectionErrors}return e},de=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return t.isConnecting}return e},ue=(0,k.UY)({connectionStatus:ee,connectionStatusIsFetching:ne,siteIsRegistering:se,userIsConnecting:oe,registrationError:re,authorizationUrl:ie,userConnectionData:ce,connectedPlugins:te,connectionErrors:ae,isOfflineMode:de}),le={...{getAuthorizationUrl:{isFulfilled:function(e){const t=!!e.authorizationUrl;for(var o=arguments.length,g=new Array(o>1?o-1:0),M=1;M<o;M++)g[M-1]=arguments[M];const W=(0,k.Ys)(B).hasFinishedResolution("getAuthorizationUrl",g);return t&&!W&&(0,k.WI)(B).finishResolution("getAuthorizationUrl",g),t},*fulfill(e){const t=yield H.fetchAuthorizationUrl(e);yield H.setAuthorizationUrl(t.authorizeUrl)}}}},ge={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>{var t,o;return(o=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:o.wpcomUser},getBlogId:e=>{var t,o;return(o=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:o.blogId}}};var me=n("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),pe=n.n(me),_e=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class L{static mayBeInit(t,o){L.store===null&&(L.store=(0,_e.Z)(t,o),(0,k.z2)(L.store))}}pe()(L,"store",null);const Ee=L,V=window.JP_CONNECTION_INITIAL_STATE;V||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Ee.mayBeInit(B,{__experimentalUseThunks:!0,reducer:ue,actions:H,selectors:ge,resolvers:le,controls:q,initialState:V||{}})},"../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts":(A,l,n)=>{n.d(l,{RB:()=>c,mP:()=>a});const a="atomic",m="simple",c="jetpack"},"../../packages/videopress/src/client/admin/hooks/use-permission/index.ts":(A,l,n)=>{n.d(l,{g:()=>m});var a=n("../connection/components/use-connection/index.jsx");const m=()=>{const{isRegistered:c,hasConnectedOwner:u,isUserConnected:s}=(0,a.Z)();return{isRegistered:c,hasConnectedOwner:u,isUserConnected:s,canPerformAction:c&&u&&s}}},"../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts":(A,l,n)=>{n.d(l,{C:()=>s});var a=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),m=n("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),c=n("../../packages/videopress/src/client/state/index.js"),u=n("../../packages/videopress/src/client/admin/components/site-settings-section/constants.ts");const s=()=>{var C,f,E;const p=(0,a.Z)(c.tT),d=(0,m.Z)(r=>r(c.tT).getVideoPressSettings(),[]);return{settings:{videoPressVideosPrivateForSite:(C=d==null?void 0:d.videoPressVideosPrivateForSite)!=null?C:!1,siteIsPrivate:(f=d==null?void 0:d.siteIsPrivate)!=null?f:!1,siteType:(E=d==null?void 0:d.siteType)!=null?E:u.RB},onUpdate:r=>p.updateVideoPressSettings(r)}}}}]);})();
