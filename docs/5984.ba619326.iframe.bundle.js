(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[5984],{"../../../node_modules/.pnpm/@wordpress+url@3.57.0/node_modules/@wordpress/url/build-module/clean-for-slug.js":(I,R,b)=>{"use strict";b.d(R,{J:()=>S});var k=b("../../../node_modules/.pnpm/remove-accents@0.5.0/node_modules/remove-accents/index.js"),A=b.n(k);function S(c){return c?A()(c).replace(/[\s\./]+/g,"-").replace(/[^\p{L}\p{N}_-]+/gu,"").toLowerCase().replace(/-+/g,"-").replace(/(^-+)|(-+$)/g,""):""}},"../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js":(I,R,b)=>{var k=b("../../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");R.formatArgs=S,R.save=c,R.load=K,R.useColors=A,R.storage=P(),R.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),R.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function A(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function S(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+I.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;h.splice(1,0,p,"color: inherit");let m=0,x=0;h[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(m++,g==="%c"&&(x=m))}),h.splice(x,0,p)}R.log=console.debug||console.log||(()=>{});function c(h){try{h?R.storage.setItem("debug",h):R.storage.removeItem("debug")}catch(p){}}function K(){let h;try{h=R.storage.getItem("debug")}catch(p){}return!h&&typeof k!="undefined"&&"env"in k&&(h=k.env.DEBUG),h}function P(){try{return localStorage}catch(h){}}I.exports=b("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js")(R);const{formatters:j}=I.exports;j.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}},"../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js":(I,R,b)=>{function k(A){c.debug=c,c.default=c,c.coerce=m,c.disable=j,c.enable=P,c.enabled=h,c.humanize=b("../../../node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js"),c.destroy=x,Object.keys(A).forEach(g=>{c[g]=A[g]}),c.names=[],c.skips=[],c.formatters={};function S(g){let _=0;for(let F=0;F<g.length;F++)_=(_<<5)-_+g.charCodeAt(F),_|=0;return c.colors[Math.abs(_)%c.colors.length]}c.selectColor=S;function c(g){let _,F=null,N,H;function L(...z){if(!L.enabled)return;const l=L,s=Number(new Date),f=s-(_||s);l.diff=f,l.prev=_,l.curr=s,_=s,z[0]=c.coerce(z[0]),typeof z[0]!="string"&&z.unshift("%O");let i=0;z[0]=z[0].replace(/%([a-zA-Z%])/g,(y,E)=>{if(y==="%%")return"%";i++;const U=c.formatters[E];if(typeof U=="function"){const T=z[i];y=U.call(l,T),z.splice(i,1),i--}return y}),c.formatArgs.call(l,z),(l.log||c.log).apply(l,z)}return L.namespace=g,L.useColors=c.useColors(),L.color=c.selectColor(g),L.extend=K,L.destroy=c.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>F!==null?F:(N!==c.namespaces&&(N=c.namespaces,H=c.enabled(g)),H),set:z=>{F=z}}),typeof c.init=="function"&&c.init(L),L}function K(g,_){const F=c(this.namespace+(typeof _=="undefined"?":":_)+g);return F.log=this.log,F}function P(g){c.save(g),c.namespaces=g,c.names=[],c.skips=[];let _;const F=(typeof g=="string"?g:"").split(/[\s,]+/),N=F.length;for(_=0;_<N;_++)F[_]&&(g=F[_].replace(/\*/g,".*?"),g[0]==="-"?c.skips.push(new RegExp("^"+g.slice(1)+"$")):c.names.push(new RegExp("^"+g+"$")))}function j(){const g=[...c.names.map(p),...c.skips.map(p).map(_=>"-"+_)].join(",");return c.enable(""),g}function h(g){if(g[g.length-1]==="*")return!0;let _,F;for(_=0,F=c.skips.length;_<F;_++)if(c.skips[_].test(g))return!1;for(_=0,F=c.names.length;_<F;_++)if(c.names[_].test(g))return!0;return!1}function p(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function m(g){return g instanceof Error?g.stack||g.message:g}function x(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}I.exports=k},"../../../node_modules/.pnpm/js-base64@2.6.4/node_modules/js-base64/base64.js":function(I,R,b){var k,A;(function(S,c){I.exports=c(S)})(typeof self!="undefined"?self:typeof window!="undefined"?window:typeof b.g!="undefined"?b.g:this,function(S){"use strict";S=S||{};var c=S.Base64,K="2.6.4",P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=function(a){for(var w={},B=0,M=a.length;B<M;B++)w[a.charAt(B)]=B;return w}(P),h=String.fromCharCode,p=function(a){if(a.length<2){var w=a.charCodeAt(0);return w<128?a:w<2048?h(192|w>>>6)+h(128|w&63):h(224|w>>>12&15)+h(128|w>>>6&63)+h(128|w&63)}else{var w=65536+(a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320);return h(240|w>>>18&7)+h(128|w>>>12&63)+h(128|w>>>6&63)+h(128|w&63)}},m=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,x=function(a){return a.replace(m,p)},g=function(a){var w=[0,2,1][a.length%3],B=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),M=[P.charAt(B>>>18),P.charAt(B>>>12&63),w>=2?"=":P.charAt(B>>>6&63),w>=1?"=":P.charAt(B&63)];return M.join("")},_=S.btoa&&typeof S.btoa=="function"?function(a){return S.btoa(a)}:function(a){if(a.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return a.replace(/[\s\S]{1,3}/g,g)},F=function(a){return _(x(String(a)))},N=function(a){return a.replace(/[+\/]/g,function(w){return w=="+"?"-":"_"}).replace(/=/g,"")},H=function(a,w){return w?N(F(a)):F(a)},L=function(a){return H(a,!0)},z;S.Uint8Array&&(z=function(a,w){for(var B="",M=0,Z=a.length;M<Z;M+=3){var V=a[M],Y=a[M+1],$=a[M+2],G=V<<16|Y<<8|$;B+=P.charAt(G>>>18)+P.charAt(G>>>12&63)+(typeof Y!="undefined"?P.charAt(G>>>6&63):"=")+(typeof $!="undefined"?P.charAt(G&63):"=")}return w?N(B):B});var l=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,s=function(a){switch(a.length){case 4:var w=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),B=w-65536;return h((B>>>10)+55296)+h((B&1023)+56320);case 3:return h((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return h((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},f=function(a){return a.replace(l,s)},i=function(a){var w=a.length,B=w%4,M=(w>0?j[a.charAt(0)]<<18:0)|(w>1?j[a.charAt(1)]<<12:0)|(w>2?j[a.charAt(2)]<<6:0)|(w>3?j[a.charAt(3)]:0),Z=[h(M>>>16),h(M>>>8&255),h(M&255)];return Z.length-=[0,0,2,1][B],Z.join("")},C=S.atob&&typeof S.atob=="function"?function(a){return S.atob(a)}:function(a){return a.replace(/\S{1,4}/g,i)},y=function(a){return C(String(a).replace(/[^A-Za-z0-9\+\/]/g,""))},E=function(a){return f(C(a))},U=function(a){return String(a).replace(/[-_]/g,function(w){return w=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},T=function(a){return E(U(a))},X;S.Uint8Array&&(X=function(a){return Uint8Array.from(y(U(a)),function(w){return w.charCodeAt(0)})});var J=function(){var a=S.Base64;return S.Base64=c,a};if(S.Base64={VERSION:K,atob:y,btoa:_,fromBase64:T,toBase64:H,utob:x,encode:H,encodeURI:L,btou:f,decode:T,noConflict:J,fromUint8Array:z,toUint8Array:X},typeof Object.defineProperty=="function"){var d=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};S.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",d(function(){return T(this)})),Object.defineProperty(String.prototype,"toBase64",d(function(a){return H(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",d(function(){return H(this,!0)}))}}return S.Meteor&&(Base64=S.Base64),I.exports?I.exports.Base64=S.Base64:(k=[],A=function(){return S.Base64}.apply(R,k),A!==void 0&&(I.exports=A)),{Base64:S.Base64}})},"../../../node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js":I=>{var R=1e3,b=R*60,k=b*60,A=k*24,S=A*7,c=A*365.25;I.exports=function(p,m){m=m||{};var x=typeof p;if(x==="string"&&p.length>0)return K(p);if(x==="number"&&isFinite(p))return m.long?j(p):P(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function K(p){if(p=String(p),!(p.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(m){var x=parseFloat(m[1]),g=(m[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return x*c;case"weeks":case"week":case"w":return x*S;case"days":case"day":case"d":return x*A;case"hours":case"hour":case"hrs":case"hr":case"h":return x*k;case"minutes":case"minute":case"mins":case"min":case"m":return x*b;case"seconds":case"second":case"secs":case"sec":case"s":return x*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}function P(p){var m=Math.abs(p);return m>=A?Math.round(p/A)+"d":m>=k?Math.round(p/k)+"h":m>=b?Math.round(p/b)+"m":m>=R?Math.round(p/R)+"s":p+"ms"}function j(p){var m=Math.abs(p);return m>=A?h(p,m,A,"day"):m>=k?h(p,m,k,"hour"):m>=b?h(p,m,b,"minute"):m>=R?h(p,m,R,"second"):p+" ms"}function h(p,m,x,g){var _=m>=x*1.5;return Math.round(p/x)+" "+g+(_?"s":"")}},"../../../node_modules/.pnpm/querystringify@2.2.0/node_modules/querystringify/index.js":(I,R)=>{"use strict";var b=Object.prototype.hasOwnProperty,k;function A(P){try{return decodeURIComponent(P.replace(/\+/g," "))}catch(j){return null}}function S(P){try{return encodeURIComponent(P)}catch(j){return null}}function c(P){for(var j=/([^=?#&]+)=?([^&]*)/g,h={},p;p=j.exec(P);){var m=A(p[1]),x=A(p[2]);m===null||x===null||m in h||(h[m]=x)}return h}function K(P,j){j=j||"";var h=[],p,m;typeof j!="string"&&(j="?");for(m in P)if(b.call(P,m)){if(p=P[m],!p&&(p===null||p===k||isNaN(p))&&(p=""),m=S(m),p=S(p),m===null||p===null)continue;h.push(m+"="+p)}return h.length?j+h.join("&"):""}R.stringify=K,R.parse=c},"../../../node_modules/.pnpm/requires-port@1.0.0/node_modules/requires-port/index.js":I=>{"use strict";I.exports=function(b,k){if(k=k.split(":")[0],b=+b,!b)return!1;switch(k){case"http":case"ws":return b!==80;case"https":case"wss":return b!==443;case"ftp":return b!==21;case"gopher":return b!==70;case"file":return!1}return b!==0}},"../../../node_modules/.pnpm/tus-js-client@2.3.0/node_modules/tus-js-client/lib.esm/browser/index.js":(I,R,b)=>{"use strict";b.d(R,{gq:()=>Qe});var k=b("../../../node_modules/.pnpm/js-base64@2.6.4/node_modules/js-base64/base64.js"),A=b("../../../node_modules/.pnpm/url-parse@1.5.10/node_modules/url-parse/index.js"),S=b.n(A);function c(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(e){return typeof e}:c=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(r)}function K(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function P(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&F(r,n)}function j(r){return function(){var n=N(r),e;if(g()){var t=N(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return h(this,e)}}function h(r,n){return n&&(c(n)==="object"||typeof n=="function")?n:p(r)}function p(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function m(r){var n=typeof Map=="function"?new Map:void 0;return m=function(t){if(t===null||!_(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(t))return n.get(t);n.set(t,o)}function o(){return x(t,arguments,N(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),F(o,t)},m(r)}function x(r,n,e){return g()?x=Reflect.construct:x=function(o,u,v){var O=[null];O.push.apply(O,u);var q=Function.bind.apply(o,O),D=new q;return v&&F(D,v.prototype),D},x.apply(null,arguments)}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function _(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function F(r,n){return F=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},F(r,n)}function N(r){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(r)}var H=function(r){P(e,r);var n=j(e);function e(t){var o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(K(this,e),o=n.call(this,t),o.originalRequest=v,o.originalResponse=O,o.causingError=u,u!=null&&(t+=", caused by ".concat(u.toString())),v!=null){var q=v.getHeader("X-Request-ID")||"n/a",D=v.getMethod(),W=v.getURL(),te=O?O.getStatus():"n/a",fe=O?O.getBody()||"":"n/a";t+=", originated from request (method: ".concat(D,", url: ").concat(W,", response code: ").concat(te,", response text: ").concat(fe,", request id: ").concat(q,")")}return o.message=t,o}return e}(m(Error));const L=H;var z=!1;function l(){z=!0}function s(r){z&&console.log(r)}function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=Math.random()*16|0,e=r=="x"?n:n&3|8;return e.toString(16)})}function i(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,t)}return e}function C(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?i(Object(e),!0).forEach(function(t){y(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function y(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function E(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function U(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function T(r,n,e){return n&&U(r.prototype,n),e&&U(r,e),r}var X={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},J=function(){function r(n,e){E(this,r),"resume"in e&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=e,this._urlStorage=this.options.urlStorage,this.file=n,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return T(r,[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(!t){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var o=this.options.retryDelays;if(o!=null&&Object.prototype.toString.call(o)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach(function(u){e.options[u]&&e._emitError(new Error("tus: cannot use the ".concat(u," option when parallelUploads is enabled")))}),this.options.fingerprint(t,this.options).then(function(u){return u==null?s("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):s("Calculated fingerprint: ".concat(u)),e._fingerprint=u,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(u){e._source=u,e.options.parallelUploads>1||e._parallelUploadUrls!=null?e._startParallelUpload():e._startSingleUpload()}).catch(function(u){e._emitError(u)})}},{key:"_startParallelUpload",value:function(){var e=this,t=this._size=this._source.size,o=0;this._parallelUploads=[];var u=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,v=Y(this._source.size,u,this._parallelUploadUrls);this._parallelUploadUrls=new Array(v.length);var O=v.map(function(D,W){var te=0;return e._source.slice(D.start,D.end).then(function(fe){var tt=fe.value;return new Promise(function(rt,nt){var ot=C({},e.options,{uploadUrl:D.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:C({},e.options.headers,{"Upload-Concat":"partial"}),onSuccess:rt,onError:nt,onProgress:function(re){o=o-te+re,te=re,e._emitProgress(o,t)},_onUploadUrlAvailable:function(){e._parallelUploadUrls[W]=ce.url,e._parallelUploadUrls.filter(function(re){return!!re}).length===v.length&&e._saveUploadInUrlStorage()}}),ce=new r(tt,ot);ce.start(),e._parallelUploads.push(ce)})})}),q;Promise.all(O).then(function(){q=e._openRequest("POST",e.options.endpoint),q.setHeader("Upload-Concat","final;".concat(e._parallelUploadUrls.join(" ")));var D=d(e.options.metadata);return D!==""&&q.setHeader("Upload-Metadata",D),e._sendRequest(q,null)}).then(function(D){if(!a(D.getStatus(),200)){e._emitHttpError(q,D,"tus: unexpected response while creating upload");return}var W=D.getHeader("Location");if(W==null){e._emitHttpError(q,D,"tus: invalid or missing Location header");return}e.url=V(e.options.endpoint,W),s("Created upload at ".concat(e.url)),e._emitSuccess()}).catch(function(D){e._emitError(D)})}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(this.options.uploadSize!=null){if(this._size=+this.options.uploadSize,isNaN(this._size)){this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(this._size=this._source.size,this._size==null){this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return}if(this._aborted=!1,this.url!=null){s("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){s("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,this._resumeUpload();return}s("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(e){var t=this;if(arguments.length>1&&typeof arguments[1]=="function")throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return this._parallelUploads!=null&&this._parallelUploads.forEach(function(o){o.abort(e)}),this._req!==null&&(this._req.abort(),this._source.close()),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!e||this.url==null?Promise.resolve():r.terminate(this.url,this.options).then(function(){return t._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(e,t,o,u){this._emitError(new L(o,u,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(this.options.retryDelays!=null){var o=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(o&&(this._retryAttempt=0),Z(e,this._retryAttempt,this.options)){var u=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){t.start()},u);return}}if(typeof this.options.onError=="function")this.options.onError(e);else throw e}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){typeof this.options.onProgress=="function"&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,o){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(e,t,o)}},{key:"_createUpload",value:function(){var e=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var o=d(this.options.metadata);o!==""&&t.setHeader("Upload-Metadata",o);var u;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,u=this._addChunkToRequest(t)):u=this._sendRequest(t,null),u.then(function(v){if(!a(v.getStatus(),200)){e._emitHttpError(t,v,"tus: unexpected response while creating upload");return}var O=v.getHeader("Location");if(O==null){e._emitHttpError(t,v,"tus: invalid or missing Location header");return}if(e.url=V(e.options.endpoint,O),s("Created upload at ".concat(e.url)),typeof e.options._onUploadUrlAvailable=="function"&&e.options._onUploadUrlAvailable(),e._size===0){e._emitSuccess(),e._source.close();return}e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,v):(e._offset=0,e._performUpload())}).catch(function(v){e._emitHttpError(t,null,"tus: failed to create upload",v)})}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url),o=this._sendRequest(t,null);o.then(function(u){var v=u.getStatus();if(!a(v,200)){if(a(v,400)&&e._removeFromUrlStorage(),v===423){e._emitHttpError(t,u,"tus: upload is currently locked; retry later");return}if(!e.options.endpoint){e._emitHttpError(t,u,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}e.url=null,e._createUpload();return}var O=parseInt(u.getHeader("Upload-Offset"),10);if(isNaN(O)){e._emitHttpError(t,u,"tus: invalid or missing offset value");return}var q=parseInt(u.getHeader("Upload-Length"),10);if(isNaN(q)&&!e.options.uploadLengthDeferred){e._emitHttpError(t,u,"tus: invalid or missing length value");return}if(typeof e.options._onUploadUrlAvailable=="function"&&e.options._onUploadUrlAvailable(),O===q){e._emitProgress(q,q),e._emitSuccess();return}e._offset=O,e._performUpload()}).catch(function(u){e._emitHttpError(t,null,"tus: failed to resume upload",u)})}},{key:"_performUpload",value:function(){var e=this;if(!this._aborted){var t;this.options.overridePatchMethod?(t=this._openRequest("POST",this.url),t.setHeader("X-HTTP-Method-Override","PATCH")):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset);var o=this._addChunkToRequest(t);o.then(function(u){if(!a(u.getStatus(),200)){e._emitHttpError(t,u,"tus: unexpected response while uploading chunk");return}e._handleUploadResponse(t,u)}).catch(function(u){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),u)})}}},{key:"_addChunkToRequest",value:function(e){var t=this,o=this._offset,u=this._offset+this.options.chunkSize;return e.setProgressHandler(function(v){t._emitProgress(o+v,t._size)}),e.setHeader("Content-Type","application/offset+octet-stream"),(u===1/0||u>this._size)&&!this.options.uploadLengthDeferred&&(u=this._size),this._source.slice(o,u).then(function(v){var O=v.value,q=v.done;return t.options.uploadLengthDeferred&&q&&(t._size=t._offset+(O&&O.size?O.size:0),e.setHeader("Upload-Length",t._size)),O===null?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,O))})}},{key:"_handleUploadResponse",value:function(e,t){var o=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(o)){this._emitHttpError(e,t,"tus: invalid or missing offset value");return}if(this._emitProgress(o,this._size),this._emitChunkComplete(o-this._offset,o,this._size),this._offset=o,o==this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(e,t){var o=w(e,t,this.options);return this._req=o,o}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(t){e._emitError(t)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!(!this.options.storeFingerprintForResuming||!this._fingerprint)){var t={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then(function(o){return e._urlStorageKey=o}).catch(function(o){e._emitError(o)})}}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return B(e,t,this.options)}}],[{key:"terminate",value:function(e,t){if(arguments.length>1&&typeof arguments[arguments.length-1]=="function")throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");t===void 0&&(t={});var o=w("DELETE",e,t);return B(o,null,t).then(function(u){if(u.getStatus()!==204)throw new L("tus: unexpected response while terminating upload",null,o,u)}).catch(function(u){if(u instanceof L||(u=new L("tus: failed to terminate upload",u,o,null)),!Z(u,0,t))throw u;var v=t.retryDelays[0],O=t.retryDelays.slice(1),q=C({},t,{retryDelays:O});return new Promise(function(D){return setTimeout(D,v)}).then(function(){return r.terminate(e,q)})})}}]),r}();function d(r){var n=[];for(var e in r)n.push("".concat(e," ").concat(k.Base64.encode(r[e])));return n.join(",")}function a(r,n){return r>=n&&r<n+100}function w(r,n,e){var t=e.httpStack.createRequest(r,n);t.setHeader("Tus-Resumable","1.0.0");var o=e.headers||{};for(var u in o)t.setHeader(u,o[u]);if(e.addRequestId){var v=f();t.setHeader("X-Request-ID",v)}return t}function B(r,n,e){var t=typeof e.onBeforeRequest=="function"?Promise.resolve(e.onBeforeRequest(r)):Promise.resolve();return t.then(function(){return r.send(n).then(function(o){var u=typeof e.onAfterResponse=="function"?Promise.resolve(e.onAfterResponse(r,o)):Promise.resolve();return u.then(function(){return o})})})}function M(){var r=!0;return typeof window!="undefined"&&"navigator"in window&&window.navigator.onLine===!1&&(r=!1),r}function Z(r,n,e){if(e.retryDelays==null||n>=e.retryDelays.length||r.originalRequest==null)return!1;if(e&&typeof e.onShouldRetry=="function")return e.onShouldRetry(r,n,e);var t=r.originalResponse?r.originalResponse.getStatus():0;return(!a(t,400)||t===409||t===423)&&M()}function V(r,n){return new(S())(n,r).toString()}function Y(r,n,e){for(var t=Math.floor(r/n),o=[],u=0;u<n;u++)o.push({start:t*u,end:t*(u+1)});return o[n-1].end=r,e&&o.forEach(function(v,O){v.uploadUrl=e[O]||null}),o}J.defaultOptions=X;const $=J;function G(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function pe(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function xe(r,n,e){return n&&pe(r.prototype,n),e&&pe(r,e),r}var Re=function(){function r(){G(this,r)}return xe(r,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}]),r}();function Fe(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function de(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Oe(r,n,e){return n&&de(r.prototype,n),e&&de(r,e),r}var ne=!1;try{ne="localStorage"in window;var he="tusSupport";localStorage.setItem(he,localStorage.getItem(he))}catch(r){if(r.code===r.SECURITY_ERR||r.code===r.QUOTA_EXCEEDED_ERR)ne=!1;else throw r}var Pe=ne,Ee=function(){function r(){Fe(this,r)}return Oe(r,[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var o=Math.round(Math.random()*1e12),u="tus::".concat(e,"::").concat(o);return localStorage.setItem(u,JSON.stringify(t)),Promise.resolve(u)}},{key:"_findEntries",value:function(e){for(var t=[],o=0;o<localStorage.length;o++){var u=localStorage.key(o);if(u.indexOf(e)===0)try{var v=JSON.parse(localStorage.getItem(u));v.urlStorageKey=u,t.push(v)}catch(O){}}return t}}]),r}();function oe(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function me(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ie(r,n,e){return n&&me(r.prototype,n),e&&me(r,e),r}var ke=function(){function r(){oe(this,r)}return ie(r,[{key:"createRequest",value:function(e,t){return new Ae(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),r}(),Ae=function(){function r(n,e){oe(this,r),this._xhr=new XMLHttpRequest,this._xhr.open(n,e,!0),this._method=n,this._url=e,this._headers={}}return ie(r,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(o,u){e._xhr.onload=function(){o(new je(e._xhr))},e._xhr.onerror=function(v){u(v)},e._xhr.send(t)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),r}(),je=function(){function r(n){oe(this,r),this._xhr=n}return ie(r,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),r}(),De=function(){return typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};const ge=De;function qe(r){return new Promise(function(n,e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(){var o=t.response;n(o)},t.onerror=function(o){e(o)},t.open("GET",r),t.send()})}var He=function(){return typeof window!="undefined"&&(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined")};const Be=He;function ze(r){return new Promise(function(n,e){var t=new FileReader;t.onload=function(){var o=new Uint8Array(t.result);n({value:o})},t.onerror=function(o){e(o)},t.readAsArrayBuffer(r)})}function ae(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _e(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function se(r,n,e){return n&&_e(r.prototype,n),e&&_e(r,e),r}var ye=function(){function r(n){ae(this,r),this._file=n,this.size=n.size}return se(r,[{key:"slice",value:function(e,t){if(Be())return ze(this._file.slice(e,t));var o=this._file.slice(e,t);return Promise.resolve({value:o})}},{key:"close",value:function(){}}]),r}(),Ie=function(){function r(n,e){ae(this,r),this._chunkSize=e,this._buffer=void 0,this._bufferOffset=0,this._reader=n,this._done=!1}return se(r,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var o=this,u=t<=this._bufferOffset+ve(this._buffer);if(this._done||u){var v=this._getDataFromBuffer(e,t),O=v==null?this._done:!1;return Promise.resolve({value:v,done:O})}return this._reader.read().then(function(q){var D=q.value,W=q.done;return W?o._done=!0:o._buffer===void 0?o._buffer=D:o._buffer=Le(o._buffer,D),o._readUntilEnoughDataOrDone(e,t)})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var o=ve(this._buffer)===0;return this._done&&o?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),r}();function ve(r){return r===void 0?0:r.size!==void 0?r.size:r.length}function Le(r,n){if(r.concat)return r.concat(n);if(r instanceof Blob)return new Blob([r,n],{type:r.type});if(r.set){var e=new r.constructor(r.length+n.length);return e.set(r),e.set(n,r.length),e}throw new Error("Unknown data type")}var Te=function(){function r(){ae(this,r)}return se(r,[{key:"openFile",value:function(e,t){return ge()&&e&&typeof e.uri!="undefined"?qe(e.uri).then(function(o){return new ye(o)}).catch(function(o){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(o))}):typeof e.slice=="function"&&typeof e.size!="undefined"?Promise.resolve(new ye(e)):typeof e.read=="function"?(t=+t,isFinite(t)?Promise.resolve(new Ie(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),r}();function Ne(r,n){return ge()?Promise.resolve(Me(r,n)):Promise.resolve(["tus-br",r.name,r.type,r.size,r.lastModified,n.endpoint].join("-"))}function Me(r,n){var e=r.exif?Ke(JSON.stringify(r.exif)):"noexif";return["tus-rn",r.name||"noname",r.size||"nosize",e,n.endpoint].join("/")}function Ke(r){var n=0;if(r.length===0)return n;for(var e=0;e<r.length;e++){var t=r.charCodeAt(e);n=(n<<5)-n+t,n&=n}return n}function Q(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q=function(e){return typeof e}:Q=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(r)}function Xe(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function be(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function We(r,n,e){return n&&be(r.prototype,n),e&&be(r,e),r}function Je(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&ue(r,n)}function ue(r,n){return ue=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},ue(r,n)}function Ze(r){return function(){var n=ee(r),e;if(Ve()){var t=ee(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return $e(this,e)}}function $e(r,n){return n&&(Q(n)==="object"||typeof n=="function")?n:Ge(r)}function Ge(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function ee(r){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(r)}function we(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,t)}return e}function le(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?we(Object(e),!0).forEach(function(t){Ye(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):we(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function Ye(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var Ce=le({},$.defaultOptions,{httpStack:new ke,fileReader:new Te,urlStorage:Pe?new Ee:new Re,fingerprint:Ne}),Qe=function(r){Je(e,r);var n=Ze(e);function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xe(this,e),o=le({},Ce,{},o),n.call(this,t,o)}return We(e,null,[{key:"terminate",value:function(o,u,v){return u=le({},Ce,{},u),$.terminate(o,u,v)}}]),e}($),Ue=window,et=Ue.XMLHttpRequest,Se=Ue.Blob,at=et&&Se&&typeof Se.prototype.slice=="function"},"../../../node_modules/.pnpm/url-parse@1.5.10/node_modules/url-parse/index.js":(I,R,b)=>{"use strict";var k=b("../../../node_modules/.pnpm/requires-port@1.0.0/node_modules/requires-port/index.js"),A=b("../../../node_modules/.pnpm/querystringify@2.2.0/node_modules/querystringify/index.js"),S=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,c=/[\n\r\t]/g,K=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,P=/:\d+$/,j=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/;function p(l){return(l||"").toString().replace(S,"")}var m=[["#","hash"],["?","query"],function(s,f){return _(f.protocol)?s.replace(/\\/g,"/"):s},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],x={hash:1,query:1};function g(l){var s;typeof window!="undefined"?s=window:typeof b.g!="undefined"?s=b.g:typeof self!="undefined"?s=self:s={};var f=s.location||{};l=l||f;var i={},C=typeof l,y;if(l.protocol==="blob:")i=new H(unescape(l.pathname),{});else if(C==="string"){i=new H(l,{});for(y in x)delete i[y]}else if(C==="object"){for(y in l)y in x||(i[y]=l[y]);i.slashes===void 0&&(i.slashes=K.test(l.href))}return i}function _(l){return l==="file:"||l==="ftp:"||l==="http:"||l==="https:"||l==="ws:"||l==="wss:"}function F(l,s){l=p(l),l=l.replace(c,""),s=s||{};var f=j.exec(l),i=f[1]?f[1].toLowerCase():"",C=!!f[2],y=!!f[3],E=0,U;return C?y?(U=f[2]+f[3]+f[4],E=f[2].length+f[3].length):(U=f[2]+f[4],E=f[2].length):y?(U=f[3]+f[4],E=f[3].length):U=f[4],i==="file:"?E>=2&&(U=U.slice(2)):_(i)?U=f[4]:i?C&&(U=U.slice(2)):E>=2&&_(s.protocol)&&(U=f[4]),{protocol:i,slashes:C||_(i),slashesCount:E,rest:U}}function N(l,s){if(l==="")return s;for(var f=(s||"/").split("/").slice(0,-1).concat(l.split("/")),i=f.length,C=f[i-1],y=!1,E=0;i--;)f[i]==="."?f.splice(i,1):f[i]===".."?(f.splice(i,1),E++):E&&(i===0&&(y=!0),f.splice(i,1),E--);return y&&f.unshift(""),(C==="."||C==="..")&&f.push(""),f.join("/")}function H(l,s,f){if(l=p(l),l=l.replace(c,""),!(this instanceof H))return new H(l,s,f);var i,C,y,E,U,T,X=m.slice(),J=typeof s,d=this,a=0;for(J!=="object"&&J!=="string"&&(f=s,s=null),f&&typeof f!="function"&&(f=A.parse),s=g(s),C=F(l||"",s),i=!C.protocol&&!C.slashes,d.slashes=C.slashes||i&&s.slashes,d.protocol=C.protocol||s.protocol||"",l=C.rest,(C.protocol==="file:"&&(C.slashesCount!==2||h.test(l))||!C.slashes&&(C.protocol||C.slashesCount<2||!_(d.protocol)))&&(X[3]=[/(.*)/,"pathname"]);a<X.length;a++){if(E=X[a],typeof E=="function"){l=E(l,d);continue}y=E[0],T=E[1],y!==y?d[T]=l:typeof y=="string"?(U=y==="@"?l.lastIndexOf(y):l.indexOf(y),~U&&(typeof E[2]=="number"?(d[T]=l.slice(0,U),l=l.slice(U+E[2])):(d[T]=l.slice(U),l=l.slice(0,U)))):(U=y.exec(l))&&(d[T]=U[1],l=l.slice(0,U.index)),d[T]=d[T]||i&&E[3]&&s[T]||"",E[4]&&(d[T]=d[T].toLowerCase())}f&&(d.query=f(d.query)),i&&s.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||s.pathname!=="")&&(d.pathname=N(d.pathname,s.pathname)),d.pathname.charAt(0)!=="/"&&_(d.protocol)&&(d.pathname="/"+d.pathname),k(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(U=d.auth.indexOf(":"),~U?(d.username=d.auth.slice(0,U),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(U+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&_(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function L(l,s,f){var i=this;switch(l){case"query":typeof s=="string"&&s.length&&(s=(f||A.parse)(s)),i[l]=s;break;case"port":i[l]=s,k(s,i.protocol)?s&&(i.host=i.hostname+":"+s):(i.host=i.hostname,i[l]="");break;case"hostname":i[l]=s,i.port&&(s+=":"+i.port),i.host=s;break;case"host":i[l]=s,P.test(s)?(s=s.split(":"),i.port=s.pop(),i.hostname=s.join(":")):(i.hostname=s,i.port="");break;case"protocol":i.protocol=s.toLowerCase(),i.slashes=!f;break;case"pathname":case"hash":if(s){var C=l==="pathname"?"/":"#";i[l]=s.charAt(0)!==C?C+s:s}else i[l]=s;break;case"username":case"password":i[l]=encodeURIComponent(s);break;case"auth":var y=s.indexOf(":");~y?(i.username=s.slice(0,y),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=s.slice(y+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(s))}for(var E=0;E<m.length;E++){var U=m[E];U[4]&&(i[U[1]]=i[U[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&_(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function z(l){(!l||typeof l!="function")&&(l=A.stringify);var s,f=this,i=f.host,C=f.protocol;C&&C.charAt(C.length-1)!==":"&&(C+=":");var y=C+(f.protocol&&f.slashes||_(f.protocol)?"//":"");return f.username?(y+=f.username,f.password&&(y+=":"+f.password),y+="@"):f.password?(y+=":"+f.password,y+="@"):f.protocol!=="file:"&&_(f.protocol)&&!i&&f.pathname!=="/"&&(y+="@"),(i[i.length-1]===":"||P.test(f.hostname)&&!f.port)&&(i+=":"),y+=i+f.pathname,s=typeof f.query=="object"?l(f.query):f.query,s&&(y+=s.charAt(0)!=="?"?"?"+s:s),f.hash&&(y+=f.hash),y}H.prototype={set:L,toString:z},H.extractProtocol=F,H.location=g,H.trimLeft=p,H.qs=A,I.exports=H}}]);})();
