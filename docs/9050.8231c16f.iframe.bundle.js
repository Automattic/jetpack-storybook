"use strict";(()=>{var Rt=Object.defineProperty;var mt=(O,u,s)=>u in O?Rt(O,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):O[u]=s;var G=(O,u,s)=>(mt(O,typeof u!="symbol"?u+"":u,s),s);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[9050],{"../analytics/index.jsx":(O,u,s)=>{s.d(u,{Z:()=>R});var d=s("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),p=s.n(d);const _=p()("dops:analytics");let a,c;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;function T(e,n){let i="";if(typeof e=="object"){for(const l in e)i+="&x_"+encodeURIComponent(l)+"="+encodeURIComponent(e[l]);_("Bumping stats %o",e)}else i="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(n),_('Bumping stat "%s" in group "%s"',n,e);return i}function S(e,n){let i="";if(typeof e=="object"){for(const l in e)i+="&"+encodeURIComponent(l)+"="+encodeURIComponent(e[l]);_("Built stats %o",e)}else i="&"+encodeURIComponent(e)+"="+encodeURIComponent(n),_('Built stat "%s" in group "%s"',n,e);return i}const r={initialize:function(e,n,i){r.setUser(e,n),r.setSuperProps(i),r.identifyUser()},setGoogleAnalyticsEnabled:function(e,n=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=n},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,n){c={ID:e,username:n}},setSuperProps:function(e){a=e},assignSuperProps:function(e){a=Object.assign(a||{},e)},mc:{bumpStat:function(e,n){const i=T(e,n);r.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+i+"&t="+Math.random())},bumpStatWithPageView:function(e,n){const i=S(e,n);r.mcAnalyticsEnabled&&(new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+i+"&t="+Math.random())}},pageView:{record:function(e,n){r.tracks.recordPageView(e),r.ga.recordPageView(e,n)}},purchase:{record:function(e,n,i,l,g,I,C){r.ga.recordPurchase(e,n,i,l,g,I,C)}},tracks:{recordEvent:function(e,n){if(n=n||{},e.indexOf("akismet_")!==0&&e.indexOf("jetpack_")!==0){_('- Event name must be prefixed by "akismet_" or "jetpack_"');return}a&&(_("- Super Props: %o",a),n=Object.assign(n,a)),_('Record event "%s" called with props %s',e,JSON.stringify(n)),window._tkq.push(["recordEvent",e,n])},recordJetpackClick:function(e){const n=typeof e=="object"?e:{target:e};r.tracks.recordEvent("jetpack_wpa_click",n)},recordPageView:function(e){r.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){_("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};r.ga.initialized||(c&&(e={userId:"u-"+c.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),r.ga.initialized=!0)},recordPageView:function(e,n){r.ga.initialize(),_("Recording Page View ~ [URL: "+e+"] [Title: "+n+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:n}))},recordEvent:function(e,n,i,l){r.ga.initialize();let g="Recording Event ~ [Category: "+e+"] [Action: "+n+"]";typeof i!="undefined"&&(g+=" [Option Label: "+i+"]"),typeof l!="undefined"&&(g+=" [Option Value: "+l+"]"),_(g),this.googleAnalyticsEnabled&&window.ga("send","event",e,n,i,l)},recordPurchase:function(e,n,i,l,g,I,C){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:l,currency:C}),window.ga("ecommerce:addItem",{id:e,name:n,sku:i,price:g,quantity:I}),window.ga("ecommerce:send")}},identifyUser:function(){c&&window._tkq.push(["identifyUser",c.ID,c.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},R=r},"../connection/components/use-connection/index.jsx":(O,u,s)=>{s.d(u,{Z:()=>S});var d=s("../api/index.jsx"),p=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),_=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),a=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),c=s("../connection/state/store.jsx");const T=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},S=({registrationNonce:r=T.registrationNonce,apiRoot:R=T.apiRoot,apiNonce:e=T.apiNonce,redirectUri:n,autoTrigger:i,from:l,skipUserConnection:g}={})=>{const{registerSite:I,connectUser:C,refreshConnectedPlugins:f}=(0,p.Z)(c.t),A=(0,_.Z)(m=>m(c.t).getRegistrationError()),{siteIsRegistering:N,userIsConnecting:w,userConnectionData:y,connectedPlugins:h,connectionErrors:k,isRegistered:U,isUserConnected:x,hasConnectedOwner:v,isOfflineMode:b}=(0,_.Z)(m=>({siteIsRegistering:m(c.t).getSiteIsRegistering(),userIsConnecting:m(c.t).getUserIsConnecting(),userConnectionData:m(c.t).getUserConnectionData(),connectedPlugins:m(c.t).getConnectedPlugins(),connectionErrors:m(c.t).getConnectionErrors(),isOfflineMode:m(c.t).getIsOfflineMode(),...m(c.t).getConnectionStatus()})),P=()=>{if(g){if(n)return window.location=n,Promise.resolve(n)}else return C({from:l,redirectUri:n});return Promise.resolve()},L=m=>(m&&m.preventDefault(),U?P():I({registrationNonce:r,redirectUri:n}).then(()=>P()));return(0,a.useEffect)(()=>{d.ZP.setApiRoot(R),d.ZP.setApiNonce(e)},[R,e]),(0,a.useEffect)(()=>{i&&!N&&!w&&L()},[]),{handleRegisterSite:L,handleConnectUser:P,refreshConnectedPlugins:f,isRegistered:U,isUserConnected:x,siteIsRegistering:N,userIsConnecting:w,registrationError:A,userConnectionData:y,hasConnectedOwner:v,connectedPlugins:h,connectionErrors:k,isOfflineMode:b}}},"../connection/state/store.jsx":(O,u,s)=>{s.d(u,{t:()=>D});var d=s("../api/index.jsx");const p="SET_CONNECTION_STATUS",_="SET_CONNECTION_STATUS_IS_FETCHING",a="FETCH_CONNECTION_STATUS",c="SET_SITE_IS_REGISTERING",T="SET_USER_IS_CONNECTING",S="SET_REGISTRATION_ERROR",r="CLEAR_REGISTRATION_ERROR",R="REGISTER_SITE",e="SET_AUTHORIZATION_URL",n="CONNECT_USER",i="DISCONNECT_USER_SUCCESS",l="FETCH_AUTHORIZATION_URL",g="SET_CONNECTED_PLUGINS",I="REFRESH_CONNECTED_PLUGINS",C="SET_CONNECTION_ERRORS",f="SET_IS_OFFLINE_MODE",A=t=>({type:p,connectionStatus:t}),N=t=>({type:_,isFetching:t}),w=()=>({type:a}),y=t=>({type:c,isRegistering:t}),h=t=>({type:T,isConnecting:t}),k=()=>({type:i}),U=t=>({type:S,registrationError:t}),x=()=>({type:r}),v=t=>({type:e,authorizationUrl:t}),b=t=>({type:l,redirectUri:t}),P=t=>({type:g,connectedPlugins:t}),L=t=>({type:C,connectionErrors:t}),m=t=>({type:f,isOfflineMode:t});function*Z({from:t,redirectFunc:o,redirectUri:E}={}){yield h(!0),yield{type:n,from:t,redirectFunc:o,redirectUri:E}}function*J({registrationNonce:t,redirectUri:o}){yield x(),yield y(!0);try{const E=yield{type:R,registrationNonce:t,redirectUri:o};return yield A({isRegistered:!0}),yield v(E.authorizeUrl),yield y(!1),Promise.resolve(E)}catch(E){return yield U(E),yield y(!1),Promise.reject(E)}}const B={setConnectionStatus:A,setConnectionStatusIsFetching:N,fetchConnectionStatus:w,fetchAuthorizationUrl:b,setSiteIsRegistering:y,setUserIsConnecting:h,setRegistrationError:U,clearRegistrationError:x,setAuthorizationUrl:v,registerSite:J,connectUser:Z,disconnectUserSuccess:k,setConnectedPlugins:P,refreshConnectedPlugins:()=>async({dispatch:t})=>await new Promise(o=>d.ZP.fetchConnectedPlugins().then(E=>{t(P(E)),o(E)})),setConnectionErrors:L,setIsOfflineMode:m};var Q=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const D="jetpack-connection",V=({registrationNonce:t,redirectUri:o})=>d.ZP.registerSite(t,o),$=(0,Q.R)(({resolveSelect:t})=>({from:o,redirectFunc:E,redirectUri:K}={})=>new Promise((It,Ct)=>{t(D).getAuthorizationUrl(K).then(Y=>{const gt=E||(St=>window.location.assign(St)),W=new URL(Y);o&&W.searchParams.set("from",encodeURIComponent(o));const z=W.toString();gt(z),It(z)}).catch(Y=>{Ct(Y)})})),X={FETCH_AUTHORIZATION_URL:({redirectUri:t})=>d.ZP.fetchAuthorizationUrl(t),REGISTER_SITE:V,CONNECT_USER:$};var H=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const q=(t={},o)=>{switch(o.type){case p:return{...t,...o.connectionStatus};case i:return{...t,isUserConnected:!1}}return t},tt=(t={},o)=>{switch(o.type){case g:return o.connectedPlugins}return t},et=(t=!1,o)=>{switch(o.type){case _:return o.isFetching}return t},nt=(t=!1,o)=>{switch(o.type){case c:return o.isRegistering}return t},ot=(t=!1,o)=>{switch(o.type){case T:return o.isConnecting}return t},st=(t,o)=>{switch(o.type){case r:return!1;case S:return o.registrationError;default:return t}},ct=(t,o)=>{switch(o.type){case e:return o.authorizationUrl;default:return t}},it=(t,o)=>{switch(o.type){default:return t}},rt=(t={},o)=>{switch(o.type){case C:return o.connectionErrors}return t},at=(t=!1,o)=>{switch(o.type){case f:return o.isConnecting}return t},dt=(0,H.UY)({connectionStatus:q,connectionStatusIsFetching:et,siteIsRegistering:nt,userIsConnecting:ot,registrationError:st,authorizationUrl:ct,userConnectionData:it,connectedPlugins:tt,connectionErrors:rt,isOfflineMode:at});var _t=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),ut=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const lt={...{getAuthorizationUrl:{isFulfilled:(t,...o)=>{const E=!!t.authorizationUrl,K=(0,_t.Y)(D).hasFinishedResolution("getAuthorizationUrl",o);return E&&!K&&(0,ut.W)(D).finishResolution("getAuthorizationUrl",o),E},*fulfill(t){const o=yield B.fetchAuthorizationUrl(t);yield B.setAuthorizationUrl(o.authorizeUrl)}}}},Et={...{getConnectionStatus:t=>t.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:t=>t.siteIsRegistering||!1,getUserIsConnecting:t=>t.userIsConnecting||!1,getRegistrationError:t=>t.registrationError||!1,getAuthorizationUrl:t=>t.authorizationUrl||!1,getUserConnectionData:t=>t.userConnectionData||!1,getConnectedPlugins:t=>t.connectedPlugins||[],getConnectionErrors:t=>t.connectionErrors||[],getIsOfflineMode:t=>t.isOfflineMode||!1,getWpcomUser:t=>{var o,E;return(E=(o=t==null?void 0:t.userConnectionData)==null?void 0:o.currentUser)==null?void 0:E.wpcomUser},getBlogId:t=>{var o,E;return(E=(o=t==null?void 0:t.userConnectionData)==null?void 0:o.currentUser)==null?void 0:E.blogId}}};var pt=s("../../../node_modules/.pnpm/@wordpress+data@9.24.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const j=class{static mayBeInit(o,E){j.store===null&&(j.store=(0,pt.Z)(o,E),(0,H.z2)(j.store))}};let M=j;G(M,"store",null);const Tt=M,F=window.JP_CONNECTION_INITIAL_STATE;F||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Tt.mayBeInit(D,{__experimentalUseThunks:!0,reducer:dt,actions:B,selectors:Et,resolvers:lt,controls:X,initialState:F||{}})},"../../packages/my-jetpack/_inc/data/constants.ts":(O,u,s)=>{s.d(u,{Jk:()=>r,Kf:()=>N,LQ:()=>_,RQ:()=>w,Vu:()=>h,YF:()=>e,_H:()=>a,db:()=>I,h3:()=>k,hd:()=>c,iG:()=>l,n2:()=>R,q9:()=>i,yv:()=>g});const d="my-jetpack/v1",p="jetpack/v4/stats-app",_=`${d}/site/purchases`,a=`${d}/site/backup/undo-event`,c=`${d}/site/backup/count-items`,T=`${d}/chat/availability`,S=`${d}/chat/authentication`,r=`${d}/site/products`,R="videopress/v1/stats/featured",e=`${d}/site/dismiss-welcome-banner`,n=U=>`${p}/sites/${U}/stats/highlights`,i="product",l="activate product",g="install product",I="videopress stats",C="available licenses",f="chat availability",A="chat authentication",N="backup history",w="backup stats",y="stats counts",h="dismiss welcome banner",k="purchases"},"../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts":(O,u,s)=>{s.d(u,{o:()=>g});var d=s("../../../node_modules/.pnpm/@wordpress+i18n@4.54.0/node_modules/@wordpress/i18n/build-module/index.js"),p=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const _=100,a=200,c=300;var T=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const S={message:"",options:{status:""},priority:0},r=(0,p.createContext)({currentNotice:S,setNotice:null}),R=({children:I})=>{const[C,f]=useState(S),A=N=>{(!C.message||N.priority>C.priority)&&f(N)};return _jsx(r.Provider,{value:{currentNotice:C,setNotice:A},children:I})},e=null;try{noticeContext.displayName="noticeContext",noticeContext.__docgenInfo={description:"",displayName:"noticeContext",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"]={docgenInfo:noticeContext.__docgenInfo,name:"noticeContext",path:"../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"})}catch(I){}var n=s("../../packages/my-jetpack/_inc/data/constants.ts");const i=d.__,l=[n.h3,n.iG,n.yv],g=({infoName:I,isError:C,overrideMessage:f})=>{const{setNotice:A}=(0,p.useContext)(r),N=f!=null?f:(0,d.gB)(i("There was an error fetching your %s information. Check your site connectivity and try again.","jetpack-my-jetpack"),I);(0,p.useEffect)(()=>{C&&l.includes(I)&&A({message:N,options:{status:"error"},priority:_})},[N,A,C,I])}},"../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts":(O,u,s)=>{s.d(u,{$9:()=>d,M_:()=>p,vH:()=>_});const d=a=>{var c,T;return a?(T=(c=window==null?void 0:window.myJetpackInitialState)==null?void 0:c[a])!=null?T:{}:window==null?void 0:window.myJetpackInitialState},p=()=>{var a;return(a=window==null?void 0:window.myJetpackRest)!=null?a:{}},_=a=>{var c,T;return a?(T=(c=window==null?void 0:window.JP_CONNECTION_INITIAL_STATE)==null?void 0:c[a])!=null?T:{}:window==null?void 0:window.JP_CONNECTION_INITIAL_STATE}},"../../packages/my-jetpack/_inc/hooks/use-analytics/index.ts":(O,u,s)=>{s.d(u,{Z:()=>T});var d=s("../analytics/index.jsx"),p=s("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=s("../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts"),a=s("../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.ts");const T=()=>{var I;const{isUserConnected:S,connectedPlugins:r,userConnectionData:R={}}=(0,a.Z)(),{login:e,ID:n}=((I=R.currentUser)==null?void 0:I.wpcomUser)||{},{myJetpackVersion:i=""}=(0,_.$9)();(0,p.useEffect)(()=>{S&&n&&e&&d.Z.initialize(n,e)},[n,S,e]);const l=Object.keys(r||{}).sort().join(",").replaceAll("jetpack-","");return{recordEvent:(0,p.useCallback)((C,f)=>{d.Z.tracks.recordEvent(C,{...f,version:i,referring_plugins:l})},[])}}},"../../packages/my-jetpack/_inc/hooks/use-my-jetpack-connection/index.ts":(O,u,s)=>{s.d(u,{Z:()=>a});var d=s("../connection/components/use-connection/index.jsx"),p=s("../../packages/my-jetpack/_inc/data/utils/get-my-jetpack-window-state.ts");const a=()=>{const{apiRoot:c,apiNonce:T}=(0,p.M_)(),{topJetpackMenuItemUrl:S,blogID:r}=(0,p.$9)(),R=(0,d.Z)({apiRoot:c,apiNonce:T}),{registrationNonce:e}=(0,p.vH)(),n=R.isRegistered;return{apiNonce:T,apiRoot:c,blogID:r,registrationNonce:e,...R,isSiteConnected:n,topJetpackMenuItemUrl:S}}}}]);})();
