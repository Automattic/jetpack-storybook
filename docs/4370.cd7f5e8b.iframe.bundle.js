"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[4370],{"../connection/components/use-connection/index.jsx":(le,Z,a)=>{a.d(Z,{Z:()=>y});var E=a("../api/index.jsx"),_=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),f=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),m=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),u=a("../connection/state/store.jsx");const l=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},y=function(){let{registrationNonce:b=l.registrationNonce,apiRoot:D=l.apiRoot,apiNonce:A=l.apiNonce,redirectUri:p,autoTrigger:P,from:w,skipUserConnection:N}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{registerSite:V,connectUser:k,refreshConnectedPlugins:O}=(0,_.Z)(u.t),B=(0,f.Z)(S=>S(u.t).getRegistrationError()),{siteIsRegistering:U,userIsConnecting:C,userConnectionData:H,connectedPlugins:h,connectionErrors:z,isRegistered:x,isUserConnected:K,hasConnectedOwner:ee}=(0,f.Z)(S=>({siteIsRegistering:S(u.t).getSiteIsRegistering(),userIsConnecting:S(u.t).getUserIsConnecting(),userConnectionData:S(u.t).getUserConnectionData(),connectedPlugins:S(u.t).getConnectedPlugins(),connectionErrors:S(u.t).getConnectionErrors(),...S(u.t).getConnectionStatus()})),v=()=>{if(N){if(p)return window.location=p,Promise.resolve(p)}else return k({from:w,redirectUri:p});return Promise.resolve()},M=S=>(S&&S.preventDefault(),x?v():V({registrationNonce:b,redirectUri:p}).then(()=>v()));return(0,m.useEffect)(()=>{E.ZP.setApiRoot(D),E.ZP.setApiNonce(A)},[D,A]),(0,m.useEffect)(()=>{P&&!U&&!C&&M()},[]),{handleRegisterSite:M,handleConnectUser:v,refreshConnectedPlugins:O,isRegistered:x,isUserConnected:K,siteIsRegistering:U,userIsConnecting:C,registrationError:B,userConnectionData:H,hasConnectedOwner:ee,connectedPlugins:h,connectionErrors:z}}},"../connection/state/store.jsx":(le,Z,a)=>{a.d(Z,{t:()=>W});var E=a("../api/index.jsx");const _="SET_CONNECTION_STATUS",f="SET_CONNECTION_STATUS_IS_FETCHING",m="FETCH_CONNECTION_STATUS",u="SET_SITE_IS_REGISTERING",l="SET_USER_IS_CONNECTING",y="SET_REGISTRATION_ERROR",b="CLEAR_REGISTRATION_ERROR",D="REGISTER_SITE",A="SET_AUTHORIZATION_URL",p="CONNECT_USER",P="DISCONNECT_USER_SUCCESS",w="FETCH_AUTHORIZATION_URL",N="SET_CONNECTED_PLUGINS",V="REFRESH_CONNECTED_PLUGINS",k="SET_CONNECTION_ERRORS",O=n=>({type:_,connectionStatus:n}),B=n=>({type:f,isFetching:n}),U=()=>({type:m}),C=n=>({type:u,isRegistering:n}),H=n=>({type:l,isConnecting:n}),h=()=>({type:P}),z=n=>({type:y,registrationError:n}),x=()=>({type:b}),K=n=>({type:A,authorizationUrl:n}),ee=n=>({type:w,redirectUri:n}),v=n=>({type:N,connectedPlugins:n}),M=n=>({type:k,connectionErrors:n});function S(){let{from:n,redirectFunc:o,redirectUri:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){yield H(!0),yield{type:p,from:n,redirectFunc:o,redirectUri:c}}()}function de(n){let{registrationNonce:o,redirectUri:c}=n;return function*(){yield x(),yield C(!0);try{const T=yield{type:D,registrationNonce:o,redirectUri:c};return yield O({isRegistered:!0}),yield K(T.authorizeUrl),yield C(!1),Promise.resolve(T)}catch(T){return yield z(T),yield C(!1),Promise.reject(T)}}()}const te={setConnectionStatus:O,setConnectionStatusIsFetching:B,fetchConnectionStatus:U,fetchAuthorizationUrl:ee,setSiteIsRegistering:C,setUserIsConnecting:H,setRegistrationError:z,clearRegistrationError:x,setAuthorizationUrl:K,registerSite:de,connectUser:S,disconnectUserSuccess:h,setConnectedPlugins:v,refreshConnectedPlugins:()=>async n=>{let{dispatch:o}=n;return await new Promise(c=>E.ZP.fetchConnectedPlugins().then(T=>{o(v(T)),c(T)}))},setConnectionErrors:M};var ge=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const W="jetpack-connection",Ee=n=>{let{registrationNonce:o,redirectUri:c}=n;return E.ZP.registerSite(o,c)},se=(0,ge.R)(n=>{let{resolveSelect:o}=n;return function(){let{from:c,redirectFunc:T,redirectUri:G}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((ne,ke)=>{o(W).getAuthorizationUrl(G).then(oe=>{const Pe=T||(L=>window.location.assign(L)),ie=new URL(oe);c&&ie.searchParams.set("from",encodeURIComponent(c));const ae=ie.toString();Pe(ae),ne(ae)}).catch(oe=>{ke(oe)})})}}),_e={FETCH_AUTHORIZATION_URL:n=>{let{redirectUri:o}=n;return E.ZP.fetchAuthorizationUrl(o)},REGISTER_SITE:Ee,CONNECT_USER:se};var R=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const me=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case _:return{...n,...o.connectionStatus};case P:return{...n,isUserConnected:!1}}return n},F=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case N:return o.connectedPlugins}return n},re=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case f:return o.isFetching}return n},Ne=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case u:return o.isRegistering}return n},Oe=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case l:return o.isConnecting}return n},Ue=(n,o)=>{switch(o.type){case b:return!1;case y:return o.registrationError;default:return n}},ve=(n,o)=>{switch(o.type){case A:return o.authorizationUrl;default:return n}},Fe=(n,o)=>{switch(o.type){default:return n}},Le=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;switch(o.type){case k:return o.connectionErrors}return n},Se=(0,R.UY)({connectionStatus:me,connectionStatusIsFetching:re,siteIsRegistering:Ne,userIsConnecting:Oe,registrationError:Ue,authorizationUrl:ve,userConnectionData:Fe,connectedPlugins:F,connectionErrors:Le}),Te={...{getAuthorizationUrl:{isFulfilled:function(n){const o=!!n.authorizationUrl;for(var c=arguments.length,T=new Array(c>1?c-1:0),G=1;G<c;G++)T[G-1]=arguments[G];const ne=(0,R.Ys)(W).hasFinishedResolution("getAuthorizationUrl",T);return o&&!ne&&(0,R.WI)(W).finishResolution("getAuthorizationUrl",T),o},*fulfill(n){const o=yield te.fetchAuthorizationUrl(n);yield te.setAuthorizationUrl(o.authorizeUrl)}}}},he={...{getConnectionStatus:n=>n.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:n=>n.siteIsRegistering||!1,getUserIsConnecting:n=>n.userIsConnecting||!1,getRegistrationError:n=>n.registrationError||!1,getAuthorizationUrl:n=>n.authorizationUrl||!1,getUserConnectionData:n=>n.userConnectionData||!1,getConnectedPlugins:n=>n.connectedPlugins||[],getConnectionErrors:n=>n.connectionErrors||[],getWpcomUser:n=>{var o,c;return(c=(o=n==null?void 0:n.userConnectionData)==null?void 0:o.currentUser)==null?void 0:c.wpcomUser},getBlogId:n=>{var o,c;return(c=(o=n==null?void 0:n.userConnectionData)==null?void 0:o.currentUser)==null?void 0:c.blogId}}};var Ce=a("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),Ie=a.n(Ce),fe=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class ${static mayBeInit(o,c){$.store===null&&($.store=(0,fe.Z)(o,c),(0,R.z2)($.store))}}Ie()($,"store",null);const Ae=$,Y=window.JP_CONNECTION_INITIAL_STATE;Y||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Ae.mayBeInit(W,{__experimentalUseThunks:!0,reducer:Se,actions:te,selectors:he,resolvers:Te,controls:_e,initialState:Y||{}})},"../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx":(le,Z,a)=>{a.d(Z,{N:()=>l,Z:()=>b});var E=a("../components/components/button/index.tsx"),_=a("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js"),f=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),m=a("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const u=_.__,l={ACTIVE:"active",INACTIVE:"inactive",ERROR:"error",ABSENT:"plugin_absent",ABSENT_WITH_PLAN:"plugin_absent_with_plan",NEEDS_PURCHASE:"needs_purchase",NEEDS_PURCHASE_OR_FREE:"needs_purchase_or_free"},y=D=>{let{status:A,admin:p,name:P,onActivate:w,onManage:N,onFixConnection:V,isFetching:k,isInstallingStandalone:O,isDeactivatingStandalone:B,className:U,onAdd:C}=D;if(!p)return(0,m.jsx)(E.Z,{...h,size:"small",variant:"link",weight:"regular",children:(0,_.gB)(u("Learn about %s","jetpack-my-jetpack"),P)});const H=k||O||B,h={variant:H?void 0:"primary",disabled:H,className:U};switch(A){case l.ABSENT:case l.ABSENT_WITH_PLAN:return(0,m.jsxs)(E.Z,{...h,size:"small",variant:"link",weight:"regular",children:[A===l.ABSENT&&(0,_.gB)(u("Get %s","jetpack-my-jetpack"),P),A===l.ABSENT_WITH_PLAN&&(0,_.gB)(u("Install %s","jetpack-my-jetpack"),P)]});case l.NEEDS_PURCHASE:return(0,m.jsx)(E.Z,{...h,size:"small",weight:"regular",onClick:C,children:u("Purchase","jetpack-my-jetpack")});case l.NEEDS_PURCHASE_OR_FREE:return(0,m.jsx)(E.Z,{...h,size:"small",weight:"regular",onClick:C,children:u("Start for free","jetpack-my-jetpack")});case l.ACTIVE:return(0,m.jsx)(E.Z,{...h,size:"small",weight:"regular",variant:"secondary",onClick:N,children:u("Manage","jetpack-my-jetpack")});case l.ERROR:return(0,m.jsx)(E.Z,{...h,size:"small",weight:"regular",onClick:V,children:u("Fix connection","jetpack-my-jetpack")});case l.INACTIVE:return(0,m.jsx)(E.Z,{...h,size:"small",weight:"regular",variant:"secondary",onClick:w,children:u("Activate","jetpack-my-jetpack")});default:return null}};y.__docgenInfo={description:"",methods:[],displayName:"ActionButton"};const b=y},"../../packages/my-jetpack/_inc/state/store.js":(le,Z,a)=>{a.d(Z,{t:()=>He,N:()=>We});var E=a("../connection/state/store.jsx"),_=a("../../../node_modules/.pnpm/@wordpress+api-fetch@6.29.0/node_modules/@wordpress/api-fetch/build-module/index.js"),f=a("../../../node_modules/.pnpm/@wordpress+i18n@4.32.0/node_modules/@wordpress/i18n/build-module/index.js");const m="my-jetpack/v1",u=`${m}/site/purchases`,l=`${m}/site/products`,y=`${m}/chat/availability`,b=["scan"],D="videopress",A="videopress/v1/stats/featured",p=f.__,P="SET_PURCHASES_IS_FETCHING",w="FETCH_PURCHASES",N="SET_PURCHASES",V="SET_AVAILABLE_LICENSES_IS_FETCHING",k="FETCH_AVAILABLE_LICENSES",O="SET_AVAILABLE_LICENSES",B="SET_IS_FETCHING_PRODUCT",U="SET_PRODUCT",C="SET_PRODUCT_REQUEST_ERROR",H="ACTIVATE_PRODUCT",h="SET_PRODUCT_STATUS",z="SET_CHAT_AVAILABILITY_IS_FETCHING",x="SET_CHAT_AVAILABILITY",K="SET_GLOBAL_NOTICE",ee="CLEAN_GLOBAL_NOTICE",v="SET_PRODUCT_STATS",M="SET_IS_FETCHING_PRODUCT_STATS",S=e=>({type:P,isFetching:e}),de=e=>({type:z,isFetching:e}),Re=()=>({type:w}),te=e=>({type:N,purchases:e}),ge=e=>({type:x,chatAvailability:e}),ye=e=>({type:V,isFetching:e}),W=()=>({type:k}),Ee=e=>({type:O,availableLicenses:e}),se=e=>({type:U,product:e}),J=(e,t)=>({type:C,productId:e,error:t}),_e=(e,t)=>({type:h,productId:e,status:t}),R=(e,t)=>({type:"SET_GLOBAL_NOTICE",message:e,options:t}),me=()=>({type:"CLEAN_GLOBAL_NOTICE"});function F(e,t){return{type:B,productId:e,isFetching:t}}function re(e,t,r){let{select:s,dispatch:i,registry:d}=r;return new Promise((j,X)=>{if(!s.isValidProduct(e)){const I=p("Invalid product name","jetpack-my-jetpack"),ue=new Error(I);i(J(e,ue)),i(R(I,{status:"error",isDismissible:!0})),X(ue);return}const q=t.activate?"POST":"DELETE";return i(F(e,!0)),(0,_.Z)({path:`${l}/${e}`,method:q}).then(I=>{i(F(e,!1)),i(se(I)),d.dispatch(E.t).refreshConnectedPlugins(),j(I==null?void 0:I.status)}).catch(I=>{const{name:ue}=s.getProduct(e),$e=(0,f.gB)(p("Failed to activate %1$s. Please try again","jetpack-my-jetpack"),ue);i(F(e,!1)),i(J(e,I)),i(R($e,{status:"error",isDismissible:!0})),X(I)})})}const Se={setPurchasesIsFetching:S,setChatAvailabilityIsFetching:de,fetchPurchases:Re,setPurchases:te,setChatAvailability:ge,setAvailableLicensesIsFetching:ye,fetchAvailableLicenses:W,setAvailableLicenses:Ee,setProductStats:(e,t)=>({type:v,productId:e,stats:t}),setIsFetchingProductStats:(e,t)=>({type:M,productId:e,isFetching:t}),...{setGlobalNotice:R,cleanGlobalNotice:me},...{setProduct:se,activateProduct:e=>async t=>await re(e,{activate:!0},t),deactivateStandalonePluginForProduct:e=>async t=>await re(e,{activate:!1},t),installStandalonePluginForProduct:e=>async t=>{const{select:r,dispatch:s,registry:i}=t;return await new Promise((d,j)=>{if(!r.isValidProduct(e)){const g=p("Invalid product name","jetpack-my-jetpack"),q=new Error(g);s(J(e,q)),s(R(g,{status:"error",isDismissible:!0})),j(q);return}return s(F(e,!0)),(0,_.Z)({path:`${l}/${e}/install-standalone`,method:"POST"}).then(g=>{s(F(e,!1)),s(se(g)),i.dispatch(E.t).refreshConnectedPlugins(),d(g==null?void 0:g.standalone_plugin_info)}).catch(g=>{const{name:q}=r.getProduct(e),I=(0,f.gB)(p("Failed to install standalone plugin for %1$s: %2$s. Please try again","jetpack-my-jetpack"),q,g.message);s(F(e,!1)),s(J(e,g)),s(R(I,{status:"error",isDismissible:!0})),j(g)})})},setIsFetchingProduct:F,setRequestProductError:J,setProductStatus:_e}};function je(){return new Promise((e,t)=>{(0,_.Z)({path:u}).then(e).catch(t)})}const Te={[w]:je};var pe=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const be=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:{const{productId:r,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[r]:s},errors:{...e.errors,[r]:s?void 0:e.errors[r]}}}case h:{const{productId:r,status:s}=t;return{...e,items:{...e.items,[r]:{...e.items[r],status:s}}}}case U:{const{product:r}=t,{slug:s}=r;return{...e,items:{...e.items,[s]:r}}}case C:{const{productId:r,error:s}=t;return{...e,errors:{...e.errors,[r]:s}}}default:return e}},De=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{...e,isFetching:t.isFetching};case N:return{...e,items:(t==null?void 0:t.purchases)||[]};default:return e}},we=function(){var r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{isFetching:!1,isAvailable:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{...e,isFetching:t.isFetching};case x:return{...e,isAvailable:(r=t==null?void 0:t.chatAvailability)==null?void 0:r.is_available};default:return e}},he=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return{...e,isFetching:t.isFetching};case O:return{...e,items:(t==null?void 0:t.availableLicenses)||[]};default:return e}},Ce=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{global:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:{const{message:r,options:s}=t;return{...e,global:{message:r,options:s}}}case ee:return{...e,global:{}};default:return e}},Ie=function(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}},fe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:{const{productId:r,isFetching:s}=t;return{...e,isFetching:{...e.isFetching,[r]:s}}}case v:{const{productId:r,stats:s}=t;return{...e,items:{...e.items,[r]:s}}}default:return e}},Ae=(0,pe.UY)({products:be,purchases:De,chatAvailability:we,availableLicenses:he,notices:Ce,plugins:Ie,stats:fe});var Y=a("../api/index.jsx"),n=a("../../packages/my-jetpack/_inc/components/product-card/action-buton.jsx");const c=async()=>(0,_.Z)({path:A}),G=async e=>e===D?c():null,ne=f.__,Pe={...{getProduct:{isFulfilled:(e,t)=>{var s;return(((s=e==null?void 0:e.products)==null?void 0:s.items)||{}).hasOwnProperty(t)&&!b.includes(t)},fulfill:e=>async t=>{let{dispatch:r}=t;try{r.setIsFetchingProduct(e,!0);const s=await(0,_.Z)({path:`${l}/${e}`});return r.setProduct(s),r.setIsFetchingProduct(e,!1),Promise.resolve()}catch(s){if(r.setIsFetchingProduct(e,!1),s!=null&&s.code&&(s!=null&&s.message))return r.setRequestProductError(e,s),Promise.reject(s);throw new Error(s)}}},getPurchases:()=>async e=>{let{dispatch:t}=e;t.setPurchasesIsFetching(!0);try{t.setPurchases(await(0,_.Z)({path:u})),t.setPurchasesIsFetching(!1)}catch(r){t.setPurchasesIsFetching(!1),r.code!=="not_connected"&&t.setGlobalNotice(ne("There was an error fetching your purchases information. Check your site connectivity and try again.","jetpack-my-jetpack"),{status:"error"})}},getChatAvailability:()=>async e=>{let{dispatch:t}=e;t.setChatAvailabilityIsFetching(!0);try{t.setChatAvailability(await(0,_.Z)({path:y})),t.setChatAvailabilityIsFetching(!1)}catch(r){t.setChatAvailabilityIsFetching(!1)}},getAvailableLicenses:()=>async e=>{let{dispatch:t}=e;t.setAvailableLicensesIsFetching(!0);try{const{apiRoot:r,apiNonce:s}=(window==null?void 0:window.myJetpackRest)||{};Y.ZP.setApiRoot(r),Y.ZP.setApiNonce(s);const i=await Y.ZP.getUserLicenses();i&&i.items?t.setAvailableLicenses(i.items.filter(d=>{let{attached_at:j}=d;return j===null})):t.setAvailableLicenses([])}catch(r){t.setAvailableLicenses([])}finally{t.setAvailableLicensesIsFetching(!1)}}},getProductStats:{isFulfilled:(e,t)=>{var r,s;return((s=(r=e.stats)==null?void 0:r.items)==null?void 0:s.hasOwnProperty(t))||!1},fulfill:e=>async t=>{let{dispatch:r,select:s}=t;const{status:i}=s.getProduct(e);if(i!==n.N.ACTIVE)return r.setProductStats(e,null),Promise.resolve();try{r.setIsFetchingProductStats(e,!0);const d=await G(e);return r.setProductStats(e,d),r.setIsFetchingProductStats(e,!1),Promise.resolve()}catch(d){if(r.setProductStats(e,null),r.setIsFetchingProductStats(e,!1),d!=null&&d.code&&(d!=null&&d.message))return Promise.reject(d);throw new Error(d)}}}};function ie(e){return e.replace(/([-_][a-z])/gi,t=>t.toUpperCase().replace("_",""))}function ae(e){return e.indexOf("_")!==-1}function L(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=Object.assign({},e);for(const s in r)r.hasOwnProperty(s)&&ae(s)&&(r[ie(s)]=r[s],t&&delete r[s]);return r}const ce=e=>{var t;return((t=e.products)==null?void 0:t.items)||{}},Be=e=>Object.keys(ce(e)),Ge={...{getProducts:ce,getProductNames:Be,getProduct:(e,t)=>{var i,d;const r=((i=ce(e))==null?void 0:i[t])||{},s=L(r,!0);return s.standalonePluginInfo=L(s.standalonePluginInfo||{},!0),s.pricingForUi=L(s.pricingForUi||{},!0),s.pricingForUi.introductoryOffer=s.pricingForUi.isIntroductoryOffer?L(s.pricingForUi.introductoryOffer,!0):null,(d=s.pricingForUi)!=null&&d.tiers&&(s.pricingForUi.tiers=L(s.pricingForUi.tiers,!0),s.pricingForUi.tiers=Object.keys(s.pricingForUi.tiers).reduce((j,X)=>{const g=L(s.pricingForUi.tiers[X],!0)||{};return j[X]={...g,introductoryOffer:g!=null&&g.isIntroductoryOffer?L(g==null?void 0:g.introductoryOffer,!0):null},j},{})),s.features=s.features||[],s.supportedProducts=s.supportedProducts||[],s.pricingForUi.fullPricePerMonth=Math.ceil(s.pricingForUi.fullPrice/12*100)/100,s.pricingForUi.discountPricePerMonth=Math.ceil(s.pricingForUi.discountPrice/12*100)/100,s},isValidProduct:(e,t)=>Be(e).includes(t),isFetching:(e,t)=>{var r,s;return((s=(r=e.products)==null?void 0:r.isFetching)==null?void 0:s[t])||!1},getProductsThatRequiresUserConnection:e=>{const t=ce(e);return Object.keys(t).reduce((r,s)=>{const i=t[s];return(i==null?void 0:i.requires_user_connection)&&((i==null?void 0:i.status)===n.N.ACTIVE||(i==null?void 0:i.status)===n.N.ERROR)&&r.push(i==null?void 0:i.name),r},[])}},...{getPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.items)||[]},isRequestingPurchases:e=>{var t;return((t=e.purchases)==null?void 0:t.isFetching)||!1}},...{getChatAvailability:e=>e.chatAvailability.isAvailable,isRequestingChatAvailability:e=>e.chatAvailability.isFetching},...{getAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.items)||[]},isFetchingAvailableLicenses:e=>{var t;return((t=e.availableLicenses)==null?void 0:t.isFetching)||!1}},...{getGlobalNotice:e=>{var t;return(t=e.notices)==null?void 0:t.global}},...{hasStandalonePluginInstalled:e=>Object.values(e.plugins).filter(t=>["jetpack-backup","jetpack-boost","jetpack-protect","jetpack-search","jetpack-social","jetpack-videopress"].indexOf(t.TextDomain)>=0).length>0},...{getProductStats:(e,t)=>{var r,s;return(s=(r=e.stats)==null?void 0:r.items)==null?void 0:s[t]},isFetchingProductStats:(e,t)=>{var r,s;return((s=(r=e.stats)==null?void 0:r.isFetching)==null?void 0:s[t])||!1}}};var Ze=a("../../../node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/defineProperty.js"),Ve=a.n(Ze),ze=a("../../../node_modules/.pnpm/@wordpress+data@9.2.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");class Q{static mayBeInit(t,r){Q.store===null&&(Q.store=(0,ze.Z)(t,r),(0,pe.z2)(Q.store))}}Ve()(Q,"store",null);const Me=Q,He="my-jetpack";function We(){Me.mayBeInit(He,{__experimentalUseThunks:!0,reducer:Ae,actions:Se,selectors:Ge,resolvers:Pe,controls:Te,initialState:window.myJetpackInitialState||{}})}}}]);})();
