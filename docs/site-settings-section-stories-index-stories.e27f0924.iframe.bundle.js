"use strict";(()=>{var Ce=Object.defineProperty;var Re=(I,d,n)=>d in I?Ce(I,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):I[d]=n;var J=(I,d,n)=>(Re(I,typeof d!="symbol"?d+"":d,n),n);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[3556],{"../../../node_modules/.pnpm/@storybook+addon-actions@8.0.6/node_modules/@storybook/addon-actions/dist/index.mjs":(I,d,n)=>{n.d(d,{aD:()=>y});var E=n("../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js"),T=n("@storybook/preview-api"),_=n("@storybook/global"),o=n("@storybook/core-events/preview-errors"),c="actions",i="storybook/actions",m=`${i}/panel`,S=`${i}/action-event`,v=`${i}/action-clear`,w="$___storybook.isCyclic",O={depth:10,clearOnStoryChange:!0,limit:50},M=(a={})=>{Object.assign(O,a)},C=(a,r)=>{let s=Object.getPrototypeOf(a);return!s||r(s)?s:C(s,r)},P=a=>!!(typeof a=="object"&&a&&C(a,r=>/^Synthetic(?:Base)?Event$/.test(r.constructor.name))&&typeof a.persist=="function"),x=a=>{if(P(a)){let r=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));r.persist();let s=Object.getOwnPropertyDescriptor(r,"view"),l=s==null?void 0:s.value;return typeof l=="object"&&(l==null?void 0:l.constructor.name)==="Window"&&Object.defineProperty(r,"view",{...s,value:Object.create(l.constructor.prototype)}),r}return a},D=()=>typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?(0,E.Z)():Date.now().toString(36)+Math.random().toString(36).substring(2);function y(a,r={}){let s={...O,...r},l=function(...R){var p,L;if(r.implicit){let b=(p="__STORYBOOK_PREVIEW__"in _.global?_.global.__STORYBOOK_PREVIEW__:void 0)==null?void 0:p.storyRenders.find(F=>F.phase==="playing"||F.phase==="rendering");if(b){let F=!((L=window==null?void 0:window.FEATURES)!=null&&L.disallowImplicitActionsInRenderV8),z=new o.ImplicitActionsDuringRendering({phase:b.phase,name:a,deprecated:F});if(F)console.warn(z);else throw z}}let g=T.addons.getChannel(),h=D(),N=5,U=R.map(x),f=R.length>1?U:U[0],A={id:h,count:0,data:{name:a,args:f},options:{...s,maxDepth:N+(s.depth||3),allowFunction:s.allowFunction||!1}};g.emit(S,A)};return l.isAction=!0,l.implicit=r.implicit,l}var j=(...a)=>{let r=O,s=a;s.length===1&&Array.isArray(s[0])&&([s]=s),s.length!==1&&typeof s[s.length-1]!="string"&&(r={...O,...s.pop()});let l=s[0];(s.length!==1||typeof l=="string")&&(l={},s.forEach(g=>{l[g]=g}));let R={};return Object.keys(l).forEach(g=>{R[g]=y(l[g],r)}),R}},"../../packages/videopress/src/client/admin/components/site-settings-section/stories/index.stories.tsx":(I,d,n)=>{var l,R,g;n.r(d),n.d(d,{__namedExportsOrder:()=>s,_default:()=>r,default:()=>j});var E=n("../../../node_modules/.pnpm/@storybook+addon-actions@8.0.6/node_modules/@storybook/addon-actions/dist/index.mjs"),T=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_=n("../components/components/layout/container/index.tsx"),o=n("../components/components/layout/col/index.tsx"),c=n("../components/components/text/index.tsx"),i=n("../../../node_modules/.pnpm/@wordpress+i18n@4.55.0/node_modules/@wordpress/i18n/build-module/index.js"),m=n("../../packages/videopress/src/client/admin/hooks/use-permission/index.ts"),S=n("../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts"),v=n("../../packages/videopress/src/client/admin/components/video-filter/index.tsx");const w="atomic",O="simple",M="jetpack";var C=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const P=i.__,x=({videoPressVideosPrivateForSite:h,siteIsPrivate:N,siteType:U,onPrivacyChange:f})=>{const{canPerformAction:A}=(0,m.g)(),p=N&&U===w,L=!A||p,b=p?P("You cannot change this setting because your site is private. You can only choose the video privacy default on public sites.","jetpack-videopress-pkg"):null;return(0,C.jsxs)(_.Z,{horizontalSpacing:0,horizontalGap:0,children:[(0,C.jsx)(o.Z,{children:(0,C.jsx)(c.ZP,{variant:"headline-small",mb:1,children:P("Settings","jetpack-videopress-pkg")})}),(0,C.jsx)(o.Z,{sm:12,md:12,lg:12,children:(0,C.jsx)(v.JC,{for:"settings-site-privacy",label:P("Video Privacy: Restrict views to members of this site","jetpack-videopress-pkg"),onChange:f,checked:h,disabled:L,disabledReason:b})})]})},D=()=>{const{settings:h,onUpdate:N}=useVideoPressSettings(),{videoPressVideosPrivateForSite:U,siteIsPrivate:f,siteType:A}=h;return _jsx(x,{videoPressVideosPrivateForSite:U,siteIsPrivate:f,siteType:A,onPrivacyChange:p=>{N({videoPressVideosPrivateForSite:p})}})},y=x,j={title:"Packages/VideoPress/Site Settings",component:y,argTypes:{}},r=(h=>(0,C.jsx)(y,{...h})).bind({});r.args={onPrivacyChange:(0,E.aD)("onPrivacyChange")},r.parameters={...r.parameters,docs:{...(l=r.parameters)==null?void 0:l.docs,source:{originalSource:"args => <SettingsSection {...args} />",...(g=(R=r.parameters)==null?void 0:R.docs)==null?void 0:g.source}}};const s=["_default"]},"../../../node_modules/.pnpm/@wordpress+compose@6.32.0_react@18.2.0/node_modules/@wordpress/compose/build-module/hooks/use-media-query/index.js":(I,d,n)=>{n.d(d,{Z:()=>_});var E=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function T(o){return o&&typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia(o):null}function _(o){const c=(0,E.useMemo)(()=>{const i=T(o);return{subscribe(m){var S;return i?((S=i.addEventListener)==null||S.call(i,"change",m),()=>{var v;(v=i.removeEventListener)==null||v.call(i,"change",m)}):()=>{}},getValue(){var m;return(m=i==null?void 0:i.matches)!==null&&m!==void 0?m:!1}}},[o]);return(0,E.useSyncExternalStore)(c.subscribe,c.getValue,()=>!1)}},"../../../node_modules/.pnpm/@wordpress+icons@9.46.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/info.js":(I,d,n)=>{n.d(d,{Z:()=>o});var E=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),T=n("../../../node_modules/.pnpm/@wordpress+primitives@3.53.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const o=(0,E.createElement)(T.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,E.createElement)(T.y$,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"}))},"../connection/components/use-connection/index.jsx":(I,d,n)=>{n.d(d,{Z:()=>m});var E=n("../api/index.jsx"),T=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),_=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),o=n("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),c=n("../connection/state/store.jsx");const i=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},m=({registrationNonce:S=i.registrationNonce,apiRoot:v=i.apiRoot,apiNonce:w=i.apiNonce,redirectUri:O,autoTrigger:M,from:C,skipUserConnection:P}={})=>{const{registerSite:x,connectUser:D,refreshConnectedPlugins:y}=(0,T.Z)(c.t),j=(0,_.Z)(p=>p(c.t).getRegistrationError()),{siteIsRegistering:a,userIsConnecting:r,userConnectionData:s,connectedPlugins:l,connectionErrors:R,isRegistered:g,isUserConnected:h,hasConnectedOwner:N,isOfflineMode:U}=(0,_.Z)(p=>({siteIsRegistering:p(c.t).getSiteIsRegistering(),userIsConnecting:p(c.t).getUserIsConnecting(),userConnectionData:p(c.t).getUserConnectionData(),connectedPlugins:p(c.t).getConnectedPlugins(),connectionErrors:p(c.t).getConnectionErrors(),isOfflineMode:p(c.t).getIsOfflineMode(),...p(c.t).getConnectionStatus()})),f=()=>{if(P){if(O)return window.location=O,Promise.resolve(O)}else return D({from:C,redirectUri:O});return Promise.resolve()},A=p=>(p&&p.preventDefault(),g?f():x({registrationNonce:S,redirectUri:O}).then(()=>f()));return(0,o.useEffect)(()=>{E.ZP.setApiRoot(v),E.ZP.setApiNonce(w)},[v,w]),(0,o.useEffect)(()=>{M&&!a&&!r&&A()},[]),{handleRegisterSite:A,handleConnectUser:f,refreshConnectedPlugins:y,isRegistered:g,isUserConnected:h,siteIsRegistering:a,userIsConnecting:r,registrationError:j,userConnectionData:s,hasConnectedOwner:N,connectedPlugins:l,connectionErrors:R,isOfflineMode:U}}},"../connection/state/store.jsx":(I,d,n)=>{n.d(d,{t:()=>B});var E=n("../api/index.jsx");const T="SET_CONNECTION_STATUS",_="SET_CONNECTION_STATUS_IS_FETCHING",o="FETCH_CONNECTION_STATUS",c="SET_SITE_IS_REGISTERING",i="SET_USER_IS_CONNECTING",m="SET_REGISTRATION_ERROR",S="CLEAR_REGISTRATION_ERROR",v="REGISTER_SITE",w="SET_AUTHORIZATION_URL",O="CONNECT_USER",M="DISCONNECT_USER_SUCCESS",C="FETCH_AUTHORIZATION_URL",P="SET_CONNECTED_PLUGINS",x="REFRESH_CONNECTED_PLUGINS",D="SET_CONNECTION_ERRORS",y="SET_IS_OFFLINE_MODE",j=e=>({type:T,connectionStatus:e}),a=e=>({type:_,isFetching:e}),r=()=>({type:o}),s=e=>({type:c,isRegistering:e}),l=e=>({type:i,isConnecting:e}),R=()=>({type:M}),g=e=>({type:m,registrationError:e}),h=()=>({type:S}),N=e=>({type:w,authorizationUrl:e}),U=e=>({type:C,redirectUri:e}),f=e=>({type:P,connectedPlugins:e}),A=e=>({type:D,connectionErrors:e}),p=e=>({type:y,isOfflineMode:e});function*L({from:e,redirectFunc:t,redirectUri:u}={}){yield l(!0),yield{type:O,from:e,redirectFunc:t,redirectUri:u}}function*b({registrationNonce:e,redirectUri:t}){yield h(),yield s(!0);try{const u=yield{type:v,registrationNonce:e,redirectUri:t};return yield j({isRegistered:!0}),yield N(u.authorizeUrl),yield s(!1),Promise.resolve(u)}catch(u){return yield g(u),yield s(!1),Promise.reject(u)}}const z={setConnectionStatus:j,setConnectionStatusIsFetching:a,fetchConnectionStatus:r,fetchAuthorizationUrl:U,setSiteIsRegistering:s,setUserIsConnecting:l,setRegistrationError:g,clearRegistrationError:h,setAuthorizationUrl:N,registerSite:b,connectUser:L,disconnectUserSuccess:R,setConnectedPlugins:f,refreshConnectedPlugins:()=>async({dispatch:e})=>await new Promise(t=>E.ZP.fetchConnectedPlugins().then(u=>{e(f(u)),t(u)})),setConnectionErrors:A,setIsOfflineMode:p};var $=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const B="jetpack-connection",X=({registrationNonce:e,redirectUri:t})=>E.ZP.registerSite(e,t),Q=(0,$.R)(({resolveSelect:e})=>({from:t,redirectFunc:u,redirectUri:G}={})=>new Promise((Te,Se)=>{e(B).getAuthorizationUrl(G).then(V=>{const Ie=u||(Oe=>window.location.assign(Oe)),H=new URL(V);t&&H.searchParams.set("from",encodeURIComponent(t));const Y=H.toString();Ie(Y),Te(Y)}).catch(V=>{Se(V)})})),q={FETCH_AUTHORIZATION_URL:({redirectUri:e})=>E.ZP.fetchAuthorizationUrl(e),REGISTER_SITE:X,CONNECT_USER:Q};var K=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const ee=(e={},t)=>{switch(t.type){case T:return{...e,...t.connectionStatus};case M:return{...e,isUserConnected:!1}}return e},te=(e={},t)=>{switch(t.type){case P:return t.connectedPlugins}return e},ne=(e=!1,t)=>{switch(t.type){case _:return t.isFetching}return e},se=(e=!1,t)=>{switch(t.type){case c:return t.isRegistering}return e},oe=(e=!1,t)=>{switch(t.type){case i:return t.isConnecting}return e},re=(e,t)=>{switch(t.type){case S:return!1;case m:return t.registrationError;default:return e}},ie=(e,t)=>{switch(t.type){case w:return t.authorizationUrl;default:return e}},ce=(e,t)=>{switch(t.type){default:return e}},ae=(e={},t)=>{switch(t.type){case D:return t.connectionErrors}return e},de=(e=!1,t)=>{switch(t.type){case y:return t.isConnecting}return e},le=(0,K.UY)({connectionStatus:ee,connectionStatusIsFetching:ne,siteIsRegistering:se,userIsConnecting:oe,registrationError:re,authorizationUrl:ie,userConnectionData:ce,connectedPlugins:te,connectionErrors:ae,isOfflineMode:de});var ue=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),pe=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const Ee={...{getAuthorizationUrl:{isFulfilled:(e,...t)=>{const u=!!e.authorizationUrl,G=(0,ue.Y)(B).hasFinishedResolution("getAuthorizationUrl",t);return u&&!G&&(0,pe.W)(B).finishResolution("getAuthorizationUrl",t),u},*fulfill(e){const t=yield z.fetchAuthorizationUrl(e);yield z.setAuthorizationUrl(t.authorizeUrl)}}}},_e={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:e=>e.siteIsRegistering||!1,getUserIsConnecting:e=>e.userIsConnecting||!1,getRegistrationError:e=>e.registrationError||!1,getAuthorizationUrl:e=>e.authorizationUrl||!1,getUserConnectionData:e=>e.userConnectionData||!1,getConnectedPlugins:e=>e.connectedPlugins||[],getConnectionErrors:e=>e.connectionErrors||[],getIsOfflineMode:e=>e.isOfflineMode||!1,getWpcomUser:e=>{var t,u;return(u=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:u.wpcomUser},getBlogId:e=>{var t,u;return(u=(t=e==null?void 0:e.userConnectionData)==null?void 0:t.currentUser)==null?void 0:u.blogId}}};var me=n("../../../node_modules/.pnpm/@wordpress+data@9.25.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const Z=class{static mayBeInit(t,u){Z.store===null&&(Z.store=(0,me.Z)(t,u),(0,K.z2)(Z.store))}};let k=Z;J(k,"store",null);const ge=k,W=window.JP_CONNECTION_INITIAL_STATE;W||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),ge.mayBeInit(B,{__experimentalUseThunks:!0,reducer:le,actions:z,selectors:_e,resolvers:Ee,controls:q,initialState:W||{}})},"../../packages/videopress/src/client/admin/hooks/use-permission/index.ts":(I,d,n)=>{n.d(d,{g:()=>T});var E=n("../connection/components/use-connection/index.jsx");const T=()=>{const{isRegistered:_,hasConnectedOwner:o,isUserConnected:c}=(0,E.Z)();return{isRegistered:_,hasConnectedOwner:o,isUserConnected:c,canPerformAction:_&&o&&c}}},"../../packages/videopress/src/client/admin/hooks/use-videopress-settings/index.ts":(I,d,n)=>{var E=n("../../packages/videopress/src/client/state/index.js");const T=()=>{var c,i,m;const _=useDispatch(STORE_ID),o=useSelect(S=>S(STORE_ID).getVideoPressSettings(),[]);return{settings:{videoPressVideosPrivateForSite:(c=o==null?void 0:o.videoPressVideosPrivateForSite)!=null?c:!1,siteIsPrivate:(i=o==null?void 0:o.siteIsPrivate)!=null?i:!1,siteType:(m=o==null?void 0:o.siteType)!=null?m:SITE_TYPE_JETPACK},onUpdate:S=>_.updateVideoPressSettings(S)}}}}]);})();
