"use strict";(()=>{(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[4012],{"../../../node_modules/.pnpm/@storybook+blocks@7.4.6_@types+react-dom@18.2.7_@types+react@18.2.19_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/blocks/dist/Color-6VNJS4EI.mjs":(se,P,u)=>{u.r(P),u.d(P,{ColorControl:()=>M,default:()=>q});var T=u("../../../node_modules/.pnpm/@storybook+blocks@7.4.6_@types+react-dom@18.2.7_@types+react@18.2.19_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/blocks/dist/chunk-GWAJ4KRU.mjs"),r=u("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),$=u("../../../node_modules/.pnpm/react-colorful@5.6.1_react-dom@18.2.0_react@18.2.0/node_modules/react-colorful/dist/index.mjs"),W=u("../../../node_modules/.pnpm/color-convert@2.0.1/node_modules/color-convert/index.js"),m=u.n(W),D=u("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js"),I=u.n(D),b=u("../../../node_modules/.pnpm/@storybook+theming@7.4.6_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/theming/dist/index.mjs"),x=u("../../../node_modules/.pnpm/@storybook+components@7.4.6_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/components/dist/index.mjs"),L=b.zo.div({position:"relative",maxWidth:250}),B=(0,b.zo)(x.WithTooltip)({position:"absolute",zIndex:1,top:4,left:4}),z=b.zo.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),j=(0,b.zo)(x.TooltipNote)(({theme:e})=>({fontFamily:e.typography.fonts.base})),A=b.zo.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),K=b.zo.div(({theme:e,active:t})=>({width:16,height:16,boxShadow:t?`${e.appBorderColor} 0 0 0 1px inset, ${e.textMutedColor}50 0 0 0 4px`:`${e.appBorderColor} 0 0 0 1px inset`,borderRadius:e.appBorderRadius})),U=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,O=({value:e,active:t,onClick:a,style:n,...s})=>{let d=`linear-gradient(${e}, ${e}), ${U}, linear-gradient(#fff, #fff)`;return r.createElement(K,{...s,active:t,onClick:a,style:{...n,backgroundImage:d}})},G=(0,b.zo)(x.Form.Input)(({theme:e})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:e.typography.fonts.base})),H=(0,b.zo)(x.Icons)(({theme:e})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:e.input.color})),R=(e=>(e.RGB="rgb",e.HSL="hsl",e.HEX="hex",e))(R||{}),f=Object.values(R),V=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,X=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,F=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,v=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,N=/^\s*#?([0-9a-f]{3})\s*$/i,J={hex:$.gW,rgb:$.ef,hsl:$.W3},y={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},w=e=>{let t=e==null?void 0:e.match(V);if(!t)return[0,0,0,1];let[,a,n,s,d=1]=t;return[a,n,s,d].map(Number)},E=e=>{if(!e)return;let t=!0;if(X.test(e)){let[i,o,c,_]=w(e),[g,h,l]=m().rgb.hsl([i,o,c])||[0,0,0];return{valid:t,value:e,keyword:m().rgb.keyword([i,o,c]),colorSpace:"rgb",rgb:e,hsl:`hsla(${g}, ${h}%, ${l}%, ${_})`,hex:`#${m().rgb.hex([i,o,c]).toLowerCase()}`}}if(F.test(e)){let[i,o,c,_]=w(e),[g,h,l]=m().hsl.rgb([i,o,c])||[0,0,0];return{valid:t,value:e,keyword:m().hsl.keyword([i,o,c]),colorSpace:"hsl",rgb:`rgba(${g}, ${h}, ${l}, ${_})`,hsl:e,hex:`#${m().hsl.hex([i,o,c]).toLowerCase()}`}}let a=e.replace("#",""),n=m().keyword.rgb(a)||m().hex.rgb(a),s=m().rgb.hsl(n),d=e;if(/[^#a-f0-9]/i.test(e)?d=a:v.test(e)&&(d=`#${a}`),d.startsWith("#"))t=v.test(d);else try{m().keyword.hex(d)}catch(i){t=!1}return{valid:t,value:d,keyword:m().rgb.keyword(n),colorSpace:"hex",rgb:`rgba(${n[0]}, ${n[1]}, ${n[2]}, 1)`,hsl:`hsla(${s[0]}, ${s[1]}%, ${s[2]}%, 1)`,hex:d}},Q=(e,t,a)=>{if(!e||!(t!=null&&t.valid))return y[a];if(a!=="hex")return(t==null?void 0:t[a])||y[a];if(!t.hex.startsWith("#"))try{return`#${m().keyword.hex(t.hex)}`}catch(o){return y.hex}let n=t.hex.match(N);if(!n)return v.test(t.hex)?t.hex:y.hex;let[s,d,i]=n[1].split("");return`#${s}${s}${d}${d}${i}${i}`},Y=(e,t)=>{let[a,n]=(0,r.useState)(e||""),[s,d]=(0,r.useState)(()=>E(a)),[i,o]=(0,r.useState)((s==null?void 0:s.colorSpace)||"hex");(0,r.useEffect)(()=>{let h=e||"",l=E(h);n(h),d(l),o((l==null?void 0:l.colorSpace)||"hex")},[e]);let c=(0,r.useMemo)(()=>Q(a,s,i).toLowerCase(),[a,s,i]),_=(0,r.useCallback)(h=>{let l=E(h),C=(l==null?void 0:l.value)||h||"";n(C),C===""&&(d(void 0),t(void 0)),l&&(d(l),o(l.colorSpace),t(l.value))},[t]),g=(0,r.useCallback)(()=>{let h=f.indexOf(i)+1;h>=f.length&&(h=0),o(f[h]);let l=(s==null?void 0:s[f[h]])||"";n(l),t(l)},[s,i,t]);return{value:a,realValue:c,updateValue:_,color:s,colorSpace:i,cycleColorSpace:g}},k=e=>e.replace(/\s*/,"").toLowerCase(),Z=(e,t,a)=>{let[n,s]=(0,r.useState)(t!=null&&t.valid?[t]:[]);(0,r.useEffect)(()=>{t===void 0&&s([])},[t]);let d=(0,r.useMemo)(()=>(e||[]).map(o=>typeof o=="string"?E(o):o.title?{...E(o.color),keyword:o.title}:E(o.color)).concat(n).filter(Boolean).slice(-27),[e,n]),i=(0,r.useCallback)(o=>{o!=null&&o.valid&&(d.some(c=>k(c[a])===k(o[a]))||s(c=>c.concat(o)))},[a,d]);return{presets:d,addPreset:i}},M=({name:e,value:t,onChange:a,onFocus:n,onBlur:s,presetColors:d,startOpen:i=!1})=>{let o=(0,r.useCallback)(I()(a,200),[a]),{value:c,realValue:_,updateValue:g,color:h,colorSpace:l,cycleColorSpace:C}=Y(t,o),{presets:S,addPreset:ee}=Z(d,h,l),te=J[l];return r.createElement(L,null,r.createElement(B,{startOpen:i,closeOnOutsideClick:!0,onVisibleChange:()=>ee(h),tooltip:r.createElement(z,null,r.createElement(te,{color:_==="transparent"?"#000000":_,onChange:g,onFocus:n,onBlur:s}),S.length>0&&r.createElement(A,null,S.map((p,oe)=>r.createElement(x.WithTooltip,{key:`${p.value}-${oe}`,hasChrome:!1,tooltip:r.createElement(j,{note:p.keyword||p.value})},r.createElement(O,{value:p[l],active:h&&k(p[l])===k(h[l]),onClick:()=>g(p.value)})))))},r.createElement(O,{value:_,style:{margin:4}})),r.createElement(G,{id:(0,T.d)(e),value:c,onChange:p=>g(p.target.value),onFocus:p=>p.target.select(),placeholder:"Choose color..."}),c?r.createElement(H,{icon:"markup",onClick:C}):null)},q=M}}]);})();
