"use strict";(()=>{var Ie=Object.defineProperty;var ve=(O,d,e)=>d in O?Ie(O,d,{enumerable:!0,configurable:!0,writable:!0,value:e}):O[d]=e;var _e=(O,d,e)=>(ve(O,typeof d!="symbol"?d+"":d,e),e);(self.webpackChunk_automattic_jetpack_storybook=self.webpackChunk_automattic_jetpack_storybook||[]).push([[2158],{"../../packages/my-jetpack/_inc/components/product-detail-table/stories/index.stories.jsx":(O,d,e)=>{var S,D,A,k,U,B,w,L,m;e.r(d),e.d(d,{JetpackProtect:()=>T,JetpackSocial:()=>y,__namedExportsOrder:()=>b,default:()=>a,jetpackBoost:()=>_});var r=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=e("../../packages/my-jetpack/_inc/components/product-detail-table/index.jsx");const h={boost:{slug:"boost",name:"Boost",title:"Jepack Boost",description:"The easiest speed optimization plugin for WordPress",long_description:"Jetpack Boost gives your site the same performance advantages as the world\u2019s leading websites, no developer required.",status:"inactive",features:["Check your site performance","Enable improvements in one click","Standalone free plugin for those focused on speed"],tiers:["upgraded","free"],featuresByTier:[{name:"Optimize CSS Loading",info:{content:"Move important styling information to the start of the page, which helps pages display your content sooner, so your users don\u2019t have to wait for the entire page to load. Commonly referred to as Critical CSS."},tiers:{free:{included:!1,description:"Must be done manually",info:{title:"Manual Critical CSS regeneration",content:`
							<p>To enhance the speed of your site, with this plan you will need to optimize CSS by using the Manual Critical CSS generation feature whenever you:</p>
							<ul>
								<li>Make theme changes.</li>
								<li>Write a new post/page.</li>
								<li>Edit a post/page.</li>
								<li>Activate, deactivate, or update plugins that impact your site layout or HTML structure.</li>
								<li>Change settings of plugins that impact your site layout or HTML structure.</li>
								<li>Upgrade your WordPress version if the new release includes core CSS changes.</li>
							</ul>`}},upgraded:{included:!0,description:"Automatically updated",info:{title:"Automatic Critical CSS regeneration",content:`<p>It\u2019s essential to regenerate Critical CSS to optimize your site speed whenever your HTML or CSS structure changes. Being on top of this can be tedious and time-consuming.</p>
								  <p>Boost\u2019s cloud service can automatically detect when your site needs the Critical CSS regenerated, and perform this function behind the scenes without requiring you to monitor it manually.</p>`}}}},{name:"Defer non-essential JavaScript",info:{content:'Run non-essential JavaScript after the page has loaded so that styles and images can load more quickly. Read more on <a href="#" target="_blank" rel="noreferrer" />web.dev</a>.'},tiers:{free:{included:!0},upgraded:{included:!0}}},{name:"Lazy image loading",info:{content:'Improve page loading speed by only loading images when they are required. Read more on <a href="#" target="_blank" rel="noreferrer" />web.dev</a>.'},tiers:{free:{included:!0},upgraded:{included:!0}}},{name:"Image guide",info:{content:"Discover and fix images with a suboptimal resolution, aspect ratio, or file size, improving user experience and page speed."},tiers:{free:{included:!0},upgraded:{included:!0}}},{name:"Dedicated email support",info:{content:`<p>Paid customers get dedicated email support from our world-class Happiness Engineers to help with any issue.</p>
					      <p>All other questions are handled by our team as quickly as we are able to go through the WordPress support forum.</p>`},tiers:{free:{included:!1},upgraded:{included:!0}}}],pricingForUi:{tiers:{free:{available:!0,isFree:!0},upgraded:{available:!0,wpcomProductSlug:"jetpack_boost",currencyCode:"USD",fullPrice:240,discountPrice:120,isIntroductoryOffer:!0,introductoryOffer:{intervalUnit:"year",intervalCount:1,usageLimit:null,costPerInterval:167.4,transitionAfterRenewalCount:0,shouldProrateWhenOfferEnds:!1}}}}},protect:{slug:"protect",name:"Protect",title:"Jepack Protect",description:"Stay one step ahead of threats",long_description:"Automatic scanning and one-click fixes keep your site one step ahead of security threats and malware.",status:"inactive",features:["Automated daily scanning","One-click fixes for most issues","Instant email notifications","Access to latest Firewall rules"],pricingForUi:{tiers:{free:{available:!0,isFree:!0},upgraded:{available:!0,wpcomProductSlug:"jetpack_scan",currencyCode:"USD",fullPrice:120,discountPrice:60}}},tiers:["upgraded","free"],featuresByTier:[{name:"Scan for threats and vulnerabilities",tiers:{free:{included:!0,description:"Check items against database"},upgraded:{included:!0,description:"Line by line malware scanning"}}},{name:"Daily automated scans",tiers:{free:{included:!0},upgraded:{included:!0,description:"Plus on-demand manual scans"}}},{name:"Access to scan on Cloud",tiers:{free:{included:!1},upgraded:{included:!0}}},{name:"One-click auto fixes",tiers:{free:{included:!1},upgraded:{included:!0}}},{name:"Notifications",tiers:{free:{included:!1},upgraded:{included:!0}}},{name:"Severity labels",tiers:{free:{included:!1},upgraded:{included:!0}}}]},social:{slug:"social",name:"Social",title:"Jepack Social",description:"Reach your audience on social media",long_description:"Promote your content on social media by automatically publishing when you publish on your site.",status:"inactive",features:["Post to social networks","Schedule publishing","Supports the major social networks"],tiers:["advanced","basic","free"],featuresByTier:[{name:"Number of shares in 30 days",tiers:{free:{included:!0,description:"Up to 30"},basic:{included:!0,struck_description:"Up to 1,000",description:"Unlimited",info:{title:"Unlimited shares",content:"We are working on exciting new features for Jetpack Social. In the meantime, enjoy unlimited shares for a limited time!"}},advanced:{included:!0}}},{name:"Priority support",tiers:{free:{included:!1},basic:{included:!0},advanced:{included:!0}}},{name:"Schedule posting",tiers:{free:{included:!0},basic:{included:!0},advanced:{included:!0}}},{name:"Twitter, Facebook, LinkedIn & Tumblr",tiers:{free:{included:!0},basic:{included:!0},advanced:{included:!0}}},{name:"Customize publications",tiers:{free:{included:!0},basic:{included:!0},advanced:{included:!0}}},{name:"Recycle content",info:{content:"Repurpose, reuse or republish already published content."},tiers:{free:{included:!0},basic:{included:!0},advanced:{included:!0}}},{name:"Engagement optimizer",info:{content:"Enhance social media engagement with personalized posts."},tiers:{free:{included:!1},basic:{included:!1},advanced:{included:!0}}},{name:"Video sharing",info:{title:"Coming soon",content:"Upload and share videos to your social platforms."},tiers:{free:{included:!1},basic:{included:!1},advanced:{included:!0,description:"Coming soon"}}},{name:"Multi-image sharing",info:{title:"Coming soon",content:"Share multiple images at once on social media platforms."},tiers:{free:{included:!1},basic:{included:!1},advanced:{included:!0,description:"Coming soon"}}},{name:"Image generator",info:{title:"Coming soon",content:"Automatically create custom images, saving you hours of tedious work."},tiers:{free:{included:!1},basic:{included:!1},advanced:{included:!0,description:"Coming soon"}}}],pricingForUi:{tiers:{free:{available:!0,isFree:!0},basic:{available:!0,wpcomProductSlug:"jetpack_social_basic_yearly",callToAction:"Get Basic plan",currencyCode:"USD",fullPrice:120,discountPrice:12,isIntroductoryOffer:!0,introductoryOffer:{intervalUnit:"month",intervalCount:1,usageLimit:0,costPerInterval:12,transitionAfterRenewalCount:0,shouldProrateWhenOfferEnds:!1}},advanced:{available:!0,wpcomProductSlug:"jetpack_social_advanced_yearly",callToAction:"Get Advanced plan",currencyCode:"USD",fullPrice:180,discountPrice:12,isIntroductoryOffer:!0,introductoryOffer:{intervalUnit:"month",intervalCount:1,usageLimit:0,costPerInterval:12,transitionAfterRenewalCount:0,shouldProrateWhenOfferEnds:!1}}}}}};function P(R){const x=R.constructor===Array?R:[R],l=x.map(Z=>({url:`my-jetpack/v1/site/products/${Z}?_locale=user`,method:"GET",status:200,response:h[Z]})),F=x.map(Z=>({url:`my-jetpack/v1/site/products/${Z}?_locale=user`,method:"POST",status:200,response:{...h[Z],status:h[Z].status==="active"?"inactive":"active"}}));return[...l,...F]}function N(){return P([...Object.keys(h)])}function f(){return["boost","protect","social"]}var c=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),v=`/* eslint-disable react/react-in-jsx-scope */
import React from 'react';
import ProductDetailTable from '../index.jsx';
import { getAllMockData } from './utils.js';

export default {
	title: 'Packages/My Jetpack/Product Detail Table',
	component: ProductDetailTable,
	parameters: {
		layout: 'centered',
	},
	decorators: [
		Story => (
			<div style={ { maxWidth: '1120px' } }>
				<Story />
			</div>
		),
	],
};

const mockData = getAllMockData();

const BoostTemplate = args => <ProductDetailTable { ...args } slug="boost" />;
export const jetpackBoost = BoostTemplate.bind( {} );
jetpackBoost.parameters = { mockData };

const ProtectTemplate = args => <ProductDetailTable { ...args } slug="protect" />;
export const JetpackProtect = ProtectTemplate.bind( {} );
JetpackProtect.parameters = { mockData };

const SocialTemplate = args => <ProductDetailTable { ...args } slug="social" />;
export const JetpackSocial = SocialTemplate.bind( {} );
JetpackSocial.parameters = { mockData };
`,C={jetpackBoost:{startLoc:{col:22,line:23},endLoc:{col:77,line:23},startBody:{col:22,line:23},endBody:{col:77,line:23}},JetpackProtect:{startLoc:{col:24,line:27},endLoc:{col:81,line:27},startBody:{col:24,line:27},endBody:{col:81,line:27}},JetpackSocial:{startLoc:{col:23,line:31},endLoc:{col:79,line:31},startBody:{col:23,line:31},endBody:{col:79,line:31}}};const a={title:"Packages/My Jetpack/Product Detail Table",component:i.Z,parameters:{storySource:{source:`
import React from 'react';
import ProductDetailTable from '../index.jsx';
import { getAllMockData } from './utils.js';

export default {
	title: 'Packages/My Jetpack/Product Detail Table',
	component: ProductDetailTable,
	parameters: {
		layout: 'centered',
	},
	decorators: [
		Story => (
			<div style={ { maxWidth: '1120px' } }>
				<Story />
			</div>
		),
	],
};

const mockData = getAllMockData();

const BoostTemplate = args => <ProductDetailTable { ...args } slug="boost" />;
export const jetpackBoost = BoostTemplate.bind( {} );
jetpackBoost.parameters = { mockData };

const ProtectTemplate = args => <ProductDetailTable { ...args } slug="protect" />;
export const JetpackProtect = ProtectTemplate.bind( {} );
JetpackProtect.parameters = { mockData };

const SocialTemplate = args => <ProductDetailTable { ...args } slug="social" />;
export const JetpackSocial = SocialTemplate.bind( {} );
JetpackSocial.parameters = { mockData };
`,locationsMap:{"jetpack-boost":{startLoc:{col:22,line:23},endLoc:{col:77,line:23},startBody:{col:22,line:23},endBody:{col:77,line:23}},"jetpack-protect":{startLoc:{col:24,line:27},endLoc:{col:81,line:27},startBody:{col:24,line:27},endBody:{col:81,line:27}},"jetpack-social":{startLoc:{col:23,line:31},endLoc:{col:79,line:31},startBody:{col:23,line:31},endBody:{col:79,line:31}}}},layout:"centered"},decorators:[R=>(0,c.jsx)("div",{style:{maxWidth:"1120px"},children:(0,c.jsx)(R,{})})]},o=N(),s=R=>(0,c.jsx)(i.Z,{...R,slug:"boost"});s.displayName="BoostTemplate";const _=s.bind({});_.parameters={mockData:o};const j=R=>(0,c.jsx)(i.Z,{...R,slug:"protect"});j.displayName="ProtectTemplate";const T=j.bind({});T.parameters={mockData:o};const p=R=>(0,c.jsx)(i.Z,{...R,slug:"social"});p.displayName="SocialTemplate";const y=p.bind({});y.parameters={mockData:o},_.parameters={..._.parameters,docs:{...(S=_.parameters)==null?void 0:S.docs,source:{originalSource:'args => <ProductDetailTable {...args} slug="boost" />',...(A=(D=_.parameters)==null?void 0:D.docs)==null?void 0:A.source}}},T.parameters={...T.parameters,docs:{...(k=T.parameters)==null?void 0:k.docs,source:{originalSource:'args => <ProductDetailTable {...args} slug="protect" />',...(B=(U=T.parameters)==null?void 0:U.docs)==null?void 0:B.source}}},y.parameters={...y.parameters,docs:{...(w=y.parameters)==null?void 0:w.docs,source:{originalSource:'args => <ProductDetailTable {...args} slug="social" />',...(m=(L=y.parameters)==null?void 0:L.docs)==null?void 0:m.source}}};const b=["jetpackBoost","JetpackProtect","JetpackSocial"]},"../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/close-small.js":(O,d,e)=>{e.d(d,{Z:()=>E});var r=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=e("../../../node_modules/.pnpm/@wordpress+primitives@3.50.0/node_modules/@wordpress/primitives/build-module/svg/index.js");const E=(0,r.createElement)(i.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(i.y$,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))},"../connection/components/use-connection/index.jsx":(O,d,e)=>{e.d(d,{Z:()=>P});var r=e("../api/index.jsx"),i=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),g=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),E=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),u=e("../connection/state/store.jsx");const h=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},P=({registrationNonce:N=h.registrationNonce,apiRoot:f=h.apiRoot,apiNonce:c=h.apiNonce,redirectUri:v,autoTrigger:C,from:a,skipUserConnection:o}={})=>{const{registerSite:s,connectUser:_,refreshConnectedPlugins:j}=(0,i.Z)(u.t),T=(0,g.Z)(m=>m(u.t).getRegistrationError()),{siteIsRegistering:p,userIsConnecting:y,userConnectionData:b,connectedPlugins:S,connectionErrors:D,isRegistered:A,isUserConnected:k,hasConnectedOwner:U,isOfflineMode:B}=(0,g.Z)(m=>({siteIsRegistering:m(u.t).getSiteIsRegistering(),userIsConnecting:m(u.t).getUserIsConnecting(),userConnectionData:m(u.t).getUserConnectionData(),connectedPlugins:m(u.t).getConnectedPlugins(),connectionErrors:m(u.t).getConnectionErrors(),isOfflineMode:m(u.t).getIsOfflineMode(),...m(u.t).getConnectionStatus()})),w=()=>{if(o){if(v)return window.location=v,Promise.resolve(v)}else return _({from:a,redirectUri:v});return Promise.resolve()},L=m=>(m&&m.preventDefault(),A?w():s({registrationNonce:N,redirectUri:v}).then(()=>w()));return(0,E.useEffect)(()=>{r.ZP.setApiRoot(f),r.ZP.setApiNonce(c)},[f,c]),(0,E.useEffect)(()=>{C&&!p&&!y&&L()},[]),{handleRegisterSite:L,handleConnectUser:w,refreshConnectedPlugins:j,isRegistered:A,isUserConnected:k,siteIsRegistering:p,userIsConnecting:y,registrationError:T,userConnectionData:b,hasConnectedOwner:U,connectedPlugins:S,connectionErrors:D,isOfflineMode:B}}},"../connection/hooks/use-product-checkout-workflow/index.jsx":(O,d,e)=>{var j;e.d(d,{Z:()=>_});var r=e("../api/index.jsx");function i(){var p;switch(typeof window!="undefined"&&((p=window==null?void 0:window.JP_CONNECTION_INITIAL_STATE)==null?void 0:p.calypsoEnv)){case"development":return"http://calypso.localhost:3000/";case"wpcalypso":return"https://wpcalypso.wordpress.com/";case"horizon":return"https://horizon.wordpress.com/";default:return"https://wordpress.com/"}}var g=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),E=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/components/use-select/index.js"),u=e("../../../node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js"),h=e.n(u),P=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),N=e("../connection/components/use-connection/index.jsx"),f=e("../connection/state/store.jsx");const c=h()("jetpack:connection:useProductCheckoutWorkflow"),{registrationNonce:v,apiRoot:C,apiNonce:a,siteSuffix:o}=window!=null&&window.JP_CONNECTION_INITIAL_STATE?window.JP_CONNECTION_INITIAL_STATE:{},s=typeof window!="undefined"?(j=window==null?void 0:window.myJetpackInitialState)==null?void 0:j.adminUrl:null;function _({productSlug:T,redirectUrl:p,siteSuffix:y=o,adminUrl:b=s,connectAfterCheckout:S=!1,siteProductAvailabilityHandler:D=null,quantity:A=null,from:k,useBlogIdSuffix:U=!1}={}){c("productSlug is %s",T),c("redirectUrl is %s",p),c("siteSuffix is %s",y),c("from is %s",k);const[B,w]=(0,P.useState)(!1),{registerSite:L}=(0,g.Z)(f.t),m=(0,E.Z)(M=>M(f.t).getBlogId(),[f.t]);c("blogID is %s",m!=null?m:"undefined"),U=U&&!!m;const{isUserConnected:R,isRegistered:J,handleConnectUser:x}=(0,N.Z)({redirectUri:p,from:k}),l=(0,P.useMemo)(()=>{const M=i(),H=(!J||!R)&&S,Q=H?"checkout/jetpack/":`checkout/${U?m.toString():y}/`,G=A!=null?`:-q-${A}`:"",z=new URL(`${M}${Q}${T}${G}`);return H?(z.searchParams.set("connect_after_checkout",!0),z.searchParams.set("admin_url",b),z.searchParams.set("from_site_slug",y)):z.searchParams.set("site",y),z.searchParams.set("source",k),z.searchParams.set("redirect_to",p),R||z.searchParams.set("unlinked","1"),z},[J,R,S,y,A,T,k,p,b,U,m]);c("isRegistered is %s",J),c("isUserConnected is %s",R),c("connectAfterCheckout is %s",S),c("checkoutUrl is %s",l);const F=(M=null)=>Promise.resolve(D&&D()).then(H=>{if(M&&l.searchParams.set("redirect_to",M),H)return c("handleAfterRegistration: Site has a product associated"),x();c("handleAfterRegistration: Site does not have a product associated. Redirecting to checkout %s",l),window.location.href=l}),Z=(M=null)=>{M&&l.searchParams.set("redirect_to",M),c("Redirecting to connectAfterCheckout flow: %s",l),window.location.href=l},W=(M,H=null)=>{if(M&&M.preventDefault(),w(!0),S)return Z(H);if(J)return F(H);L({registrationNonce:v,redirectUri:p}).then(F)};return(0,P.useEffect)(()=>{r.ZP.setApiRoot(C),r.ZP.setApiNonce(a)},[]),{run:W,isRegistered:J,hasCheckoutStarted:B}}},"../connection/state/store.jsx":(O,d,e)=>{e.d(d,{t:()=>W});var r=e("../api/index.jsx");const i="SET_CONNECTION_STATUS",g="SET_CONNECTION_STATUS_IS_FETCHING",E="FETCH_CONNECTION_STATUS",u="SET_SITE_IS_REGISTERING",h="SET_USER_IS_CONNECTING",P="SET_REGISTRATION_ERROR",N="CLEAR_REGISTRATION_ERROR",f="REGISTER_SITE",c="SET_AUTHORIZATION_URL",v="CONNECT_USER",C="DISCONNECT_USER_SUCCESS",a="FETCH_AUTHORIZATION_URL",o="SET_CONNECTED_PLUGINS",s="REFRESH_CONNECTED_PLUGINS",_="SET_CONNECTION_ERRORS",j="SET_IS_OFFLINE_MODE",T=t=>({type:i,connectionStatus:t}),p=t=>({type:g,isFetching:t}),y=()=>({type:E}),b=t=>({type:u,isRegistering:t}),S=t=>({type:h,isConnecting:t}),D=()=>({type:C}),A=t=>({type:P,registrationError:t}),k=()=>({type:N}),U=t=>({type:c,authorizationUrl:t}),B=t=>({type:a,redirectUri:t}),w=t=>({type:o,connectedPlugins:t}),L=t=>({type:_,connectionErrors:t}),m=t=>({type:j,isOfflineMode:t});function*R({from:t,redirectFunc:n,redirectUri:I}={}){yield S(!0),yield{type:v,from:t,redirectFunc:n,redirectUri:I}}function*J({registrationNonce:t,redirectUri:n}){yield k(),yield b(!0);try{const I=yield{type:f,registrationNonce:t,redirectUri:n};return yield T({isRegistered:!0}),yield U(I.authorizeUrl),yield b(!1),Promise.resolve(I)}catch(I){return yield A(I),yield b(!1),Promise.reject(I)}}const l={setConnectionStatus:T,setConnectionStatusIsFetching:p,fetchConnectionStatus:y,fetchAuthorizationUrl:B,setSiteIsRegistering:b,setUserIsConnecting:S,setRegistrationError:A,clearRegistrationError:k,setAuthorizationUrl:U,registerSite:J,connectUser:R,disconnectUserSuccess:D,setConnectedPlugins:w,refreshConnectedPlugins:()=>async({dispatch:t})=>await new Promise(n=>r.ZP.fetchConnectedPlugins().then(I=>{t(w(I)),n(I)})),setConnectionErrors:L,setIsOfflineMode:m};var F=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/factory.js");const W="jetpack-connection",M=({registrationNonce:t,redirectUri:n})=>r.ZP.registerSite(t,n),H=(0,F.R)(({resolveSelect:t})=>({from:n,redirectFunc:I,redirectUri:le}={})=>new Promise((ye,Pe)=>{t(W).getAuthorizationUrl(le).then(de=>{const Ce=I||(Se=>window.location.assign(Se)),pe=new URL(de);n&&pe.searchParams.set("from",encodeURIComponent(n));const me=pe.toString();Ce(me),ye(me)}).catch(de=>{Pe(de)})})),G={FETCH_AUTHORIZATION_URL:({redirectUri:t})=>r.ZP.fetchAuthorizationUrl(t),REGISTER_SITE:M,CONNECT_USER:H};var z=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/index.js");const V=(t={},n)=>{switch(n.type){case i:return{...t,...n.connectionStatus};case C:return{...t,isUserConnected:!1}}return t},oe=(t={},n)=>{switch(n.type){case o:return n.connectedPlugins}return t},Y=(t=!1,n)=>{switch(n.type){case g:return n.isFetching}return t},ne=(t=!1,n)=>{switch(n.type){case u:return n.isRegistering}return t},se=(t=!1,n)=>{switch(n.type){case h:return n.isConnecting}return t},q=(t,n)=>{switch(n.type){case N:return!1;case P:return n.registrationError;default:return t}},re=(t,n)=>{switch(n.type){case c:return n.authorizationUrl;default:return t}},ae=(t,n)=>{switch(n.type){default:return t}},ce=(t={},n)=>{switch(n.type){case _:return n.connectionErrors}return t},$=(t=!1,n)=>{switch(n.type){case j:return n.isConnecting}return t},K=(0,z.UY)({connectionStatus:V,connectionStatusIsFetching:Y,siteIsRegistering:ne,userIsConnecting:se,registrationError:q,authorizationUrl:re,userConnectionData:ae,connectedPlugins:oe,connectionErrors:ce,isOfflineMode:$});var ie=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/select.js"),ge=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/dispatch.js");const he={...{getAuthorizationUrl:{isFulfilled:(t,...n)=>{const I=!!t.authorizationUrl,le=(0,ie.Y)(W).hasFinishedResolution("getAuthorizationUrl",n);return I&&!le&&(0,ge.W)(W).finishResolution("getAuthorizationUrl",n),I},*fulfill(t){const n=yield l.fetchAuthorizationUrl(t);yield l.setAuthorizationUrl(n.authorizeUrl)}}}},fe={...{getConnectionStatus:t=>t.connectionStatus||{},getConnectionStatusIsFetching:()=>!1,getSiteIsRegistering:t=>t.siteIsRegistering||!1,getUserIsConnecting:t=>t.userIsConnecting||!1,getRegistrationError:t=>t.registrationError||!1,getAuthorizationUrl:t=>t.authorizationUrl||!1,getUserConnectionData:t=>t.userConnectionData||!1,getConnectedPlugins:t=>t.connectedPlugins||[],getConnectionErrors:t=>t.connectionErrors||[],getIsOfflineMode:t=>t.isOfflineMode||!1,getWpcomUser:t=>{var n,I;return(I=(n=t==null?void 0:t.userConnectionData)==null?void 0:n.currentUser)==null?void 0:I.wpcomUser},getBlogId:t=>{var n,I;return(I=(n=t==null?void 0:t.userConnectionData)==null?void 0:n.currentUser)==null?void 0:I.blogId}}};var Ee=e("../../../node_modules/.pnpm/@wordpress+data@9.22.0_react@18.2.0/node_modules/@wordpress/data/build-module/redux-store/index.js");const X=class{static mayBeInit(n,I){X.store===null&&(X.store=(0,Ee.Z)(n,I),(0,z.z2)(X.store))}};let te=X;_e(te,"store",null);const Te=te,ue=window.JP_CONNECTION_INITIAL_STATE;ue||console.error("Jetpack Connection package: Initial state is missing. Check documentation to see how to use the Connection composer package to set up the initial state."),Te.mayBeInit(W,{__experimentalUseThunks:!0,reducer:K,actions:l,selectors:fe,resolvers:he,controls:G,initialState:ue||{}})},"../../packages/my-jetpack/_inc/components/product-detail-table/index.jsx":(O,d,e)=>{e.d(d,{Z:()=>j});var r=e("../components/components/pricing-table/index.tsx"),i=e("../components/components/product-price/index.tsx"),g=e("../components/components/button/index.tsx"),E=e("../components/components/notice/index.tsx"),u=e("../components/components/text/index.tsx"),h=e("../connection/hooks/use-product-checkout-workflow/index.jsx"),P=e("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),N=e("../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js"),f=e.n(N),c=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),v=e("../../packages/my-jetpack/_inc/data/products/use-product.ts"),C=e("../../packages/my-jetpack/_inc/hooks/use-redirect-to-referrer/index.js"),a=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const o=P.__,s=({cantInstallPlugin:T,onProductButtonClick:p,detail:y,isFetching:b,tier:S,trackProductButtonClick:D})=>{var q;const{siteSuffix:A,myJetpackCheckoutUri:k}=(q=window==null?void 0:window.myJetpackInitialState)!=null?q:{},{featuresByTier:U=[],pricingForUi:{tiers:B},title:w,postCheckoutUrl:L}=y,{callToAction:m,currencyCode:R,fullPrice:J,introductoryOffer:x,isFree:l,wpcomProductSlug:F,quantity:Z=null}=B[S],W=(0,C.a)(),H=(0,c.useCallback)(()=>L||W||k,[L,W,k])(),{run:Q,hasCheckoutStarted:G}=(0,h.Z)({from:"my-jetpack",productSlug:F,redirectUrl:H,connectAfterCheckout:!0,siteSuffix:A,useBlogIdSuffix:!0,quantity:Z}),z=(0,c.useCallback)(()=>{D(l),p==null||p(Q,y,S)},[D,p,Q,y,S,l]),V=J?Math.round(J/12*100)/100:null,oe=x!=null&&x.costPerInterval?Math.round(x.costPerInterval/12*100)/100:null,Y=(x==null?void 0:x.intervalUnit)==="month"&&(x==null?void 0:x.intervalCount)===1,ne=Y?(0,P.gB)(o("trial for the first month, then $%s /month, billed yearly","jetpack-my-jetpack"),V):o("/month, paid yearly","jetpack-my-jetpack",0),se=m||(l?o("Start for Free","jetpack-my-jetpack"):(0,P.gB)(o("Get %s","jetpack-my-jetpack"),w,0));return(0,a.jsxs)(r.oK,{primary:!l,children:[(0,a.jsxs)(r.NE,{children:[l?(0,a.jsx)(i.Z,{price:0,legend:"",currency:"USD",hidePriceFraction:!0}):(0,a.jsx)(i.Z,{price:V,offPrice:oe,legend:ne,currency:R,hideDiscountLabel:Y,hidePriceFraction:!0}),(0,a.jsx)(g.Z,{fullWidth:!0,variant:l?"secondary":"primary",onClick:z,isLoading:G||b,disabled:G||T||b,children:se})]}),U.map((re,ae)=>{const{included:ce,description:$,struck_description:ee,info:K}=re.tiers[S],ie=ee||$?(0,a.jsxs)(a.Fragment,{children:[ee?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("del",{children:ee})," "]}):null,$?(0,a.jsx)("strong",{children:$}):null]}):null;return(0,a.jsx)(r.kF,{isIncluded:ce,label:ie,tooltipTitle:K==null?void 0:K.title,tooltipInfo:K!=null&&K.content?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:K==null?void 0:K.content}}):null,tooltipClassName:K==null?void 0:K.class},ae)})]})};s.displayName="ProductDetailTableColumn",s.propTypes={cantInstallPlugin:f().bool.isRequired,onProductButtonClick:f().func.isRequired,detail:f().object.isRequired,tier:f().string.isRequired,trackProductButtonClick:f().func.isRequired};const _=({slug:T,onProductButtonClick:p,trackProductButtonClick:y,isFetching:b})=>{var x;const{fileSystemWriteAccess:S}=(x=window==null?void 0:window.myJetpackInitialState)!=null?x:{},{detail:D}=(0,v.Z)(T),{description:A,featuresByTier:k=[],pluginSlug:U,status:B,tiers:w=[],title:L}=D,m=B==="plugin_absent"&&S==="no",R=m&&(0,a.jsx)(E.Z,{level:"error",hideCloseButton:!0,title:(0,a.jsx)(u.ZP,{children:(0,P.gB)(o("Due to your server settings, we can't automatically install the plugin for you. Please manually install the %s plugin.","jetpack-my-jetpack"),L)}),actions:[(0,a.jsx)(g.Z,{variant:"secondary",href:`https://wordpress.org/plugins/${U}`,isExternalLink:!0,children:o("Get plugin","jetpack-my-jetpack")})]}),J=(0,c.useMemo)(()=>k.map(l=>{var F,Z,W;return{name:l==null?void 0:l.name,tooltipTitle:(F=l==null?void 0:l.info)==null?void 0:F.title,tooltipInfo:(Z=l==null?void 0:l.info)!=null&&Z.content?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:(W=l==null?void 0:l.info)==null?void 0:W.content}}):null}}),[k]);return(0,a.jsxs)(a.Fragment,{children:[R,(0,a.jsx)(r.ZP,{title:A,items:J,children:w.map((l,F)=>(0,a.jsx)(s,{tier:l,detail:D,isFetching:b,onProductButtonClick:p,trackProductButtonClick:y,primary:F===0,cantInstallPlugin:m},F))})]})};_.propTypes={slug:f().string.isRequired,onProductButtonClick:f().func.isRequired,trackProductButtonClick:f().func.isRequired,isFetching:f().bool.isRequired};const j=_;_.__docgenInfo={description:`Product Detail Table component.

Displays a pricing table, with a column for each product tier.

@param {object}   props                         - Component props.
@param {string}   props.slug                    - Product slug.
@param {Function} props.onProductButtonClick    - Click handler for the product button.
@param {Function} props.trackProductButtonClick - Tracks click event for the product button.
@param {boolean}  props.isFetching              - True if there is a pending request to load the product.
@returns {object} - ProductDetailTable react component.`,methods:[],displayName:"ProductDetailTable",props:{slug:{description:"",type:{name:"string"},required:!0},onProductButtonClick:{description:"",type:{name:"func"},required:!0},trackProductButtonClick:{description:"",type:{name:"func"},required:!0},isFetching:{description:"",type:{name:"bool"},required:!0}}}},"../../packages/my-jetpack/_inc/hooks/use-redirect-to-referrer/index.js":(O,d,e)=>{e.d(d,{a:()=>r});function r(){const i=window.location.search;if(!i)return null;const g=new URLSearchParams(i);return!g.has("redirect_to_referrer")||g.get("redirect_to_referrer")!=="1"?null:document.referrer!==""?document.referrer:null}},"../components/components/notice/index.tsx":(O,d,e)=>{e.d(d,{Z:()=>T});var r=e("../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/warning.js"),i=e("../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/info.js"),g=e("../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/check.js"),E=e("../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/icon/index.js"),u=e("../../../node_modules/.pnpm/@wordpress+icons@9.43.0_react@18.2.0/node_modules/@wordpress/icons/build-module/library/close.js"),h=e("../../../node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),P=e.n(h),N=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),f=e("../../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.76.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),c=e.n(f),v=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../components/components/notice/style.module.scss"),C={};C.insert="head",C.singleton=!1;var a=c()(v.Z,C);const o=v.Z.locals||{};var s=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const _=p=>{switch(p){case"error":return r.Z;case"warning":return r.Z;case"info":return i.Z;case"success":return g.Z;default:return r.Z}},j=({level:p,title:y,children:b,actions:S,hideCloseButton:D,onClose:A})=>{const k=P()(o.container,o[`is-${p}`]);return(0,s.jsxs)("div",{className:k,children:[(0,s.jsx)("div",{className:o["icon-wrapper"],children:(0,s.jsx)(E.Z,{icon:_(p),className:o.icon})}),(0,s.jsxs)("div",{className:o["main-content"],children:[(0,s.jsx)("div",{className:o.title,children:y}),b,S&&S.length>0&&(0,s.jsx)("div",{className:o["action-bar"],children:S.map((U,B)=>(0,s.jsx)("div",{className:o.action,children:U},B))})]}),!D&&(0,s.jsx)("button",{"aria-label":"close",className:o["close-button"],onClick:A,children:(0,s.jsx)(E.Z,{icon:u.Z})})]})};j.displayName="Notice",j.defaultProps={level:"info",hideCloseButton:!1};const T=j},"../../packages/my-jetpack/_inc/data/constants.ts":(O,d,e)=>{e.d(d,{Jk:()=>P,LQ:()=>i,_H:()=>g,hd:()=>E,n2:()=>N});const r="my-jetpack/v1",i=`${r}/site/purchases`,g=`${r}/site/backup/undo-event`,E=`${r}/site/backup/count-items`,u=`${r}/chat/availability`,h=`${r}/chat/authentication`,P=`${r}/site/products`,N="videopress/v1/stats/featured"},"../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts":(O,d,e)=>{e.d(d,{o:()=>v});var r=e("../../../node_modules/.pnpm/@wordpress+i18n@4.52.0/node_modules/@wordpress/i18n/build-module/index.js"),i=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),g=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const E={message:"",options:{status:""}},u=(0,i.createContext)({currentNotice:E,setCurrentNotice:null}),h=({children:C})=>{const[a,o]=(0,i.useState)(E);return(0,g.jsx)(u.Provider,{value:{currentNotice:a,setCurrentNotice:o},children:C})};h.displayName="NoticeContextProvider";const P=null;try{noticeContext.displayName="noticeContext",noticeContext.__docgenInfo={description:"",displayName:"noticeContext",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"]={docgenInfo:noticeContext.__docgenInfo,name:"noticeContext",path:"../../packages/my-jetpack/_inc/context/notices/noticeContext.tsx#noticeContext"})}catch(C){}const f=({message:C,options:a,isError:o})=>{const{setCurrentNotice:s}=(0,i.useContext)(u);(0,i.useEffect)(()=>{o&&(s==null||s({message:C,options:a}))},[o])},c=r.__,v=({infoName:C,isError:a,overrideMessage:o})=>{f({message:o!=null?o:(0,r.gB)(c("There was an error fetching your %s information. Check your site connectivity and try again.","jetpack-my-jetpack"),C),options:{status:"error"},isError:a})}},"../../packages/my-jetpack/_inc/data/products/use-product.ts":(O,d,e)=>{e.d(d,{Z:()=>a});var r=e("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),i=e("../../packages/my-jetpack/_inc/data/constants.ts"),g=e("../../packages/my-jetpack/_inc/data/use-simple-query.ts");const E=o=>Array.isArray(o)?o.map(s=>E(s)):typeof o=="object"&&o!==null?Object.fromEntries(Object.entries(o).map(([s,_])=>[s.replace(/([-_][a-z])/gi,j=>j.toUpperCase().replace(/[-_]/g,"")),E(_)])):o,u=E,h=o=>o.pricingForUi.productTerm==="year"?Math.round(o.pricingForUi.fullPrice/12*100)/100:o.pricingForUi.fullPrice,P=o=>o.pricingForUi.productTerm==="year"?Math.round(o.pricingForUi.discountPrice/12*100)/100:o.pricingForUi.discountPrice,N=()=>{var _;const o=window==null?void 0:window.myJetpackInitialState;return((_=o==null?void 0:o.products)==null?void 0:_.items)||{}},f=o=>(0,g.Z)("product",{path:`${i.Jk}/${o}`},{enabled:!1}),c=async(o,s)=>{const{data:_}=await s();window.myJetpackInitialState.products.items[o]=_},v=o=>{const s=u(o);return s.features=s.features||[],s.supportedProducts=s.supportedProducts||[],s.pricingForUi.fullPricePerMonth=h(s),s.pricingForUi.discountPricePerMonth=P(s),s},a=o=>{const s=N(),_=s==null?void 0:s[o],j=v(_),{refetch:T,isLoading:p}=f(o);return{detail:j,refetch:(0,r.useCallback)(()=>c(o,T),[o,T]),isLoading:p}}},"../../packages/my-jetpack/_inc/data/use-simple-query.ts":(O,d,e)=>{e.d(d,{Z:()=>u});var r=e("../../../node_modules/.pnpm/@tanstack+react-query@5.20.5_react@18.2.0/node_modules/@tanstack/react-query/build/modern/useQuery.js"),i=e("../../../node_modules/.pnpm/@wordpress+api-fetch@6.49.0/node_modules/@wordpress/api-fetch/build-module/index.js"),g=e("../../packages/my-jetpack/_inc/data/notices/use-fetching-error-notice.ts");const u=(h,P,N,f,c)=>{const v=(0,r.a)({queryKey:[h,f],queryFn:()=>(0,i.Z)(P),refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,...N}),{isError:C,isLoading:a}=v;return(0,g.o)({infoName:h,isError:!a&&C,overrideMessage:c}),v}},"../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/cjs.js!../../../node_modules/.pnpm/postcss-loader@6.2.0_postcss@8.4.31_webpack@5.76.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!../../../node_modules/.pnpm/sass-loader@12.4.0_sass@1.64.1_webpack@5.76.0/node_modules/sass-loader/dist/cjs.js!../components/components/notice/style.module.scss":(O,d,e)=>{e.d(d,{Z:()=>h});var r=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/noSourceMaps.js"),i=e.n(r),g=e("../../../node_modules/.pnpm/css-loader@6.5.1_webpack@5.76.0/node_modules/css-loader/dist/runtime/api.js"),E=e.n(g),u=E()(i());u.push([O.id,".wRv91q7J3n8WPRO2bdQd{display:flex;align-items:flex-start;font-size:var(--font-body);border:1px solid var(--jp-black);border-radius:4px;border-color:var(--jp-gray-5);border-left-width:6px;padding:24px 31px 27px 18px}.eBBYWoT3DHzb2ETUB7gQ{margin-right:20px;width:calc(var(--spacing-base)*3);height:calc(var(--spacing-base)*3)}.f9rM_jFcQhzZdQ4aLP2t{width:calc(var(--spacing-base)*3);height:calc(var(--spacing-base)*3);background-color:rgba(0,0,0,0);border:none;cursor:pointer;outline:none}@media screen and (max-width: 600px){.wRv91q7J3n8WPRO2bdQd{position:relative;padding-top:68px;box-shadow:0px 4px 8px rgba(0,0,0,.03),0px 1px 2px rgba(0,0,0,.06)}.eBBYWoT3DHzb2ETUB7gQ{position:absolute;top:24px;left:24px}.f9rM_jFcQhzZdQ4aLP2t{position:absolute;top:24px;right:24px}}.mcA20ooHC80GFPcATa_5{flex-grow:1}.KoKOKW3_hFtFmlzWeoGZ{font-weight:600;margin-bottom:8px}.Qzd24EOL0Ihv756LLJ94{display:flex;align-items:center;margin-top:20px}.Qzd24EOL0Ihv756LLJ94 a,.Qzd24EOL0Ihv756LLJ94 a:hover,.Qzd24EOL0Ihv756LLJ94 a:active,.Qzd24EOL0Ihv756LLJ94 a:focus{color:var(--jp-black)}.Qzd24EOL0Ihv756LLJ94>*{margin-right:24px}.ZSksMKiSApMWzna8kNT6{border-left-color:var(--jp-red)}.ZSksMKiSApMWzna8kNT6 .HXRf4rhVKerbrnTaNHiK{fill:var(--jp-red)}.MLZdCYxPeNOslt9ykmNf{border-left-color:var(--jp-yellow-20)}.MLZdCYxPeNOslt9ykmNf .HXRf4rhVKerbrnTaNHiK{fill:var(--jp-yellow-20)}.V0UlZv19790uDOeNlFQB{border-left-color:var(--black)}.V0UlZv19790uDOeNlFQB .HXRf4rhVKerbrnTaNHiK{fill:var(--black)}.ERt0pZRX_su4Hkpwod3r{border-left-color:var(--jp-green)}.ERt0pZRX_su4Hkpwod3r .HXRf4rhVKerbrnTaNHiK{fill:var(--jp-green)}",""]),u.locals={container:"wRv91q7J3n8WPRO2bdQd","icon-wrapper":"eBBYWoT3DHzb2ETUB7gQ","close-button":"f9rM_jFcQhzZdQ4aLP2t","main-content":"mcA20ooHC80GFPcATa_5",title:"KoKOKW3_hFtFmlzWeoGZ","action-bar":"Qzd24EOL0Ihv756LLJ94","is-error":"ZSksMKiSApMWzna8kNT6",icon:"HXRf4rhVKerbrnTaNHiK","is-warning":"MLZdCYxPeNOslt9ykmNf","is-info":"V0UlZv19790uDOeNlFQB","is-success":"ERt0pZRX_su4Hkpwod3r"};const h=u}}]);})();
